<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Elmで開発したルーレットアプリの実装解説</title>
    <link rel="modulepreload" crossorigin href="/elm.354505f0.js"><link rel="modulepreload" crossorigin href="/assets/index-BL8LVoMj.js">
    <script defer src="/elm.354505f0.js" type="text/javascript"></script>
        
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-43J055Y1KK"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-43J055Y1KK');
    </script>
    
        <link rel="canonical" href="https://hahnah.github.io/tech-blog/2018-unfair-roulette-technology/" />    <meta name="description" content="Unfair Roulette は止まる目を操作することができる、そんなルーレットだ。それをElmがどのように実装したのかを解説する。" />    <meta property="og:image" content="https://hahnah.github.io/images/tech-blog/2018-unfair-roulette-technology/with-pc.avif" />    <meta property="og:image:secure_url" content="https://hahnah.github.io/images/tech-blog/2018-unfair-roulette-technology/with-pc.avif" />    <meta property="og:image:alt" content="Elmで開発したルーレットアプリの実装解説" />    <meta property="og:title" content="Elmで開発したルーレットアプリの実装解説" />    <meta property="og:url" content="https://hahnah.github.io/tech-blog/2018-unfair-roulette-technology/" />    <meta property="og:description" content="Unfair Roulette は止まる目を操作することができる、そんなルーレットだ。それをElmがどのように実装したのかを解説する。" />    <meta property="og:site_name" content="Hahnah Chronicle" />    <meta property="og:locale" content="en_us" />    <meta property="twitter:card" content="summary_large_image" />    <meta property="twitter:title" content="Elmで開発したルーレットアプリの実装解説" />    <meta property="twitter:description" content="Unfair Roulette は止まる目を操作することができる、そんなルーレットだ。それをElmがどのように実装したのかを解説する。" />    <meta property="twitter:image" content="https://hahnah.github.io/images/tech-blog/2018-unfair-roulette-technology/with-pc.avif" />    <meta property="twitter:image:alt" content="Elmで開発したルーレットアプリの実装解説" />    <meta property="og:type" content="article" />    <meta property="article:published_time" content="2018-12-01" />    <meta property="article:modified_time" content="2025-04-06" />    <meta property="article:tag" content="unfair-roulette" />    <meta property="article:tag" content="hahnah&apos;s-app" />    <meta property="article:tag" content="elm" />    <meta name="twitter:creator" content="@superhahnah" />    <meta name="twitter:label1" content="Author" />    <meta name="twitter:data1" content="原井 夏樹" />    <meta name="viewport" content="width=device-width,initial-scale=1" />    <link rel="sitemap" type="application/xml" href="/sitemap.xml" />    <meta name="google-site-verification" content="4bSyz5M2yG7qbbOk3bDplOhLgLDDf7v0i06U_8-OzdY" />
                  <script id="__ELM_PAGES_BYTES_DATA__" type="application/octet-stream">AQv8394K5Lul5LiL44Gu6KiY5LqL44Gn6Kqs5piO44GX44Gm44GE44KL44Or44O844Os44OD44OI44Ki44OX44Oq44KSRWxt44Gn5L2c5oiQ44GX44Gf44CCICAKW1VuZmFpciBSb3VsZXR0ZSA6IOOCpOODs+ODgeOCreOBp+OBjeOCi+ODq+ODvOODrOODg+ODiOOCouODl+ODquOCkuS9nOaIkOOBl+OBn10oaHR0cHM6Ly9oYWhuYWguZ2l0aHViLmlvL3RlY2gtYmxvZy8yMDE4LXVuZmFpci1yb3VsZXR0ZS8pCgrjganjga7jgojjgYbjgarlrp/oo4XjgavjgarjgaPjgabjgYTjgovjgYvjgpLjgr3jg7zjgrnjgrPjg7zjg4njgoTlm7PooajjgajjgajjgoLjgavop6PoqqzjgZnjgovjgIIKCiMjIDEuIOOCouODl+ODquOBq+OBpOOBhOOBpgoKLSDjgqLjg5fjg6rlkI0gOiBbVW5mYWlyIFJvdWxldHRlXShodHRwczovL2hhaG5haC5naXRodWIuaW8vdW5mYWlyLXJvdWxldHRlLykgJiN4MWY0NDg744GT44Gu44Oq44Oz44Kv44GL44KJ44Ki44OX44Oq44KS6Kmm44Gb44KLCi0g44Ki44OX44Oq5qaC6KaBIDogW1VuZmFpciBSb3VsZXR0ZSA6IOOCpOODs+ODgeOCreOBp+OBjeOCi+ODq+ODvOODrOODg+ODiOOCouODl+ODquOCkuS9nOaIkOOBl+OBn10oaHR0cHM6Ly9oYWhuYWguZ2l0aHViLmlvL3RlY2gtYmxvZy8yMDE4LXVuZmFpci1yb3VsZXR0ZS8pCi0g6ZaL55m66KiA6KqeIDogRWxtIDAuMTkKLSDjgr3jg7zjgrnjgrPjg7zjg4kgOiBbaHR0cHM6Ly9naXRodWIuY29tL2hhaG5haC91bmZhaXItcm91bGV0dGUvdHJlZS8xLjAuMF0oaHR0cHM6Ly9naXRodWIuY29tL2hhaG5haC91bmZhaXItcm91bGV0dGUvdHJlZS8xLjAuMCkKCiMjIDIuIOeKtuaFi+mBt+enu+OBruS7leanmAoK44GT44Gu44Ki44OX44Oq44Gv6KSH5pWw44Gu54q25oWLKOOCt+ODvOODsynjgYvjgonjgarjgorjgIHnirbmhYvlj5fjgZHlj5bjgaPjgZ/jg6Hjg4Pjgrvjg7zjgrjjga7ntYTjgb/lkIjjgo/jgZvjgavlv5zjgZjjgablh6bnkIbjgYzjgarjgZXjgozjgovjgIIKCiMjIyMg54q25oWL6YG356e75ZuzCgrmrKHjga7nirbmhYvpgbfnp7vlm7Pjgafjga/jgIHlkITnirbmhYvjgavjgYrjgYTjgabjgIHjg6Hjg4Pjgrvjg7zjgrgo6Z2S55+i5Y2wKeOBjOWHuuOBleOCjOOBn+WgtOWQiOOBq+OBqeOBrueKtuaFi+OBq+mBt+enu+OBmeOCi+OBi+OCkuekuuOBl+OBpuOBhOOCi+OAgiAgCuODoeODg+OCu+ODvOOCuOOBq+W/nOOBmOOBpueKtuaFi+OBjOWkieWMluOBl+OBn+OCiuOAgeeKtuaFi+OBr+OBneOBruOBvuOBvuOBp+OCglZpZXfjgYzmm7TmlrDjgZXjgozjgZ/jgorjgZnjgovjgIIgIArliJ3mnJ/nirbmhYvjga/lm7PkuK3lt6bnq6/jga5gRWRpdGluZ1JvdWxldHRlYOOBp+OBguOCi+OAggoKIVtzdGF0ZS10cmFuc3Rpb24tZGlhZ3JhbV0oL2ltYWdlcy90ZWNoLWJsb2cvMjAxOC11bmZhaXItcm91bGV0dGUtdGVjaG5vbG9neS9zdGF0ZS10cmFuc2l0aW9uLWRpYWdyYW0uYXZpZikKCuOBneOCjOOBnuOCjOOBrueKtuaFi+OBqOODoeODg+OCu+ODvOOCuOOBruaEj+WRs+OBr+asoeOBrumAmuOCiuOAggoKIyMjIyDnirbmhYsKCnwg54q25oWLICAgICAgICAgICAgICAgICAgICAgICAgfCDoqqzmmI4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8CnwgRWRpdGluZ1JvdWxldHRlICAgICAgICAgICAgIHwg44Or44O844Os44OD44OI77yI44KS5qeL5oiQ44GZ44KL44Ki44Kk44OG44Og77yJ44KS57eo6ZuG44GX44Gm44GE44KL54q25oWLICAgICAgIHwKfCBSb3VsZXR0ZVNwaW5uaW5nICAgICAgICAgICAgfCDjg6vjg7zjg6zjg4Pjg4jjgYzlm57ou6LjgZfjgabjgYTjgovnirbmhYsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKfCBSb3VsZXR0ZVNwaW5uaW5nVG93YXJkc1N0b3AgfCDjg6vjg7zjg6zjg4Pjg4jjgYzlgZzmraLjga7jgr/jgqTjg5/jg7PjgrDjgpLlm7PjgorjgarjgYzjgonlm57ou6LjgZfjgabjgYTjgovnirbmhYsgfAp8IFJvdWxldHRlU3RvcHBlZCAgICAgICAgICAgICB8IOODq+ODvOODrOODg+ODiOOBjOWBnOatouOBl+OBn+eKtuaFiyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKfCBSZXN1bHRTaG93ZWQgICAgICAgICAgICAgICAgfCDjg6vjg7zjg6zjg4Pjg4jjga7ntZDmnpzjgYzooajnpLrjgZXjgozjgZ/nirbmhYsgICAgICAgICAgICAgICAgICAgICAgICAgfAoKIyMjIyDjg6Hjg4Pjgrvjg7zjgrgKCnwg44Oh44OD44K744O844K4ICAgICAgICAgICAgICAgICAgIHwg44Oh44OD44K744O844K444KS5Y+X44GR5Y+W44Gj44Gf6Zqb44Gu5Yem55CGICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwKfCBJbmNyZW1lbnQgICAgICAgICAgICAgICAgICAgIHwg5oyH5a6a44GV44KM44Gf44Ki44Kk44OG44Og44Gu6Kit5a6a5YCk44KSMeWil+OChOOBmSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAp8IERlY3JlbWVudCAgICAgICAgICAgICAgICAgICAgfCDmjIflrprjgZXjgozjgZ/jgqLjgqTjg4bjg6Djga7oqK3lrprlgKTjgpIx5rib44KJ44GZICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CnwgQ2hhbmdlTGFiZWwgICAgICAgICAgICAgICAgICB8IOaMh+WumuOBleOCjOOBn+OCouOCpOODhuODoOOBruODqeODmeODq+OCkuOAgeWFpeWKm+ashOOBruaWh+Wtl+WIl+OBq+WkieabtOOBmeOCiyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CnwgQ2hhbmdlQ291bnQgICAgICAgICAgICAgICAgICB8IOaMh+WumuOBleOCjOOBn+OCouOCpOODhuODoOOBruioreWumuWApOOCkuOAgeWFpeWKm+ashOOBruaVsOWApOOBq+WkieabtOOBmeOCiyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKfCBDbGVhciAgICAgICAgICAgICAgICAgICAgICAgIHwg5oyH5a6a44GV44KM44Gf44Ki44Kk44OG44Og44Gu6Kit5a6a5YCk44Go44Op44OZ44Or44KS44Kv44Oq44Ki44GZ44KLICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAp8IENoZWF0ICAgICAgICAgICAgICAgICAgICAgICAgfCDmjIflrprjgZXjgozjgZ/jgqLjgqTjg4bjg6Djgafjg6vjg7zjg6zjg4Pjg4jjgYzlgZzmraLjgZnjgovjgojjgYbjgavoqK3lrprjgZnjgosgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAp8IE9uQ2xpY2tTdGFydCAgICAgICAgICAgICAgICAgfCDjg6vjg7zjg6zjg4Pjg4jlm57ou6Lplovlp4vjga7mnaHku7bjgpLmuoDjgZ/jgZfjgabjgYTjgozjgbAgU3RhcnRTcGlubmluZ1JvdWxldHRlIOODoeODg+OCu+ODvOOCuOOCkuWHuuOBmSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKfCBTdGFydFNwaW5uaW5nUm91bGV0dGUgICAgICAgIHwg44Or44O844Os44OD44OI44Gu5Zue6Lui44KS6ZaL5aeL44GZ44KLICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CnwgU3BpblJvdWxldHRlICAgICAgICAgICAgICAgICB8IOODq+ODvOODrOODg+ODiOOBruWbnui7ouOCkumAsuOCgeOCi+OAgjxicj7jg6vjg7zjg6zjg4Pjg4jjgYzlgZzmraLmnaHku7bjgpLmuoDjgZ/jgZfjgabjgYTjgozjgbAgU3RvcFJvdWxldHRlIOODoeODg+OCu+ODvOOCuOOCkuWHuuOBmeOAgjxicj4oYFNwaW5Sb3VsZXR0ZWDjg6Hjg4Pjgrvjg7zjgrjjga/jgIFTdWJzY3JpcHRpb24g44Gr44KI44KKYFJvdWxldHRlU3Bpbm5pbmdgb3JgUm91bGV0dGVTcGlubmluZ1Rvd2FyZHNTdG9wYOeKtuaFi+OBruWgtOWQiOOBq+Wumuacn+eahOOBq+WHuuOBleOCjOOCiykgfAp8IEFkanVzdERlY2F5UmF0ZUZvclNtb290aFN0b3AgfCDjg6vjg7zjg6zjg4Pjg4jjga7lm57ou6Lop5LpgJ/luqbjga7muJvoobDnjofjgpLoqr/mlbTjgZnjgosgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CnwgU3RvcFJvdWxldHRlICAgICAgICAgICAgICAgICB8IOODq+ODvOODrOODg+ODiOOBruWbnui7ouOCkuWBnOatouOBmeOCiyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAp8IFNob3dSZXN1bHQgICAgICAgICAgICAgICAgICAgfCDjg6vjg7zjg6zjg4Pjg4jjga7ntZDmnpzjgpLjg4DjgqTjgqLjg63jgrDjgafooajnpLrjgZnjgosgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKfCBIaWRlUmVzdWx0ICAgICAgICAgICAgICAgICAgIHwg44Or44O844Os44OD44OI44Gu57WQ5p6c44OA44Kk44Ki44Ot44Kw44KS6ZaJ44GY44KLICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAoKTk9URTog5Y6z5a+G44Gr44Gv44CB5L6L44GI44GwYEluY3JlbWVudGDjga9gSW5jcmVtZW50IENvdW50ZXJg44Go44GE44GG5Z6L44KS44GX44Gm44GE44KL44GM55yB55Wl44GX44Gm6KGo6KiY44GX44Gm44GE44KL44CC5LuW44Gu44Oh44OD44K744O844K444KC5ZCM5qeY44CCCgojIyAzLiDlkITlh6bnkIbjga7lrp/oo4XoqbPntLAKCuS4gOmDqOOBruWHpueQhuOBq+OBpOOBhOOBpuOBqeOBhuWun+ijheOBl+OBn+OBi+OCkue0ueS7i+OBmeOCi+OAgiAgCuWJjeaPkOOBqOOBl+OBpuOAgeWQhOWHpueQhuOBp+OBr+S7peS4i+OBq+Wumue+qeOBmeOCi+Wei+OBjOeZu+WgtOOBmeOCi+OAggoKYGBgZWxtCi0tIE1PREVMCgp0eXBlIGFsaWFzIE1vZGVsID0KICB7IHNjZW5lOiBTY2VuZQogICwgY291bnRlcnM6IENvdW50ZXJzCiAgLCBtYXhDb3VudGVyczogSW50CiAgLCByb3RhdGlvbjogRmxvYXQgLS0gaW4gcGVyY2VudGFnZQogICwgcm90YXRpb25WZWxvY2l0eTogRmxvYXQKICAsIGRlY2F5UmF0ZTogRmxvYXQKICAsIGdvYWxSb3RhdGlvbjogRmxvYXQKICAsIHBvaW50ZWRDb3VudGVyOiBDb3VudGVyCiAgLCBjaGVhdGVkR29hbFJhbmdlOiBNYXliZSBSYW5nZQogIH0KCnR5cGUgYWxpYXMgQ291bnRlcnMgPSBMaXN0IENvdW50ZXIKCnR5cGUgYWxpYXMgQ291bnRlciA9CiAgeyBpZDogSW50CiAgLCBsYWJlbDogU3RyaW5nCiAgLCBjb3VudDogSW50CiAgfQoKdHlwZSBhbGlhcyBGYW5TaGFwZSA9CiAgeyBvZmZzZXQ6IEZsb2F0CiAgLCBwZXJjZW50YWdlOiBGbG9hdAogICwgY29sb3I6IFN0cmluZwogIH0KCnR5cGUgYWxpYXMgQ29sb3IgPSBTdHJpbmcKCnR5cGUgYWxpYXMgQ29sb3JzID0gTGlzdCBDb2xvcgoKdHlwZSBTY2VuZQogID0gRWRpdGluZ1JvdWxldHRlCiAgfCBSb3VsZXR0ZVNwaW5uaW5nCiAgfCBSb3VsZXR0ZVNwaW5uaW5nVG93YXJkc1N0b3AKICB8IFJvdWxldHRlU3RvcHBlZAogIHwgUmVzdWx0U2hvd2VkCgp0eXBlIGFsaWFzIFJhbmdlID0KICB7IG1pbjogRmxvYXQKICAsIG1heDogRmxvYXQKICB9Cgp0eXBlIGFsaWFzIFJvdGF0aW9uUmFuZ2UgPQogeyBtaW46IEZsb2F0CiAsIG1heDogRmxvYXQKIH0KYGBgCgrjgZPjgozjgojjgorlhYjjgpLoqq3jgoDkuIrjgafmiormj6HjgZfjgabjgYrjgYTjgabjgbvjgZfjgYTjga7jga9gQ291bnRlcmDlnovjgahgRmFuU2hhcGVg5Z6L44Gg44CCCgotIGBDb3VudGVyYOOBr+ODq+ODvOODrOODg+ODiOOCkuani+aIkOOBmeOCi+mBuOaKnuiCouOBruWRvOOBs+WQjeOBqOaVsOWApCjkvovjgYjjgbDnpajmlbAp44KS6KGo44GZ44CC44Om44O844K244O844Gu5pON5L2c44Gn57eo6ZuG44GV44KM44KL44CCCi0gYEZhblNoYXBlYOOBr+OAgeODq+ODvOODrOODg+ODiOOCkuani+aIkOOBmeOCi+aJh+W9oijjga7mj4/nlLvjgavlv4XopoHjgarmg4XloLEp44KS6KGo44GZ44CCYENvdW50ZXJg44KS55So44GE44Gm566X5Ye644GV44KM44KL44CCCgrjgZPjgozjgb7jgafjgIHjgZPjga7oqJjkuovkuK3jgafjg6vjg7zjg6zjg4Pjg4jjga5g44Ki44Kk44OG44OgYOOBqOWRvOOCk+OBp+OBhOOBn+OCguOBruOBr2BDb3VudGVyYOOBp+OBguOCimBGYW5TaGFwZWDjgafjgYLjgovjgIIKCiMjIyAzLjEg44Or44O844Os44OD44OI44Gu57eo6ZuG5Yem55CGCgohW2VkaXRpbmctcm91bGV0dGVdKC9pbWFnZXMvdGVjaC1ibG9nLzIwMTgtdW5mYWlyLXJvdWxldHRlLXRlY2hub2xvZ3kvZWRpdGluZy1yb3VsZXR0ZS5hdmlmKQoKIyMjIyBJbmNyZW1lbnQgOiDmjIflrprjgZXjgozjgZ/jgqLjgqTjg4bjg6Djga7oqK3lrprlgKTjgpIx5aKX44KE44GZCgpgbW9kZWxg44Gr44GvYENvdW50ZXJzYOWei+OBruWApOOCkuaMgeOBn+OBm+OBpuOBiuOCiuOAgeaMh+WumuOBleOCjOOBn+OCouOCpOODhuODoChgY291bnRlcmAp44Gg44GR44KSMeWil+OChOOBl+OBn2BDb3VudGVyc2DlgKTjgpLoqIjnrpfjgZfjgIHmlrDjgZfjgYRgTW9kZWxg44KS6L+U44GZ44CCCgpgYGBlbG0KdXBkYXRlIDogTXNnIC0+IE1vZGVsIC0+IChNb2RlbCwgQ21kIE1zZykKdXBkYXRlIG1zZyBtb2RlbCA9CiAgY2FzZSAobXNnLCBtb2RlbC5zY2VuZSkgb2YKICAgIChJbmNyZW1lbnQgY291bnRlciwgRWRpdGluZ1JvdWxldHRlKSAtPgogICAgICBsZXQKICAgICAgICAoZnJvbnQsIGJhY2spID0gc2VwYXJhdGVJbnRvRnJvbnRBbmRCYWNrIG1vZGVsLmNvdW50ZXJzIGNvdW50ZXIKICAgICAgICB1cGRhdGVkQ291bnRlciA9IHsgY291bnRlciB8IGNvdW50ID0gY291bnRlci5jb3VudCArIDF9CiAgICAgICAgdXBkYXRlZENvdW50ZXJzID0gZnJvbnQgKysgW3VwZGF0ZWRDb3VudGVyXSArKyBiYWNrCiAgICAgIGluCiAgICAgICAgKHsgbW9kZWwgfCBjb3VudGVycyA9IHVwZGF0ZWRDb3VudGVycyB9LCBDbWQubm9uZSkKYGBgCgrjgZPjgZPjgadgc2VwYXJhdGVJbnRvRnJvbnRBbmRCYWNrYOOBr+OAgeabtOaWsOW+jOOBrmBDb3VudGVyc2DlgKTjgpLoqIjnrpfjgZnjgovjgZ/jgoHjga7jg5jjg6vjg5Hjg7zplqLmlbDjgafjgYLjgovjgIIKCiMjIyMgRGVjcmVtZW50IDog5oyH5a6a44GV44KM44Gf44Ki44Kk44OG44Og44Gu6Kit5a6a5YCk44KSMea4m+OCieOBmQoK5oyH5a6a44GV44KM44Gf44Ki44Kk44OG44OgKGBjb3VudGVyYCnjgaDjgZHjgpIx5rib44KJ44GX44GfYENvdW50ZXJzYOWApOOCkuioiOeul+OBmeOCi+OAgjDku6XkuIvjgavjga/jgarjgonjgarjgYTjgIIKCmBgYGVsbQp1cGRhdGUgOiBNc2cgLT4gTW9kZWwgLT4gKE1vZGVsLCBDbWQgTXNnKQp1cGRhdGUgbXNnIG1vZGVsID0KICBjYXNlIChtc2csIG1vZGVsLnNjZW5lKSBvZgotLSAo5Lit55WlKQogICAgKERlY3JlbWVudCBjb3VudGVyLCBFZGl0aW5nUm91bGV0dGUpIC0+CiAgICAgIGlmIDAgPCBjb3VudGVyLmNvdW50IHRoZW4KICAgICAgICBsZXQKICAgICAgICAgIChmcm9udCwgYmFjaykgPSBzZXBhcmF0ZUludG9Gcm9udEFuZEJhY2sgbW9kZWwuY291bnRlcnMgY291bnRlcgogICAgICAgICAgdXBkYXRlZENvdW50ZXIgPSB7IGNvdW50ZXIgfCBjb3VudCA9IGNvdW50ZXIuY291bnQgLSAxfQogICAgICAgICAgdXBkYXRlZENvdW50ZXJzID0gZnJvbnQgKysgW3VwZGF0ZWRDb3VudGVyXSArKyBiYWNrCiAgICAgICAgaW4KICAgICAgICAgICh7IG1vZGVsIHwgY291bnRlcnMgPSB1cGRhdGVkQ291bnRlcnMgfSwgQ21kLm5vbmUpCiAgICAgIGVsc2UKICAgICAgICAobW9kZWwsIENtZC5ub25lKQpgYGAKCiMjIyMgQ2hhbmdlQ291bnQgOiDmjIflrprjgZXjgozjgZ/jgqLjgqTjg4bjg6Djga7oqK3lrprlgKTjgpLjgIHlhaXlipvmrITjga7mlbDlgKTjgavlpInmm7TjgZnjgosKCmBJbmNyZW1lbnRgLCBgRGVjcmVtZW50YDHjgZrjgaTjgZfjgYvlopfmuJvjgZXjgozjgarjgYTjgYzjgIFgQ2hhbmdlQ291bnRg44Gn44Gv55u05o6l5oyH5a6a44GX44Gf5pWw5YCk44Gr6Kit5a6a44Gn44GN44KL44CC5pWw5YCk5YWl5Yqb5qyE44G444Gu5YWl5Yqb44GM44GV44KM44KL5bqm44GrYENoYW5nZUNvdW50YOOBjOOBleOCjOOCi+OAggoKYGBgZWxtCnVwZGF0ZSA6IE1zZyAtPiBNb2RlbCAtPiAoTW9kZWwsIENtZCBNc2cpCnVwZGF0ZSBtc2cgbW9kZWwgPQogIGNhc2UgKG1zZywgbW9kZWwuc2NlbmUpIG9mCi0tICjkuK3nlaUpCiAgICAoQ2hhbmdlQ291bnQgY291bnRlciBuZXdDb3VudCwgRWRpdGluZ1JvdWxldHRlKSAtPgogICAgICBsZXQKICAgICAgICAoZnJvbnQsIGJhY2spID0gc2VwYXJhdGVJbnRvRnJvbnRBbmRCYWNrIG1vZGVsLmNvdW50ZXJzIGNvdW50ZXIKICAgICAgICB1cGRhdGVkQ291bnRlciA9IHsgY291bnRlciB8IGNvdW50ID0gU3RyaW5nLnRvSW50IG5ld0NvdW50IHw+IE1heWJlLndpdGhEZWZhdWx0IChpZiBuZXdDb3VudCA9PSAiIiB0aGVuIDAgZWxzZSBjb3VudGVyLmNvdW50KSB9CiAgICAgICAgdXBkYXRlZENvdW50ZXJzID0gZnJvbnQgKysgW3VwZGF0ZWRDb3VudGVyXSArKyBiYWNrCiAgICAgIGluCiAgICAgICAgKHsgbW9kZWwgfCBjb3VudGVycyA9IHVwZGF0ZWRDb3VudGVycyB9LCBDbWQubm9uZSkKYGBgCgoo5pu444GE44Gm44GE44Gm5LuK5pu05rCX5LuY44GE44Gf44GM44CBYEluY3JlbWVudGDjgahgRGVjcmVtZW50YOOBquOCk+OBpuODoeODg+OCu+ODvOOCuOOBr+S4jeimgeOBp+OAgWBDaGFuZ2VDb3VudGDjgaDjgZHjgaflhajjgabmi4XjgYjjgovjgIJEUlnjgZfjgojjgYbjgIIpCgojIyMjIENoYW5nZUxhYmVsIDog5oyH5a6a44GV44KM44Gf44Ki44Kk44OG44Og44Gu44Op44OZ44Or44KS44CB5YWl5Yqb5qyE44Gu5paH5a2X5YiX44Gr5aSJ5pu044GZ44KLCgpgQ2hhbmdlQ291bnRg44Go44G744G85ZCM44GY44CC5oyH5a6a44GV44KM44Gf44Ki44Kk44OG44OgKGBjb3VudGVyYCnjga7jg6njg5njg6vjgpLjgIHlhaXlipvmloflrZfliJdgbmV3TGFiZWxg44Gn572u44GN5o+b44GI44Gf5paw44GX44GEYE1vZGVsYOWApOOCkui/lOOBmeOAggoKYGBgZWxtCnVwZGF0ZSA6IE1zZyAtPiBNb2RlbCAtPiAoTW9kZWwsIENtZCBNc2cpCnVwZGF0ZSBtc2cgbW9kZWwgPQogIGNhc2UgKG1zZywgbW9kZWwuc2NlbmUpIG9mCi0tICjkuK3nlaUpCiAgICAoQ2hhbmdlTGFiZWwgY291bnRlciBuZXdMYWJlbCwgRWRpdGluZ1JvdWxldHRlKSAtPgogICAgICBsZXQKICAgICAgICAoZnJvbnQsIGJhY2spID0gc2VwYXJhdGVJbnRvRnJvbnRBbmRCYWNrIG1vZGVsLmNvdW50ZXJzIGNvdW50ZXIKICAgICAgICB1cGRhdGVkQ291bnRlciA9IHsgY291bnRlciB8IGxhYmVsID0gbmV3TGFiZWx9CiAgICAgICAgdXBkYXRlZENvdW50ZXJzID0gZnJvbnQgKysgW3VwZGF0ZWRDb3VudGVyXSArKyBiYWNrCiAgICAgIGluCiAgICAgICAgKHsgbW9kZWwgfCBjb3VudGVycyA9IHVwZGF0ZWRDb3VudGVycyB9LCBDbWQubm9uZSkKYGBgCgojIyMjIENsZWFyIDog5oyH5a6a44GV44KM44Gf44Ki44Kk44OG44Og44Gu6Kit5a6a5YCk44Go44Op44OZ44Or44KS44Kv44Oq44Ki44GZ44KLCgrmjIflrprjgZXjgozjgZ/jgqLjgqTjg4bjg6Djga7jgIHjg6njg5njg6vjgajoqK3lrprlgKTjgpJgIiJgKOepuuaWh+WtlynjgahgMGDjgavjgZfjgZ9gTW9kZWxg5YCk44KS6L+U44GZ44CCCgpgYGBlbG0KdXBkYXRlIDogTXNnIC0+IE1vZGVsIC0+IChNb2RlbCwgQ21kIE1zZykKdXBkYXRlIG1zZyBtb2RlbCA9CiAgY2FzZSAobXNnLCBtb2RlbC5zY2VuZSkgb2YKLS0gKOS4reeVpSkKICAgIChDbGVhciBjb3VudGVyLCBFZGl0aW5nUm91bGV0dGUpIC0+CiAgICAgIGxldAogICAgICAgIChmcm9udCwgYmFjaykgPSBzZXBhcmF0ZUludG9Gcm9udEFuZEJhY2sgbW9kZWwuY291bnRlcnMgY291bnRlcgogICAgICAgIHVwZGF0ZWRDb3VudGVyID0geyBjb3VudGVyIHwgY291bnQgPSAwLCBsYWJlbCA9ICIiIH0KICAgICAgICB1cGRhdGVkQ291bnRlcnMgPSBmcm9udCArKyBbdXBkYXRlZENvdW50ZXJdICsrIGJhY2sKICAgICAgaW4KICAgICAgICAoeyBtb2RlbCB8IGNvdW50ZXJzID0gdXBkYXRlZENvdW50ZXJzIH0sIENtZC5ub25lKQpgYGAKCiMjIyAzLjIg44Or44O844Os44OD44OI44Gu5o+P55S75Yem55CGCgrjg6vjg7zjg6zjg4Pjg4jjga7mj4/nlLvvvIjjgajjgYTjgYbjgojjgorjgIHmiYflvaLjga7mj4/nlLvvvInjgavjga/jgIFbXFtFbG1cXSBTVkfjgaflhobjgrDjg6njg5XjgpLooajnpLrjgZnjgovmlrnms5VdKGh0dHBzOi8vaGFobmFoLmdpdGh1Yi5pby90ZWNoLWJsb2cvMjAxOC1lbG0tc3ZnLXBpZWNoYXJ0Lynjga7oqJjkuovjga7mlrnms5XjgpLnlKjjgYTjgZ/jgILntLDpg6jjga/nlbDjgarjgovjgYzjgIHln7rmnKznmoTjgarjgoTjgormlrnjga/lkIzjgZjjgIIKCmBgYGVsbQp2aWV3Um91bGV0dGUgOiBDb3VudGVycyAtPiBDb2xvcnMgLT4gRmxvYXQgLT4gSHRtbCBNc2cKdmlld1JvdWxldHRlIGNvdW50ZXJzIGNvbG9ycyByb3RhdGlvbiA9CiAgbGV0CiAgICBjb3VudHMgPSBMaXN0Lm1hcCAoXGNvdW50ZXIgLT4gdG9GbG9hdCBjb3VudGVyLmNvdW50KSBjb3VudGVycwogICAgdG90YWwgPSBMaXN0LnN1bSBjb3VudHMKICAgIHBlcmNlbnRhZ2VzID0gTGlzdC5tYXAgKFxjb3VudCAtPiAxMDAuMCAqIGNvdW50IC8gdG90YWwpIGNvdW50cwogICAgb2Zmc2V0cyA9CiAgICAgIExpc3QuZm9sZGwgKFxwZXJjZW50YWdlIGFjYyAtPiBMaXN0LmFwcGVuZCBhY2MgWyhNYXliZS53aXRoRGVmYXVsdCAwLjAgPHwgTGlzdC5tYXhpbXVtIGFjYykgKyBwZXJjZW50YWdlXSkgWzAuMF0gcGVyY2VudGFnZXMKICAgICAgICB8PiBMaXN0Lm1hcCAoKCspIHJvdGF0aW9uKQogICAgZmFuU2hhcGVzID0gTGlzdC5tYXAzIChcb2Zmc2V0IHBlcmNlbnRhZ2UgY29sb3IgLT4gRmFuU2hhcGUgb2Zmc2V0IHBlcmNlbnRhZ2UgY29sb3IpIG9mZnNldHMgcGVyY2VudGFnZXMgY29sb3JzCiAgaW4KICAgIHN2ZwogICAgICBbIHZpZXdCb3ggIjAgMCA2My42NjE5NzcyMzY4IDYzLjY2MTk3NzIzNjgiLCB3aWR0aCAiNTAwcHgiLCBzdHlsZSAidHJhbnNmb3JtIiAicm90YXRlKDkwZGVnKSIgXQogICAgICAoTGlzdC5hcHBlbmQgKExpc3QubWFwIChcZmFuU2hhcGUgLT4gdmlld0ZhblNoYXBlIGZhblNoYXBlKSBmYW5TaGFwZXMpIFt2aWV3Um91bGV0dGVQb2ludGVyXSkKCnZpZXdGYW5TaGFwZSA6IEZhblNoYXBlIC0+IEh0bWwgTXNnCnZpZXdGYW5TaGFwZSBmYW5TaGFwZSA9CiAgbGV0CiAgICBzdHJva2VEYXNob2Zmc2V0XyA9IFN0cmluZy5mcm9tRmxvYXQgPHwgIC1mYW5TaGFwZS5vZmZzZXQgLS0gRmFuIHNoYXBlIGRpcmVjdGlvbiBpcyBvcHBvc2l0ZSB0byBTdmcuY2lyY2xlLCBiZWNvdXNlIG9mIHRoZSBzcGVjaWZpY2F0aW9uIG9mIGRhc3NBcnJheS4gU28gSSBuZWdhdCBmYW5zaGFwZS5vZmZzZXQuCiAgICBzdHJva2VEYXNoYXJyYXlfID0gU3RyaW5nLmZyb21GbG9hdCBmYW5TaGFwZS5wZXJjZW50YWdlICsrICIgIiArKyAoU3RyaW5nLmZyb21GbG9hdCA8fCAxMDAuMCAtIGZhblNoYXBlLnBlcmNlbnRhZ2UpCiAgaW4KICAgIGNpcmNsZQogICAgICBbIGN4ICIzMS44MzA5ODg2MTg0IiwgY3kgIjMxLjgzMDk4ODYxODQiLCByICIxNS45MTU0OTQzMDkyIgogICAgICAsIGZpbGwgIiNmZmZmZmYiLCBmaWxsT3BhY2l0eSAiMC4wIgogICAgICAsIHN0cm9rZSBmYW5TaGFwZS5jb2xvciwgc3Ryb2tlV2lkdGggIjMxLjgzMDk4ODYxODQiLCBzdHJva2VEYXNob2Zmc2V0IHN0cm9rZURhc2hvZmZzZXRfLCBzdHJva2VEYXNoYXJyYXkgc3Ryb2tlRGFzaGFycmF5XyBdCiAgICAgIFtdCgp2aWV3Um91bGV0dGVQb2ludGVyIDogSHRtbCBNc2cKdmlld1JvdWxldHRlUG9pbnRlciA9CiAgcG9seWdvbgogICAgWyBwb2ludHMgIjYzLjY2MTk3NzIzNjgsMjkuNTMwOTg4NjE4NCA2My42NjE5NzcyMzY4LDM0LjMzMDk4ODYxODQgNTcuNjYxOTc3MjM2OCwzMS44MzA5ODg2MTg0IgogICAgLCBzdHlsZSAiZmlsbCIgcm91bGV0dGVQb2ludGVyQ29sb3IKICAgIF0KICAgIFtdCmBgYAoKYHZpZXdSb3VsZXR0ZWDplqLmlbDjgafjga/jgIHjgb7jgZrlvJXmlbDjgafmuKHjgZXjgozjgZ9gY291bnRlcnNg44KEYHJvdGF0aW9uYCjjg6vjg7zjg6zjg4Pjg4jjga7lm57ou6Lop5JcWyVcXSkg44KS44KC44Go44Gr44GX44Gm5o+P55S744GZ44KL5omH5b2i44Gu5oOF5aCxYGZhblNoYXBlc2DjgpLnrpflh7rjgZnjgovjgIIgIArjgZ3jgozjgpLjgIHmiYflvaLjgpLmj4/nlLvjgZnjgotgdmlld0ZhblNoYXBlYOmWouaVsOOBq+mBqeeUqOOBmeOCi+OBk+OBqOOBp+WFqOOBpuOBruaJh+W9ouOCkuaPj+eUu+OBmeOCiyjjgaTjgb7jgorjg6vjg7zjg6zjg4Pjg4jjgYzmj4/nlLvjgZXjgozjgosp44CCICAK44G+44Gf44CB44Or44O844Os44OD44OI44Gu6Yed44KSYHZpZXdSb3VsZXR0ZVBvaW50ZXJg6Zai5pWw44Gn5o+P55S744GZ44KL44CCCgojIyMgMy4zIOODq+ODvOODrOODg+ODiOOBrumHneOBjOaMh+OBmeOCouOCpOODhuODoOOCkueJueWumuOBmeOCi+WHpueQhgoK5Lul5LiL44GuYHBvaW50ZWRDb3VudGVyX2DjgavjgIHph53jgYzmjIfjgZnjgqLjgqTjg4bjg6AoYENvdW50ZXJg5YCkKeOCkuioiOeul+OBl+ODkOOCpOODs+ODieOBl+OBpuOBhOOCi+OAgiAgCumAlOS4reOBp+eUqOOBhOOCi2BjYWxjdWxhdGVDb2xsaXNpb25SYW5nZXNg44GoYHdpbGxCZU5ld2x5UG9pbnRlZGDjga7plqLmlbDjgavjgaTjgYTjgabjgoLntprjgZHjgaboqqzmmI7jgZnjgovjgIIKCmBgYGVsbQp1cGRhdGUgOiBNc2cgLT4gTW9kZWwgLT4gKE1vZGVsLCBDbWQgTXNnKQp1cGRhdGUgbXNnIG1vZGVsID0KICBjYXNlIChtc2csIG1vZGVsLnNjZW5lKSBvZgotLSAo5Lit55WlKQogICAgKFNwaW5Sb3VsZXR0ZSBfLCBSb3VsZXR0ZVNwaW5uaW5nKSAtPgogICAgICBsZXQKICAgICAgICBwb2ludGVkQ291bnRlcl8gPQogICAgICAgICAgY2FsY3VsYXRlQ29sbGlzaW9uUmFuZ2VzIG1vZGVsLmNvdW50ZXJzIG1vZGVsLnJvdGF0aW9uCiAgICAgICAgICAgIHw+IExpc3QubWFwMiAoXGNvdW50ZXIgY29sbGlzaW9uUmFuZ2UgLT4gVHVwbGUucGFpciBjb3VudGVyIDx8IHdpbGxCZU5ld2x5UG9pbnRlZCBtb2RlbC5yb3RhdGlvblZlbG9jaXR5IGNvbGxpc2lvblJhbmdlKSBtb2RlbC5jb3VudGVycwogICAgICAgICAgICB8PiBMaXN0LmZpbHRlciAoXChjb3VudGVyLCB3aWxsQmVOZXdseVBvaW50ZWRfKSAtPiB3aWxsQmVOZXdseVBvaW50ZWRfKQogICAgICAgICAgICB8PiBMaXN0LmhlYWQKICAgICAgICAgICAgfD4gTWF5YmUud2l0aERlZmF1bHQgKG1vZGVsLnBvaW50ZWRDb3VudGVyLCBGYWxzZSkKICAgICAgICAgICAgfD4gVHVwbGUuZmlyc3QKLS0gKOS7peS4i+eVpSkKYGBgCgrjgZPjgZPjgadgY2FsY3VsYXRlQ29sbGlzaW9uUmFuZ2VzYOOBr+OAgeOBneOCjOOBnuOCjOOBruOCouOCpOODhuODoOOBjOODq+ODvOODrOODg+ODiOS4iuOBq+WNoOOCgeOCi+inkuW6puOBruevhOWbsijlp4vnq6/op5JcWyVcXeOAnOe1guerr+inklxbJVxdKeOCkuioiOeul+OBmeOCi+mWouaVsOOBp+OBguOCiuOAgeasoeOBruOCiOOBhuOBq+Wumue+qeOBleOCjOOCi+OAggoKYGBgZWxtCmNhbGN1bGF0ZUNvbGxpc2lvblJhbmdlcyA6IENvdW50ZXJzIC0+IEZsb2F0IC0+IExpc3QgUm90YXRpb25SYW5nZQpjYWxjdWxhdGVDb2xsaXNpb25SYW5nZXMgY291bnRlcnMgcm90YXRpb24gPQogIGxldAogICAgY291bnRzID0gTGlzdC5tYXAgKFxjb3VudGVyIC0+IHRvRmxvYXQgY291bnRlci5jb3VudCkgY291bnRlcnMKICAgIHRvdGFsID0gTGlzdC5zdW0gY291bnRzCiAgICBwZXJjZW50YWdlcyA9IExpc3QubWFwIChcY291bnQgLT4gMTAwLjAgKiBjb3VudCAvIHRvdGFsKSBjb3VudHMKICAgIG9mZnNldHMgPQogICAgICBMaXN0LmZvbGRsIChccGVyY2VudGFnZSBhY2MgLT4gTGlzdC5hcHBlbmQgYWNjIFsoTWF5YmUud2l0aERlZmF1bHQgMC4wIDx8IExpc3QubWF4aW11bSBhY2MpICsgcGVyY2VudGFnZV0pIFswLjBdIHBlcmNlbnRhZ2VzCiAgICAgICAgfD4gTGlzdC5tYXAgKCgrKSByb3RhdGlvbikKICBpbgogICAgTGlzdC5tYXAyIChccGVyY2VudGFnZSBvZmZzZXQgLT4gUm90YXRpb25SYW5nZSBvZmZzZXQgPHwgb2Zmc2V0ICsgcGVyY2VudGFnZSkgcGVyY2VudGFnZXMgb2Zmc2V0cwpgYGAKCmBsZXQgaW5g5Lit44Gn6KiI566X44GV44KM44Gm44GE44KLYG9mZnNldHNg44Gv5aeL56uv6KeSXFslXF3jga7jg6rjgrnjg4jjgafjgYLjgorjgIFgcGVyY2VudGFnZXNg44Gv44Or44O844Os44OD44OI5LiK44Gn5Y2g44KB44KL6KeS5bqm44Gu56+E5Zuy44Gu5aSn44GN44GVXFslXF3jga7jg6rjgrnjg4jjgafjgYLjgovjgIIgIArjgZPjgozjgonjgpLnlKjjgYTjgabmnIDlvozjga7ooYxgTGlzdC5tYXAyIChccGVyY2VudGFnZSBvZmZzZXQgLT4gUm90YXRpb25SYW5nZSBvZmZzZXQgPHwgb2Zmc2V0ICsgcGVyY2VudGFnZSkgcGVyY2VudGFnZXMgb2Zmc2V0c2DjgafjgIHjg6vjg7zjg6zjg4Pjg4jkuIrjgavljaDjgoHjgovop5Lluqbjga7nr4Tlm7LjgpLmsYLjgoHjgabjgYTjgovjgIIKCuasoeOBq2B3aWxsQmVOZXdseVBvaW50ZWRg44Gv44CB5Zue6Lui44GMMeOBpOWIhumAsuOCgOOBk+OBqOOBq+OCiOOBo+OBpuaMh+WumuOBruOCouOCpOODhuODoOOBjOaWsOOBn+OBq+ODq+ODvOODrOODg+ODiOOBrumHneOBp+aMh+OBleOCjOOCi+OCiOOBhuOBq+OBquOCi+OBi+OBqeOBhuOBi+OCkuioiOeul+OBmeOCi+mWouaVsOOBp+OBguOCiuOAgeS7peS4i+OBruOCiOOBhuOBq+Wumue+qeOBleOCjOOCi+OAgiAgCijjgZPjga7jgqLjg5fjg6rjgafjga/jgIHjg6vjg7zjg6zjg4Pjg4jjgYzlm57ou6LjgZfjgabjgYTjgovplpPjgIHph53jgYzmjIfjgZfjgabjgYTjgovjgqLjgqTjg4bjg6Djga7jg6njg5njg6vjgpLooajnpLrjgZfntprjgZHjgovjgojjgYbjgarku5Xmp5jjgavjgZfjgabjgYTjgovjgILph53jgYzmjIfjgZnjgqLjgqTjg4bjg6Djga/lm57ou6LjgYzpgLLjgoDjgYbjgaHjgavlpInljJbjgZnjgovjgZ/jgoHjgIHlm57ou6LjgZnjgovmr47jgavoqr/jgbnjgovjgojjgYbjgavlrp/oo4XjgZfjgabjgYTjgovjgILntZDmnpzjgpLnn6XjgovjgaDjgZHjgafjgYLjgozjgbDjg6vjg7zjg6zjg4Pjg4jlgZzmraLmmYLjgavoqr/jgbnjgozjgbDmuIjjgoDjga7jgaDjgYzjgIHku4rlm57jga/jgZ3jgozjgafjga/kuI3ljYHliIbjgarjga7jgaDjgILvvIkKCmBgYGVsbQp3aWxsQmVOZXdseVBvaW50ZWQgOiBGbG9hdCAtPiBSb3RhdGlvblJhbmdlIC0+IEJvb2wKd2lsbEJlTmV3bHlQb2ludGVkIHJvdGF0aW9uVmVsb2NpdHkgY29sbGlzaW9uUmFuZ2UgID0KICBpZiBjYXJyeURvd25VbmRlciAyMDAuMCAxMDAuMCAoY29sbGlzaW9uUmFuZ2UubWF4ICsgcm90YXRpb25WZWxvY2l0eSkgPiAxMDAuMAogICAgJiYgY2FycnlEb3duVW5kZXIgMjAwLjAgMTAwLjAgKGNvbGxpc2lvblJhbmdlLm1pbiArIHJvdGF0aW9uVmVsb2NpdHkpIDw9IDEwMAogIHRoZW4KICAgIFRydWUKICBlbHNlCiAgICBGYWxzZQoKY2FycnlEb3duVW5kZXIgOiBGbG9hdCAtPiBGbG9hdCAtPiBGbG9hdCAtPiBGbG9hdApjYXJyeURvd25VbmRlciBtYXhpbXVtIGRlY3JlbWVudFN0ZXAgdmFsdWUgPQogIGlmIHZhbHVlIDwgbWF4aW11bSB0aGVuCiAgICB2YWx1ZQogIGVsc2UKICAgIGNhcnJ5RG93blVuZGVyIHZhbHVlIGRlY3JlbWVudFN0ZXAgPHwgdmFsdWUgLSBkZWNyZW1lbnRTdGVwCmBgYAoKYHdpbGxCZU5ld2x5UG9pbnRlZGDplqLmlbDlhoXjga7jgb/jgavjgYrjgYTjgabjga/jgIHjg6vjg7zjg6zjg4Pjg4jkuIrjgafjga7jgqLjgqTjg4bjg6Djga7lp4vnq6/op5Iv57WC56uv6KeS44KSMFxbJVxd44CcMjAwXFslXF3jgafooajjgZfjgabjgYTjgovjgIIo5LuW44Gu566H5omA44Gn44GvMFxbJVxd44CcMTAwXFslXF3jgafooajnj77jgZfjgabjgYTjgovjgIIpICAK44GT44Gu44Go44GN44CB44Or44O844Os44OD44OI44Gu5Zue6Lui44GM6YCy44KA44GT44Go44Gr44KI44Gj44Gm5paw44Gf44Gr6Yed44Gr5oyH44GV44KM44KL44KI44GG44Gr44Gq44KL44Ki44Kk44OG44Og44Gv5qyh44GuNOOBpOOBruadoeS7tuOCkuOBmeOBueOBpua6gOOBn+OBmeOAggoKMS4g5Zue6Lui44GM6YCy44KA5YmN44Gu44CB5aeL56uv6KeS44GMMTAwXFslXF3ku6XkuIvjgafjgYLjgosKMi4g5Zue6Lui44GM6YCy44KA5YmN44Gu44CB57WC56uv6KeS44GMMTAwXFslXF3ku6XkuIvjgafjgYLjgosKMy4g5Zue6Lui44GM6YCy44KT44Gg5b6M44Gu44CB5aeL56uv6KeS44GMMTAwXFslXF3ku6XkuIvjgafjgYLjgosKNC4g5Zue6Lui44GM6YCy44KT44Gg5b6M44Gu44CB57WC56uv6KeS44GMMTAwXFslXF3jgojjgorlpKfjgY3jgYQKCuOBk+OBk+OBp+OAgeadoeS7tjHjgagy44Gv5bi444Gr5oiQ44KK56uL44Gk44Gu44Gn44CB44KP44GW44KP44GW6ICD5oWu44GX44Gq44GP44Gm44KI44GE44CCKOOBquOBnOOBquOCieOAgeOAjOS7luOBrueuh+aJgOOBp+OBrzBcWyVcXeOAnDEwMFxbJVxd44Gn6KGo54++44GX44Gm44GE44KL44CN44Go44GE44GG5YmN5o+Q44Gu44Gf44KB44CC5Zue6Lui44GM6YCy44KA5YmN44Gu5aeL56uv6KeSL+e1guerr+inkuOBr+OAgeOAjOS7luOBrueuh+aJgOOAjeOBi+OCiea4oeOBleOCjOOCi+WApOOAgikgIArjgojjgaPjgaZgd2lsbEJlTmV3bHlQb2ludGVkYOmWouaVsOOBr+OAgeadoeS7tjPjgag044KS5rqA44Gf44GZ44KI44GG44Gq44Ki44Kk44OG44OgKGBjb3VudGVyYCnjgavlr77jgZfjgabjga9gVHJ1ZWDjgpLov5TjgZfjgIHjgZ3jgYbjgafjgarjgYTjgoLjga7jgavjga9gRmFsc2Vg44KS6L+U44GZ44CCCgrjgaHjgarjgb/jgavjgIHjg5jjg6vjg5Hjg7zplqLmlbDjga5gY2FycnlEb3duVW5kZXJg44Gv44CB5Zue6Lui6KeS44GMMTAwXFslXF3ku6XkuIrpgLLjgoDjgojjgYbjgarloLTlkIjjgafjgoLlp4vnq6/op5Iv57WC56uv6KeS44KSMFxbJVxd44CcMjAwXFslXF3jga7nr4Tlm7Ljgavlj47jgoHjgovjgZ/jgoHjgavnlKjjgYTjgovjgIIKCiMjIyAzLjQg44Or44O844Os44OD44OI44Gu5YGc5q2i566H5omA44KS44Op44Oz44OA44OgIG9yIOOCpOODs+ODgeOCreOBp+axuuWumuOBmeOCi+WHpueQhgoKIVtjaGVhdF0oL2ltYWdlcy90ZWNoLWJsb2cvMjAxOC11bmZhaXItcm91bGV0dGUtdGVjaG5vbG9neS9jaGVhdGluZy5hdmlmKQoK44Kk44Oz44OB44Kt44Gn44Or44O844Os44OD44OI44Gu5YGc5q2i566H5omA44KS5rG65a6a44GZ44KL44Gr44Gv44CB44Op44OZ44Or44Gu5bem6Zqj44Gr44GC44KL5Zub6KeS5b2i44KS44Kv44Oq44OD44Kv44GZ44KL44CCICAK44GT44KM44Gr44KI44KKYENoZWF0YOODoeODg+OCu+ODvOOCuOOBjOmAgeOCieOCjOOAgeS7peS4i+OBq+ekuuOBmeOCs+ODvOODieOBp2BDaGVhdGDjg6Hjg4Pjgrvjg7zjgrjjgpLlh6bnkIbjgZnjgovjgZPjgajjgafjgIHjg6vjg7zjg6zjg4Pjg4jjgpLlgZzmraLjgZXjgZvjgovlm57ou6Lop5Ljga7nr4Tlm7JgbW9kZWwuY2hlYXRlZEdvYWxSYW5nZSBg44KS44CB44Kv44Oq44OD44Kv44GX44Gf44Ki44Kk44OG44Og56+E5Zuy44Gr6Kit5a6a44GZ44KL44CCCgpgYGBlbG0KdXBkYXRlIDogTXNnIC0+IE1vZGVsIC0+IChNb2RlbCwgQ21kIE1zZykKdXBkYXRlIG1zZyBtb2RlbCA9CiAgY2FzZSAobXNnLCBtb2RlbC5zY2VuZSkgb2YKLS0gKOS4reeVpSkKICAgIChDaGVhdCBjb3VudGVyLCBFZGl0aW5nUm91bGV0dGUpIC0+CiAgICAgIGxldAogICAgICAgIGNoZWF0ZWRHb2FsUmFuZ2VfID0KICAgICAgICAgIGlmIGNvdW50ZXIuY291bnQgPiAwIHRoZW4KICAgICAgICAgICAgY2FsY3VsYXRlQ29sbGlzaW9uUmFuZ2VzIG1vZGVsLmNvdW50ZXJzIDAuMAogICAgICAgICAgICAgIHw+IExpc3QudGFrZSBjb3VudGVyLmlkCiAgICAgICAgICAgICAgfD4gTGlzdC5yZXZlcnNlCiAgICAgICAgICAgICAgfD4gTGlzdC5oZWFkCiAgICAgICAgICAgICAgfD4gTWF5YmUuYW5kVGhlbiAoXG1heWJlUmFuZ2UgLT4gSnVzdCA8fCBSYW5nZSAoMTAwLjAgLSBtYXliZVJhbmdlLm1heCkgKDEwMC4wIC0gbWF5YmVSYW5nZS5taW4pKQogICAgICAgICAgZWxzZQogICAgICAgICAgICBOb3RoaW5nCiAgICAgIGluCiAgICAgICAgKHttb2RlbCB8IGNoZWF0ZWRHb2FsUmFuZ2UgPSBjaGVhdGVkR29hbFJhbmdlX30sIENtZC5ub25lKQpgYGAKCuOBk+OBruW+jOOAjFN0YXJ044CN44Oc44K/44Oz44GM44Kv44Oq44OD44Kv44GV44KM44KL44GoYE9uQ2xpY2tTdGFydGDjg6Hjg4Pjgrvjg7zjgrjjgYzpgIHjgonjgozjgIHku6XkuIvjga7jgrPjg7zjg4njgavnpLrjgZnjgojjgYbjgavjgIHlgZzmraLjgZXjgZvjgovlm57ou6Lop5Ljga7nr4Tlm7Io5YWI56iL44Kk44Oz44OB44Kt44Gn5rG644KB44Gf5YCkKeWGheOBp+WBnOatouinkuOCkuODqeODs+ODgOODoOOBq+axuuWumuOBmeOCi+OAgiAgCuOBk+OBruOBqOOBjeOAgeOCguOBl+OCguOCpOODs+ODgeOCreOBjOOBleOCjOOBpuOBhOOBquOBhOOBquOCieOBsOOAgTBcWyVcXeOAnDEwMFxbJVxd44Gu56+E5ZuyKOOCs+ODvOODieS4reOBrmBmYWlyR29hbFJhbmdlYCnlhoXjgafjg6njg7Pjg4Djg6DjgavlgZzmraLop5LjgpLmsbrlrprjgZnjgoso44Gk44G+44KK44CB44OV44Kn44KiKeOAggoK44GT44KM44Gr44KI44KK5rG65a6a44GX44Gf5YGc5q2i6KeS44KSYFN0YXJ0U3Bpbm5pbmdSb3VsZXR0ZWDjg6Hjg4Pjgrvjg7zjgrjjgafpgIHjgorjgIHjg6vjg7zjg6zjg4Pjg4jjga7lm57ou6LjgYzplovlp4vjgZXjgozjgovjgIIKCmBgYGVsbQp1cGRhdGUgOiBNc2cgLT4gTW9kZWwgLT4gKE1vZGVsLCBDbWQgTXNnKQp1cGRhdGUgbXNnIG1vZGVsID0KICBjYXNlIChtc2csIG1vZGVsLnNjZW5lKSBvZgotLSAo5Lit55WlKQogICAgKE9uQ2xpY2tTdGFydCwgRWRpdGluZ1JvdWxldHRlKSAtPgogICAgICBsZXQKICAgICAgICBnb2FsUmFuZ2UgPQogICAgICAgICAgTWF5YmUud2l0aERlZmF1bHQgZmFpckdvYWxSYW5nZSBtb2RlbC5jaGVhdGVkR29hbFJhbmdlCiAgICAgIGluCiAgICAgICAgKG1vZGVsLCBSYW5kb20uZ2VuZXJhdGUgKFN0YXJ0U3Bpbm5pbmdSb3VsZXR0ZSBpbml0aWFsRGVjYXlSYXRlKSA8fCBSYW5kb20ucGFpciAoUmFuZG9tLmZsb2F0IGluaXRpYWxWZWxvY2l0eVJhbmdlLm1pbiBpbml0aWFsVmVsb2NpdHlSYW5nZS5tYXgpIChSYW5kb20uZmxvYXQgZ29hbFJhbmdlLm1pbiBnb2FsUmFuZ2UubWF4KSkKCiAgICAoU3RhcnRTcGlubmluZ1JvdWxldHRlIGRlY2F5UmF0ZV8gKGluaXRpYWxWZWxvY2l0eSwgZ29hbCksIEVkaXRpbmdSb3VsZXR0ZSkgLT4KICAgICAgaWYgaXNUaGVyZUVub2d0aENvdW50ZXJzVG9TdGFydCBtb2RlbC5jb3VudGVycyB0aGVuCiAgICAgICAgKHsgbW9kZWwgfCBzY2VuZSA9IFJvdWxldHRlU3Bpbm5pbmcsIGRlY2F5UmF0ZSA9IGRlY2F5UmF0ZV8scm90YXRpb25WZWxvY2l0eSA9IGluaXRpYWxWZWxvY2l0eSwgZ29hbFJvdGF0aW9uID0gZ29hbCB9LCBDbWQubm9uZSkKICAgICAgZWxzZQogICAgICAgIChtb2RlbCwgQ21kLm5vbmUpCi0tICjku6XkuIvnlaUpCgoKLS0g44OY44Or44OR44O86Zai5pWwOiDjg6vjg7zjg6zjg4Pjg4jjgpLplovlp4vjgZnjgovjgZ/jgoHjga7mnIDkvY7pmZDjga7lgIvmlbDjga7jgqLjgqTjg4bjg6DjgYzoqK3lrprmuIjjgb/jgYvjganjgYbjgYvjgpLjg4Hjgqfjg4Pjgq/jgZnjgosKaXNUaGVyZUVub2d0aENvdW50ZXJzVG9TdGFydCA6IENvdW50ZXJzIC0+IEJvb2wKaXNUaGVyZUVub2d0aENvdW50ZXJzVG9TdGFydCBjb3VudGVycyA9CiAgY291bnRlcnMKICAgIHw+IExpc3QuZmlsdGVyIChcY291bnRlciAtPiBjb3VudGVyLmNvdW50ID4gMCkKICAgIHw+IExpc3QubGVuZ3RoCiAgICB8PiAoPCkgMQpgYGAKCuOBoeOBquOBv+OBq+OAgeODq+ODvOODrOODg+ODiOOBruWbnui7ouOBryDjgrXjg5bjgrnjgq/jg6rjg5fjgrfjg6fjg7Mg44Gr44KI44KK5a6a5pyf55qE44Gr44Gq44GV44KM44KL44CCCgpgYGBlbG0Kc3Vic2NyaXB0aW9ucyA6IE1vZGVsIC0+IFN1YiBNc2cKc3Vic2NyaXB0aW9ucyBtb2RlbCA9CiAgY2FzZSBtb2RlbC5zY2VuZSBvZgogICAgUm91bGV0dGVTcGlubmluZyAtPgogICAgICBUaW1lLmV2ZXJ5IDMwIFNwaW5Sb3VsZXR0ZQogICAgUm91bGV0dGVTcGlubmluZ1Rvd2FyZHNTdG9wIC0+CiAgICAgIFRpbWUuZXZlcnkgMzAgU3BpblJvdWxldHRlCiAgICBfIC0+CiAgICAgIFN1Yi5ub25lCmBgYAoKIyMjIDMuNSDjg6vjg7zjg6zjg4Pjg4jjgpLkuojlrprjgZXjgozjgZ/lgZzmraLop5LjgaflgZzmraLjgZXjgZvjgovlh6bnkIYKCuODq+ODvOODrOODg+ODiOOBruWbnui7ouOCkumAsuOCgeOCi2BTcGluUm91bGV0dGVg44Oh44OD44K744O844K444KSYHVwZGF0ZWDplqLmlbDlhoXjgaflh6bnkIbjgZnjgovpmpvjgIEgIArjg6vjg7zjg6zjg4Pjg4jjga7op5LliqDpgJ/luqbjgYzplr7lgKTjgpLliJ3jgoHjgabkuIvlm57jgovjgojjgYbjgarloLTlkIjjgavjgIHmuJvoobDkv4LmlbBgbW9kZWwuZGVjYXlSYXRlYOOCkuiqv+aVtOOBmeOCi+OBn+OCgeOBrmBBZGp1c3REZWNheVJhdGVGb3JTbW9vdGhTdG9wYOODoeODg+OCu+ODvOOCuOOCkumAgeS/oeOBmeOCiyAo44Kz44O844OJ5o6y6LyJ44Gv55yB55WlKeOAggoK44GT44KM44Gr44KI44KK5rib6KGw5L+C5pWw44KSMeOBq+i/keOBpeOBkeOAgeODq+ODvOODrOODg+ODiOOBruWbnui7ouOBjOmrmOOAheOBguOBqDHlkajjgaDjgZHjgobjgaPjgY/jgorjgajntprjgY/jgojjgYbjgavjgZnjgovjgIIgIArjgZPjga7jgajjgY3jga5gU3BpblJvdWxldHRlYOODoeODg+OCu+ODvOOCuOOBruWHpueQhuS4reOBp+OAgWB3aWxsUmVhY2hHb2FsYOmWouaVsOOBq+OCiOOCiuODq+ODvOODrOODg+ODiOOBjOWBnOatouinkuOBq+mBlOOBmeOCi+OBi+OBqeOBhuOBi+OCkuiqv+OBueOAgemBlOOBmeOCi+OCiOOBhuOBp+OBguOCjOOBsOODq+ODvOODrOODg+ODiOOBruWbnui7ouOCkuWBnOatouOBmeOCi+OAggoKYGBgZWxtCnVwZGF0ZSA6IE1zZyAtPiBNb2RlbCAtPiAoTW9kZWwsIENtZCBNc2cpCnVwZGF0ZSBtc2cgbW9kZWwgPQogIGNhc2UgKG1zZywgbW9kZWwuc2NlbmUpIG9mCi0tICjkuK3nlaUpCiAgICAoQWRqdXN0RGVjYXlSYXRlRm9yU21vb3RoU3RvcCBkZWNheVJhdGVfLCBSb3VsZXR0ZVNwaW5uaW5nKSAtPgogICAgICAoeyBtb2RlbCB8IGRlY2F5UmF0ZSA9IGRlY2F5UmF0ZV8sIHNjZW5lID0gUm91bGV0dGVTcGlubmluZ1Rvd2FyZHNTdG9wIH0sIENtZC5ub25lKQoKICAgIChTcGluUm91bGV0dGUgXywgUm91bGV0dGVTcGlubmluZ1Rvd2FyZHNTdG9wKSAtPgogICAgICBsZXQKICAgICAgICBwb2ludGVkQ291bnRlcl8gPQogICAgICAgICAgY2FsY3VsYXRlQ29sbGlzaW9uUmFuZ2VzIG1vZGVsLmNvdW50ZXJzIG1vZGVsLnJvdGF0aW9uCiAgICAgICAgICAgIHw+IExpc3QubWFwMiAoXGNvdW50ZXIgY29sbGlzaW9uUmFuZ2UgLT4gVHVwbGUucGFpciBjb3VudGVyIDx8IHdpbGxCZU5ld2x5UG9pbnRlZCBtb2RlbC5yb3RhdGlvblZlbG9jaXR5IGNvbGxpc2lvblJhbmdlKSBtb2RlbC5jb3VudGVycwogICAgICAgICAgICB8PiBMaXN0LmZpbHRlciAoXChjb3VudGVyLCB3aWxsQmVOZXdseVBvaW50ZWRfKSAtPiB3aWxsQmVOZXdseVBvaW50ZWRfKQogICAgICAgICAgICB8PiBMaXN0LmhlYWQKICAgICAgICAgICAgfD4gTWF5YmUud2l0aERlZmF1bHQgKG1vZGVsLnBvaW50ZWRDb3VudGVyLCBGYWxzZSkKICAgICAgICAgICAgfD4gVHVwbGUuZmlyc3QKICAgICAgICAocm90YXRpb25fLCByb3RhdGlvblZlbG9jaXR5XykgPSB1cGRhdGVSb3RhdGlvbiBtb2RlbC5yb3RhdGlvbiBtb2RlbC5yb3RhdGlvblZlbG9jaXR5IG1vZGVsLmRlY2F5UmF0ZQogICAgICBpbgogICAgICAgIGlmIHdpbGxSZWFjaEdvYWwgbW9kZWwuZ29hbFJvdGF0aW9uIG1vZGVsLnJvdGF0aW9uIG1vZGVsLnJvdGF0aW9uVmVsb2NpdHkgdGhlbgogICAgICAgICAgdXBkYXRlIChTdG9wUm91bGV0dGUgbWlsbGlTZWNvbmRzVG9LZWVwUm91bGV0dGVTdG9wVW50aWxSZXN1bHQpIG1vZGVsCiAgICAgICAgZWxzZQogICAgICAgICAgKHsgbW9kZWwgfCByb3RhdGlvbiA9IHJvdGF0aW9uXywgcm90YXRpb25WZWxvY2l0eSA9IHJvdGF0aW9uVmVsb2NpdHlfLCBwb2ludGVkQ291bnRlciA9IHBvaW50ZWRDb3VudGVyX30sIENtZC5ub25lKQoKICAgIChTdG9wUm91bGV0dGUgZm9yTWlsbGlTZWNvbmRzLCBSb3VsZXR0ZVNwaW5uaW5nVG93YXJkc1N0b3ApIC0+CiAgICAgICh7IG1vZGVsIHwgc2NlbmUgPSBSb3VsZXR0ZVN0b3BwZWR9LCBQcm9jZXNzLnNsZWVwIGZvck1pbGxpU2Vjb25kcyB8PiBUYXNrLnBlcmZvcm0gKGFsd2F5cyBTaG93UmVzdWx0KSkKLS0gKOS7peS4i+eVpSkKCgotLSDjg5jjg6vjg5Hjg7zplqLmlbA6IOWbnui7ouOBjO+8keOBpOmAsuOCgOOBk+OBqOOBp+S6iOWumuOBruWBnOatouinkuOBq+mBlOOBmeOCi+OBi+OBqeOBhuOBi+OCkuiqv+OBueOCiwp3aWxsUmVhY2hHb2FsIDogRmxvYXQgLT4gRmxvYXQgLT4gRmxvYXQgLT4gQm9vbAp3aWxsUmVhY2hHb2FsIGdvYWwgcm90YXRpb24gdmVsb2NpdHkgPQogIGlmIHJvdGF0aW9uIDwgZ29hbCAmJiBnb2FsIDw9IHJvdGF0aW9uICsgdmVsb2NpdHkgdGhlbgogICAgVHJ1ZQogIGVsc2UKICAgIEZhbHNlCmBgYAoKIyMgNC4g44KC44GX5L2c44KK55u044GZ44Gq44KJLi4uCgrjgZPjga7oqJjkuovjga7mrovjgorjgafjga/jgIHlh7rmnaXmoITjgYjjgavlr77jgZnjgovkuI3muoDngrnjgIHplovnmbrjgpLmjK/jgorov5TjgaPjgabjga7lj43nnIHngrnjgpLov7DjgbnjgabjgYTjgY/jgIIgIArmnKrmnaXjga7oh6rliIbjgojjgIHmsJfjgYzlkJHjgYTjgZ/jgonjgZPjgozjgpLlhYPjgavkv67mraPjgZfjgabjgY/jgozjgIIKCiMjIyA0LjEg44K544Oe44O844OI44OV44Kp44Oz44Gn5L2/44GE44KE44GZ44GE44OH44K244Kk44Oz44Gr44GZ44KLCgrjgZPjga7jgqLjg5fjg6rjga9QQ+OCiOOCiuOCguOCueODnuODvOODiOODleOCqeODs+OBp+WIqeeUqOOBmeOCi+OCt+ODvOODs+OBjOODoeOCpOODs+OBq+OBquOCi+OBqOS6iOaDs+OBleOCjOOCi+OAggoK44GX44GL44GX6ZaL55m65b2T5pmC44GvUEPjgafjg6zjgqTjgqLjgqbjg4jjgpLnorroqo3jgZfjgarjgYzjgonjgrPjg7zjg4fjgqPjg7PjgrDjgpLpgLLjgoHjgabjgZfjgb7jgYTjgIHjgrnjg57jg7zjg4jjg5Xjgqnjg7Pjgafnorroqo3jgZfjgZ/jga7jga/plovnmbrjgYzkuIDpgJrjgorntYLjgo/jgaPjgZ/poIPjgavjgarjgaPjgabjgZfjgb7jgaPjgZ/jgIIKCuOCueOCr+ODquODvOODs+OCt+ODp+ODg+ODiOOCkuimi+OCjOOBsOOCj+OBi+OCi+OCiOOBhuOBq+OAgeOCueODnuODvOODiOODleOCqeODs+OBp+OBr+Wwj+OBleOBj+ihqOekuuOBleOCjOOBpuOBl+OBvuOBhOaTjeS9nOOBl+OBpeOCieOBhOOAggoK6ZaL55m657WC55uk44Gn44Os44K544Od44Oz44K344OW44Gr44GX44KI44GG44Go6Kmm44G/44Gf44GM44CB5oCd44GG44KI44GG44Gq44Os44Kk44Ki44Km44OI44Gr44Gq44KJ44Ga5pat5b+144GX44Gm44GX44G+44Gj44Gf44CCICAK44KA44GX44KNUEPjga/liIfjgormjajjgabjgabjgIHlrozlhajjgavjg6Ljg5DjgqTjg6vnlKjjgavjgZfjgabjgZfjgb7jgYbjga7jgafjgoLoia/jgYvjgaPjgZ/jgajmgJ3jgYbjgIIKCiYjeDFmNDQ3O1BD55S76Z2i44Gn44Gu6KGo56S6CiFbd2l0aC1wY10oL2ltYWdlcy90ZWNoLWJsb2cvMjAxOC11bmZhaXItcm91bGV0dGUtdGVjaG5vbG9neS93aXRoLXBjLmF2aWYpCgomI3gxZjQ0Nzvjgrnjg57jg7zjg4jjg5Xjgqnjg7Pjgafjga7ooajnpLoKIVt3aXRoLW1vYmlsZV0oL2ltYWdlcy90ZWNoLWJsb2cvMjAxOC11bmZhaXItcm91bGV0dGUtdGVjaG5vbG9neS93aXRoLW1vYmlsZS5hdmlmKQoKIyMjIDQuMiDoo4/mioDnmoTjgarjgrPjg7zjg4njgojjgorjgoLnjovpgZPnmoTjgarjgrPjg7zjg4njgafmm7jjgY8KCuaXouOBq+i/sOOBueOBn+OCiOOBhuOBq+OAgeODq+ODvOODrOODg+ODiOOBruaPj+eUu++8iOOBqOOBhOOBhuOCiOOCiuOCguOAgeaJh+W9ouOBruaPj+eUu++8ieOBq+OBr+OBk+OBoeOCieOBruiomOS6i+OBruaWueazleOCkueUqOOBhOOBn+OAgiAgCltcW0VsbVxdIFNWR+OBp+WGhuOCsOODqeODleOCkuihqOekuuOBmeOCi+aWueazlV0oaHR0cHM6Ly9oYWhuYWguZ2l0aHViLmlvL3RlY2gtYmxvZy8yMDE4LWVsbS1zdmctcGllY2hhcnQvKQoK44GT44Gu5pa55rOV44Gn44Gv5pmC6KiI5Zue44KK44Gr5omH5b2i44KS5Lim44G544KL44GT44Go44Gn5YaG44Kw44Op44OV44KS5L2c44KL44GT44Go44Gr44Gq44KL44CCICAK56eB44Gv44Kz44O844OJ44KS44Gq44KL44G544GP44K344Oz44OX44Or44Gr44GZ44KL44Gf44KB44Gr44Gv5Y+N5pmC6KiI5Zue44KK44Gr5omH5b2i44KS5Lim44G544KL44G544GN44Go6ICD44GI44Gm44GE44Gf44GM44CBICAK44GT44Gu5pa55rOV44KS5L2/44GE44Gk44Gk44KC5Y+N5pmC6KiI5Zue44KK44Gr5Lim44G544KI44GG44Go44GZ44KL44Go44CB44GG44G+44GP6KGo56S644GV44KM44Gq44GL44Gj44Gf44CCICAKKOOCquODleOCu+ODg+ODiOOChOaPj+eUu+mghuOBquOBqeOCkuazpeiHreOBj+iqv+aVtOOBmeOCjOOBsOS4iuaJi+OBj+OBhOOBo+OBn+OBi+OCguOBl+OCjOOBquOBhOOBjC4uLikKClNWR+OBp+aPj+eUu+OBmeOCi+mam+OBruinkuW6puOBq+OBpOOBhOOBpuOBr+WPjeaZguioiOWbnuOCiuOBjOato+OBruWbnui7ouaWueWQkeOBquOBruOBoOOBjOOAgeaZguioiOWbnuOCiuOBruaWueWQkeOBq+aJh+W9ouOCkuS4puOBueOBpuOBl+OBvuOBo+OBn+OBk+OBqOOBp+WQkeOBjeOBruS4jeS4gOiHtOOBjOi1t+OBk+OBo+OBn+OAguOBk+OBruOBn+OCgeaJgOOAheOBq+e0sOOBi+OBquiqv+aVtOOBjOW/heimgeOBq+OBquOCiuOAgeOCs+ODvOODieOBjOiLpeW5sueQhuino+OBl+OBpeOCieOBj+OBquOBo+OBpuOBl+OBvuOBo+OBn+OBl+OAgeOCs+ODvOODh+OCo+ODs+OCsOOBrumam+OBq+engeiHqui6q+OBjOa3t+S5seOBl+OBn+OAggoKIyMjIDQuMyDjg6vjg7zjg6zjg4Pjg4jjgYzoh6rnhLbjgarmraLjgb7jgormlrnjgpLjgZnjgovjgojjgYbjgarjg63jgrjjg4Pjgq/jgavjgZnjgosKCuOBk+OBruODq+ODvOODrOODg+ODiOOCouODl+ODquOBr+S6iOWumuOBleOCjOOBn+WBnOatouinkuOBp+WBnOatouOBmeOCi+OCiOOBhuOBq+e1guebpOOBp+inkumAn+W6puOBrua4m+ihsOS/guaVsOOBruiqv+aVtOOCkuihjOOBhuOBjOOAgeOBk+OBruOBn+OCgeOBq+atouOBvuOCiuaWueOBjOS4jeiHqueEtuOBq+imi+OBiOOBpuOBl+OBvuOBhuOBk+OBqOOBjOOBguOCi+OAgiAgCijmnIDlvozjgavjgZfjgbbjgajjgY/lm57ou6LjgZfntprjgZHjgovjgIIpCgrjgZPjgozjgpLop6PmsbrjgZnjgovkuIDmoYjjgajjgZfjgabjgIHoqr/mlbTjgpLmnIDlvozjgavooYzjgYbjga7jgafjga/jgarjgY/plovlp4vnm7TlvozjgavooYzjgYbmlrnms5XjgYzjgYLjgovjgIIgIArjgb7jgZrjgIHjg6vjg7zjg6zjg4Pjg4jjga7liJ3pgJ/luqbjgajmuJvoobDkv4LmlbDjgojjgoroqr/mlbTjgpLkuIDliIfooYzjgo/jgarjgYTloLTlkIjjga7lgZzmraLop5LjgpLmsYLjgoHjgIHnm67nmoTjgajjgZfjgabjgYTjgovlgZzmraLop5Ljgajjga7lt67liIbjgpLnrpflh7rjgZnjgovjgIIgIArlm57ou6Lplovlp4vnm7Tlvozjga7vvJHlm57nm67jga7lm57ou6LpgLLjgb/jgafjgIHlm57ou6Lop5LjgYzkuIHluqbnrpflh7rjgZfjgZ/lt67liIbjga7lgKTjgavjgarjgovjgojjgYbjgavlm57ou6LjgZXjgZvjgovjgIIgIAooMeWbnuebruOBruWbnui7oumAsuOBv+OBq+mZkOOCieOBmuOAgeeul+WHuuOBl+OBn+W3ruWIhuOBqOWbnui7ouWInemAn+W6puOBruWkp+Wwj+mWouS/guOBrueoi+W6puOBq+OCiOOBo+OBpuOBr+OAgeaVsOWbnuebruOBqOOBl+OBpuOCguiJr+OBhOOBqOaAneOBhuOAgikgIArjgZ3jgZPjgYvjgonlhYjjga/muJvoobDkv4LmlbDjgpLmnKzmnaXjga7lgKTjgavjgZfjgablm57ou6LjgpLpgLLjgoHjgovjgIIgIArjgZnjgovjgajnm67nmoTjgajjgZfjgabjgYTjgovlgZzmraLop5LjgaflgZzmraLjgZfjgIHlgZzmraLjga7ku5XmlrnjgoLoh6rnhLbjgarjgoLjga7jgajjgarjgovjgIIKCuOBl+OBi+OBl+S7iuW6puOBr+ODq+ODvOODrOODg+ODiOWbnui7oumWi+Wni+ebtOW+jOOBruWbnui7ouOBruS7leaWueOBq+mBleWSjOaEn+OBjOWHuuOCi+OBruOBp+OBr+OBquOBhOOBi++8n+OAgOOBqOeWkeWVj+OBq+aAneOBhuOBi+OCguOBl+OCjOOBquOBhOOBjOOAgSAgCuWbnui7oumWi+Wni+OBi+OCieOBl+OBsOOCieOBj+OBr+inkumAn+W6puOBjOWkp+OBjeOBj+OAgeOBvuOBn+inkumAn+W6puOBjOiqv+aVtOOBleOCjOOCi+aZgumWk+OBr+mdnuW4uOOBq+efreOBhCjmlbDljYHjg5/jg6rjgJzmlbDnmb7jg5/jg6rnp5Ip44Gu44Gn44G744G86YGV5ZKM5oSf44Gv44Gq44GE44Go5oCd44KP44KM44KL44CCCgIBRC9pbWFnZXMvYXV0aG9ycy9uYXRzdWtpLWhhcmFpLmF2aWb8VaQKIyMg56eB44Gv6KqwPwoK5Y6f5LqVIOWkj+aouSAo44Gv44KJ44GEIOOBquOBpOOBjSkg44Go44GE44GE44G+44GZ44CCICAK6Iux6Kqe6KGo6KiY44Gn44GvIE5hdHN1a2kgSGFyYWkg44Gn44GZ44CCCgoxOTkx5bm0OOaciDI05pel55Sf44G+44KM44Gu55S35oCn44Gn44GZ44CCCgojIyMg44OL44OD44Kv44ON44O844OgCgrjgqjjg7Pjgrjjg4vjgqLnlYzpmojjgoTjgrLjg7zjg6DnlYzpmojjgafjga8gIkhhaG5haCIg44Go5ZCN5LmX44Gj44Gm44GE44G+44GZ44CCICAK44GT44KM44GvICLjga/jg7zjgarjg7wiIOOBqOiqreOBv+OBvuOBmeOAguacrOWQjeOBrumgreaWh+Wtl+OAjOOBr+OAjeOBqOOAjOOBquOAjeOCkue5i+OBjuWQiOOCj+OBm+OBn+OCguOBruOBp+OBmeOAgiAgCuOBk+OBruOCteOCpOODiOOBruOCouOCpOOCs+ODs+OBq+OBquOBo+OBpuOBhOOCi+m7kueMq+OBr+OAgUhhaG5haCDjgajjgZfjgabjga7jgqLjg5Djgr/jg7zjgafjgZnjgIIKCiFbSGFobmFoIEF2YXRhcl0oL2ltYWdlcy9hYm91dC9oYWhuYWgtYXZhdGFyLmF2aWYpCgrjgb7jgZ/jgIHlrabnlJ/mmYLku6Pjga7lj4vkurrjgYvjgonjga8gIuOBquOBo+OBoeOCg+OCkyIg44Go5ZG844Gw44KM44Gf44KK44CBICAK56S+5Lya5Lq644Gr44Gq44Gj44Gm44GL44KJ44GvICLjg4rjg4Pjg4QiIOOBqOWRvOOBsOOCjOOCi+OBk+OBqOOBjOWkmuOBhOOBp+OBmeOAggoKIyMgSGFobmFoIENob3JvbmljbGUg44Go44GvPwoKSGFobmFoIENocm9uaWNsZSDjgajjga/jgIFIYWhuYWggKOWOn+S6lSDlpI/mqLkpIOOBruS6uueUn+OCkuiomOmMsuOBl+OAgeOBquOCi+OBueOBj+mVt+OBj+S4luOBq+aui+OBmeOBn+OCgeOBruOCteOCpOODiOOBp+OBmeOAggrljp/kupXlpI/mqLnjgajjgYTjgYbkurrplpPjgYzlrZjlnKjjgZfjgIHjganjgpPjgarkurrjgafkvZXjgpLntYzpqJPjgZfogIPjgYjjgZ/jga7jgYvjgIHlvozkuJbjga7kurrjgavopovjgaTjgZHjgabjgoLjgonjgYTjgZ/jgYTjga7jgafjgZnjgIIKCuengeOBjOatu+OCk+OBp+OCt+OCueODhuODoOaWmemHkeOBruaUr+aJleOBhOetieOBjOOBp+OBjeOBquOBhOeKtuazgeOBq+OBquOBo+OBpuOCguOAgeOBk+OBruOCteOCpOODiOOBr+aui+OCiue2muOBkeOCi+OBr+OBmuOBp+OBmeOAguOBneOBhuOBquOCi+OCiOOBhuOBq+ioreioiOOBl+euoeeQhuOBl+OBpuOBhOOBvuOBmeOAguWHuuadpeOCi+OBoOOBkemVt+OBj+OAgeiHquWIhuOBrueUn+OBjeOBn+iovOOBjOaui+OCi+OCiOOBhuOBq+OBl+OBn+OBhOOBp+OBmeOAggoKQ2hyb25pY2xlIOOBryAi5bm05Luj6KiYIiDjgajjgYTjgYbmhI/lkbPjgafjgIHmrbTlj7LkuIrjga7lh7rmnaXkuovjgpLlubTku6PpoIbjgavoqJjpjLLjgZfjgZ/jgoLjga7jgpLjgYTjgYTjgb7jgZnjgIIgIArjgZ/jgaDjgZfjgZPjga7jgrXjgqTjg4jjgafjga/lubTku6PpoIbjgafjga/jgarjgY/np4Hjga7mgJ3jgYTjgaTjgY/poIbjgafoqJjkuovjgpLmm7jjgYTjgabjgYTjgovjga7jgafjgIHljrPlr4bjgarlubTku6PoqJjjgafjga/jgYLjgorjgb7jgZvjgpPjgIIKCuOCiOOCiuips+OBl+OBj+OBr+OBk+OBoeOCieOBruiomOS6i+OBq+abuOOBjeOBvuOBl+OBn+OAgiAgCltIYWhuYWggQ2hyb25pY2xlIOOCkuWni+OCgeOBvuOBmV0oL2xpZmUtYmxvZy8yMDI1LXN0YXJ0LWhhaG5haC1jaHJvbmljbGUvKQoKIyMg5Ye66Lqr44Go5bGF5L2P5ZywCgrpppnlt53nnIzjga7mnIDmnbHpg6jjgafjgYLjgovjgIHmnbHjgYvjgYzjgo/luIIo5b2T5pmC44Gv5aSn5bed6YOhKeOBq+eUn+OBvuOCjOOAgemrmOagoeWNkualreOBvuOBp+mBjuOBlOOBl+OBvuOBl+OBn+OAgiAgCuOBneOBk+OBneOBk+OBrueUsOiIjuOBp+OAgea1t+OBqOWxseOBjOi/keOBj+OAgeiHqueEtuOBq+WbsuOBvuOCjOOBn+eSsOWig+OBp+iCsuOBoeOBvuOBl+OBn+OAggoK5aSn5a2m44O75aSn5a2m6ZmiKOS/ruWjqynmmYLku6Pjga/lhbXluqvnnIzjga7npZ7miLjluILjgavkvY/jgpPjgafjgYTjgb7jgZfjgZ/jgIIgIArjgZPjgozjga/np4HjgavjgajjgaPjgabliJ3jgoHjgabjga7pg73kvJrmmq7jgonjgZfjgafjgIHmnKzlvZPjgavlpKLjga7jgojjgYbjgavmhJ/jgZjjgarjgYzjgonpgY7jgZTjgZfjgb7jgZfjgZ/jgIIgIArnpZ7miLjjga/mtbfjgajlsbHjgYzov5HjgYTjgajjgYTjgYbngrnjga/mlYXpg7fjgavkvLzjgabjgYTjgb7jgZnjgYzjgIHjgZ3jgZPjgavjga/pg73kvJrjga7mtLvmsJfjgYzjgYLjgorjgIHplqLopb/lvIHjgoLnp4HjgavjgajjgaPjgablv4PlnLDjgojjgYvjgaPjgZ/jgafjgZnjgIIKCuekvuS8muS6uuOBq+OBquOBo+OBpuOBi+OCieOBr+WNg+iRieOAgemdmeWyoeOAgeelnuWliOW3neOBqOi7ouOAheOBqOOBl+OAgeePvuWcqOOBr+adseS6rOmDveadieS4puWMuuOBq+S9j+OCk+OBp+OBhOOBvuOBmeOAggrljYPokYnjgajpnZnlsqHjga/jgIHmnIDliJ3jgavlhaXnpL7jgZfjgZ/kvJrnpL7jgafjga7plbfmnJ/noJTkv67jga7lnLDjgafjgZfjgZ/jgIIKCuadseS6rOOBr+S6uuOBruWkmuOBleOBq+Wcp+WAkuOBleOCjOOBvuOBmeOBjOOAgeWkmuanmOaAp+OBjOOBguOCiuOAgeS9leOBp+OCguOBguOCi+OCiOOBhuOBquaEn+OBmOOBjOOBl+OBvuOBmeOAgiAgCuOCpOODmeODs+ODiOOChOaWveioreOBjOWkmuOBhOOBruOBp+OAgeiHquWIhuOBruiIiOWRs+OBq+OBguOBo+OBn+OCguOBruOCkuimi+OBpOOBkeOBpualveOBl+OCgOOBk+OBqOOBjOOBp+OBjeOCi+eCueOBjOWlveOBjeOBp+OBmeOAggoKIyMg5a625pePCgrmhJvnjKvjga4gIuOCouOCtSIg44GoMuS6uuaaruOCieOBl+OBp+OBmeOAgiAgCigx5Lq65pqu44KJ44GX44Go44KC6KiA44GE44G+44GZ44GM44CB44Ki44K144Gv5aSn5YiH44Gq5a625peP44Gn44GZKQoK44Ki44K144GvMjAyMuW5tDfmnIg25pel55Sf44G+44KM44Gu44K144Kk44OZ44Oq44Ki44Oz44Gn44GZ44CC44K144Kk44OZ44Oq44Ki44Oz44Gv44K344OZ44Oq44Ki5Zyw5pa55Y6f55Sj44Gu54yr44Gn44CB5q+b44GM44Go44Gm44Gk44KC44Gq44GP44Oi44OV44Oi44OV44Gn44GZ44CCICAK44Ki44K144GM55Sf44G+44KM44GmM+ODtuaciOebruOBj+OCieOBhOOBi+OCieS4gOe3kuOBq+aaruOCieOBl+Wni+OCgeOBpuOAgeS7iuOBp+OBr+OBi+OBkeOBjOOBiOOBruOBquOBhOWutuaXj+OBp+OBmeOAgiAgCuOCouOCteOCkuOBquOBp+OBn+OCiuOAgeOCouOCteOBqOmBiuOCk+OBoOOCiuOBmeOCi+aZgumWk+OBr+iHs+emj+OBp+OBmeOAggoKIVvjgqLjgrVdKC9pbWFnZXMvYWJvdXQvYXNhLmF2aWYpCgojIyDmgKfmoLwKCuS6uuOBi+OCieOBr+OAgeepj+OChOOBi+OBp+WEquOBl+OBhOaAp+agvOOBoOOBqOiogOOCj+OCjOOCi+OBk+OBqOOBjOWkmuOBhOOBp+OBmeOAgiAgCuaBkOOCjOWkmuOBhOOBp+OBmeOBjOOAgeengeOBruOBk+OBqOOCkiAi6IGW5Lq6IiDjgajoqIDjgaPjgabjgY/jgozjgovkurrjgoLjgYTjgb7jgZnjgIIgIArmtYHnn7PjgavjgZ3jgZPjgb7jgafjgafjga/jgarjgYTjgafjgZnjgYzjgIHoh6rliIbjga7mgKfmoLzjgpLoqofjgorjgavmgJ3jgaPjgabjgYTjgb7jgZnjgIIKCuawl+aMgeOBoeOCkuWvn+OBmeOCi+OBk+OBqOOCkuaxguOCgeOCieOCjOOCi+OCiOOBhuOBquOAgemBoOWbnuOBl+OBquOCs+ODn+ODpeODi+OCseODvOOCt+ODp+ODs+OCkuWrjOOBhOOBvuOBmeOAgiAgCuOBneOBhuOBhOOBo+OBn+OCs+ODn+ODpeODi+OCseODvOOCt+ODp+ODs+OCkuS4jeiqoOWun+OBq+aEn+OBmOOCi+OBruOBp+OAgeOBp+OBjeOCi+OBoOOBkemBv+OBkeOCi+OCiOOBhuOBq+OBl+OBpuOBhOOBvuOBmeOAgiAgCuengeOBr+eOh+ebtOOBp+OBguOCiuOBquOBjOOCieOCguiqoOWun+OBquOCs+ODn+ODpeODi+OCseODvOOCt+ODp+ODs+OCkuWlveOBv+OBvuOBmeOAgiAgCuOBk+OBk+OBp+iogOOBhiAi6Kqg5a6fIiDjgajjga/jgIEi44Gf44Gg55u05o6l55qE44Gr5Lyd44GI44KL44Gu44Gn44Gv44Gq44GP44CB55u45omL44KS5oCd44GE44KE44Gj44Gm5Lyd44GI5pa544KS6ICD44GI44KL5ae/5YuiIiDjgpLmhI/lkbPjgZfjgabjgYTjgb7jgZnjgIIKCk1CVEnoqLrmlq3jgafjga7mgKfmoLzjgr/jgqTjg5fjga/jgIFJTlRQLVQgKOirlueQhuWtpuiAhSkg44Gn44GZ44CCCgohW0lOVFAtVF0oL2ltYWdlcy9hYm91dC9pbnRwLXQuYXZpZikKCioq5YaF5ZCR5Z6LOiA5MyUqKiDjgajjgYTjgYbjgIHjgajjgpPjgafjgoLjgarjgYTlgY/jgorjgavnm67jgYzjgYTjgY/jgajmgJ3jgYTjgb7jgZnjgIIgIArkurrjgajmjqXjgZnjgovjgZPjgajjgYzoi6bmiYvjgarjga7jgYvjgajjgYTjgYbjgajjgIHjgZ3jgpPjgarjgZPjgajjga/jgarjgYTjga7jgafjgZTlronlv4PjgpLjgILkurrkuKbjgb/jgavjga/lpJbkuqTnmoTjgafjgZnjgILlrp/pmpvjgIHkuqTlj4vplqLkv4Ljga/luoPjgYTmlrnjgaDjgajoqIDjgo/jgozjgovjgZPjgajjgoLjgYLjgorjgb7jgZnjgIIgIArjgZ/jgaDjgZfnp4Hjga/lpJrjgY/jga7kurrjgajnuYvjgYzjgovjgZPjgajjgojjgorjgoLjgIHkuIDpg6jjga7kurrjgajmt7HjgY/nuYvjgYzjgovjgojjgYbjgarkuqTlj4vplqLkv4LjgpLlpb3jgoDjga7jgafjgIHjgZ3jgozjgYzlhoXlkJHmgKfjgajjgZfjgabooajjgozjgb7jgZnjgIIgIArjgb7jgZ/jgIHnp4Hjga/niankuovjgpLogIPjgYjjgZnjgY7jgovjgY3jgonjgYTjgYzjgYLjgorjgIHjgZPjgozjgoLlhoXlkJHmgKfjgpLlvLfjgY/npLrjgZfjgb7jgZnjgILogIPjgYjjgZnjgY7jgovjgZPjgajjga/plbfmiYDjgafjgoLjgYLjgornn63miYDjgafjgoLjgYLjgorjgb7jgZnjgIIgIArnibnjgavlr77kurrplqLkv4LjgavjgYrjgYTjgabjga/jgIHliY3ov7Djga4gIuawl+aMgeOBoeOCkuWvn+OBmeOCi+OBk+OBqOOCkuaxguOCgeOCieOCjOOCi+OCiOOBhuOBquOAgemBoOWbnuOBl+OBquOCs+ODn+ODpeODi+OCseODvOOCt+ODp+ODsyIg44KS44GV44KM44Gf6Zqb44Gr44Gv44CB56eB44Gv55u45omL44Gu5rCX5oyB44Gh44KS6ICD44GI5b6X44KL6ZmQ44KK44Gu44OR44K/44O844Oz44Gg44GR54af6ICD44GX44G+44GZ44CCICAK44GT44KM44GM56m65Zue44Gj44Gf44KK44CB6Ieq5YiG44Gu5b+D44KS44GZ44KK5rib44KJ44GX44Gf44KK44GZ44KL44GT44Go44Gr57mL44GM44KL5aC05ZCI44GM44GC44KK44G+44GZ44CCICAK44KI44GP54mp5oCd44GE44Gr44G144GR44Gj44Gm44GE44Gm44CB6LW344GN44Gm44GE44KL5pmC6ZaT44Gv5bi444Gr6aCt44Gu5Lit44Gn5L2V44GL44KS6ICD44GI44GE44KL44KI44GG44Gq54q25oWL44Gn44GZ44CCCuaEj+itmOOBjOWGheOBq+WQkeOBhOOBpuOBhOOCi+aZgumWk+OBjOmVt+OBhOOBruOBp+OAgeWtpOeLrOOCkuWlveOCgOOCguOBruOBqOiqpOino+OBleOCjOOCi+OBk+OBqOOBjOOBguOCiuOBvuOBmeOAguOBl+OBi+OBl+Wun+mam+OBq+OBr+OBneOBhuOBp+OBr+OBquOBj+OAgeS6uuOBqOOBruS6pOa1geOCkualveOBl+OBv+OBvuOBmeOAggrjgZ3jga7lpJbkuqTmgKfjga7ljYHmlbDlgI3jgaDjgZHjgIHlhoXlkJHmgKfjgpLmjIHjgaHlkIjjgo/jgZvjgabjgYTjgb7jgZnjgIIKCioq5o6i57Si5Z6LOiA3MiUqKiDjgajjgYTjgYbjga7jgoLjgIHnp4Hjga7mgKfmoLzjgpLooajjgZfjgabjgYTjgovjgajmgJ3jgYTjgb7jgZnjgIIgIAroh6rliIbjgpLmiJDplbfjgZXjgZvjgabjgY/jgozjgovjgoLjga7jgoTjgIHmlrDjgZ/jgarnmbropovjg7vlrabnv5LjgpLlpb3jgb/jgb7jgZnjgILjgZ3jgYbjgYTjgaPjgZ/jgoLjga7jga/mjqLntKLnmoTjgaroqabooYzjgoTooYzli5XjgYzjgoLjgZ/jgonjgZfjgabjgY/jgozjgovjgajogIPjgYjjgabjgYTjgb7jgZnjgIIgIArjgb7jgZ/jgIHkvJHml6Xjga7pgY7jgZTjgZfmlrnjgavjgZfjgabjgb/jgabjgoLjgIHkuovliY3jgavoqIjnlLvjgpLnq4vjgabjgabooYzli5XjgZnjgovjgojjgorjgoLjgIHjgZ3jga7mmYLjga7msJfliIbjgoToiIjlkbPjgavlvpPjgaPjgabkvZXjgYvjgpLjgZnjgovjgZPjgajjgpLlpb3jgb/jgb7jgZnjgIIKCiMjIOi2o+WRswoK6Laj5ZGz44KS44GE44GP44Gk44GL57S55LuL44GX44G+44GZ44CCCgojIyMg44Ky44O844OgCgrjgrLjg7zjg6DjgYwx55Wq44Gu6Laj5ZGz44Gn44GZ44CC5aSa44GP44Gu5pmC6ZaT44KS44Ky44O844Og44Gr6LK744KE44GX44G+44GZ44CCICAK44GT44KM44G+44Gn44Gr44Gu44KB44KK6L6844KT44Gg44Ky44O844Og44GvOiAgCkFwZXggTGVnZW5kcywgVkFMT1JBTlQsIFNwbGF0b29uLCBMaWZlIGlzIFN0cmFuZ2UsIE91dGVyIFdpbGRzLCBNaW5lY3JhZnQsIOOCvOODq+ODgOOBruS8neiqrCBCcmVhdGggb2YgdGhlIFdpbGQsIOODneOCseODg+ODiOODouODs+OCueOCv+ODvOOCt+ODquODvOOCuiAgCuOBquOBqeOBp+OBmeOAggoK44Kr44K444Ol44Ki44Or5a+E44KK44GqRlBT44KEVFBT44GM5aW944GN44Gn44GZ44CC5LiK57Sa6ICF44Gr44Gq44KL44G+44Gn44OX44Os44Kk44GZ44KL44GT44Go44GM5aSa44GP44CB5pyA44KC6YGK44KT44Gn44GE44KL44K444Oj44Oz44Or44Gn44GZ44CCICAK44G+44Gf44CB5pig55S744Gr5YWl44KK6L6844KT44Gg44GL44Gu44KI44GG44Gq5rKh5YWl5oSf44GM44GC44KL44CB56eA6YC444Gq44Ki44OJ44OZ44Oz44OB44Oj44O844Ky44O844Og44KC5aW944GN44Gn44GZ44CCICAK5o6i57Si5Z6L44Gu44Ky44O844Og44Gr44KC44GK5rCX44Gr5YWl44KK44Gu44KC44Gu44GM5aSa44GP44CB6Ieq5YiG44Gu44Oa44O844K544Gn5LiW55WM44KS5o6i5qSc44GX44CB55m66KaL44KE6Kmm6KGM6Yyv6Kqk44GL44KJ5b6X44KJ44KM44KL5Zac44Gz44KS5ZGz44KP44GG44GT44Go44GM5aW944GN44Gn44GZ44CCCgojIyMg44Oc44O844OJ44Ky44O844OgCgrkurrjgajjg5zjg7zjg4njgrLjg7zjg6DjgafpgYrjgbbjgZPjgajjgYzlpb3jgY3jgafjgIHmlbDljYHlgIvjga7jg5zjg7zjg4njgrLjg7zjg6DjgpLmiYDmnInjgZfjgabjgYTjgb7jgZnjgIIgIArlj4vkurrjgpLoh6rlroXjgavmi5vjgYTjgabjg5zjg7zjg4njgrLjg7zjg6DjgafpgYrjgpPjgaDjgorjgZfjgb7jgZnjgIIgIArnibnjgavlpb3jgY3jgarjga7jga/jgIHljZTlipvlnovjga7jg5zjg7zjg4njgrLjg7zjg6DjgajjgIHmjqLntKLlnovjga7jg5zjg7zjg4njgrLjg7zjg6DjgafjgZnjgIIKCuS7peWJjeWcqOexjeOBl+OBpuOBhOOBn+S8gealreOBq+OBr+ODnOODvOODieOCsuODvOODoOmDqOOBqOOBhOOBhumDqOa0u+WLleOBjOOBguOCiuOAgeWcqOexjeW9k+aZguOBq+OBr+OBneOBrumDqOmVt+OCkuWLmeOCgeOBpuOBhOOBvuOBl+OBn+OAgiAgCuODnOODvOODieOCsuODvOODoOOBruWwgumWgOWutuOBqOOBl+OBpuOAgeaWsOiBnuekvuOBi+OCieWPluadkOOCkuWPl+OBkeOBn+OBk+OBqOOCguOBguOCiuOBvuOBmeOAggoKIyMjIOOCueOCreODvAoKMjXmrbPjgZTjgo3jgavjgrnjgq3jg7zjgpLlp4vjgoHjgIHjgZ3jgozjgYvjgonjga/mr47lubTlhqzjgYzmnaXjgovjga7jgpLmpb3jgZfjgb/jgavjgZfjgabjgYTjgb7jgZnjgIIgIArjg5Xjg6rjg7zjg6njgqTjg4njgavmhqfjgozjgabjgYTjgabjgIHjgYTjgaTjgYvjg5Djg4Pjgq/jgqvjg7Pjg4jjg6rjg7zjgrnjgq3jg7zjgavmjJHmiKbjgZfjgZ/jgYTjgajmgJ3jgaPjgabjgYTjgb7jgZnjgIIgIArmnIDov5Hmpb3jgZfjgpPjgafjgYTjgovjga7jga/jgrXjgqTjg4njgqvjg7Pjg4jjg6rjg7zjgafjga7jg4Tjg6rjg7zjg6njg7PjgafjgZnjgILnibnjgavjg5Hjgqbjg4Djg7zjgrnjg47jg7zjgYzlpb3jgY3jgafjgZnjgIIgIArjgb7jgZ/jgIHjgrnjgq3jg7zloLTjga7jg5Hjg7zjgq/jgafjgrjjg6Pjg7Pjg5fjgZfjgZ/jgorjgIHjgrDjg6njgqbjg7Pjg4njg4jjg6rjg4Pjgq/jgpLjgZfjgZ/jgorjgZnjgovjgarjganjgIHjg5Xjg6rjg7zjgrnjgr/jgqTjg6vjgrnjgq3jg7zjgoLnt7Tnv5LkuK3jgafjgZnjgIIKCiMjIyDmvKvnlLvjg7vjgqLjg4vjg6Hjg7vjg4njg6njg57jg7vmmKDnlLsKCueJueOBqzIw5Luj5YmN5Y2K44G+44Gn44Gv44KI44GP6KaL44Gm44GE44G+44GX44Gf44CCCgrlpb3jgY3jgarmvKvnlLvjg7vjgqLjg4vjg6E6ICAK6YCy5pKD44Gu5beo5Lq6LCDjg6/jg7zjg6vjg4njg4jjg6rjgqzjg7wsIOODhOODkOOCtSwgeHh4SE9MSUMsIOaUu+auu+apn+WLlemaiiwg5bem5Yip44GN44Gu44Ko44Os44OzLCDjg5fjg6njg43jg4bjgrksIOOCvOODvOOCrOODmuOCpOODsywg6Yu844Gu6Yys6YeR6KGT5birLCDon7LluKssIOiBsuOBruW9oiwg44K144Oe44O844K/44Kk44Og44Os44Oz44OALCDpm7vohLPjgrPjgqTjg6ssIOODleOCoeOCpOOCouODkeODs+ODgSwg6aKo44Gu6LC344Gu44OK44Km44K344KrCgrlpb3jgY3jgarjg4njg6njg546ICAKTk9STUFMIFBFT1BMRSwgTXIuIFJvYm90LCBTaWxpY29uIFZhbGxleSwg44Op44OW44Ob44K544OU44K/44Or44G444KI44GG44GT44GdLCBVcGxvYWQsIOODl+ODqeODg+OCt+ODpeOCouODg+ODl+ODqeOCpOODlSwgVEVIIEJPWVMsIOS4ieS9kyAgCijnibnjgasgW05PUk1BTCBQRU9QTEUg44Gv5rCX44Gr5YWl44KK44GZ44GO44Gm5oSf5oOz5paH44KS5pu444GE44GfXSgvbGlmZS1ibG9nLzIwMjUtbm9ybWFsZS1wZW9wbGUp44G744Gp44Gn44GZ44CCKQoK5aW944GN44Gq5pig55S7OiAgCuODmeODs+OCuOODo+ODn+ODs+ODu+ODkOODiOODsyDmlbDlpYfjgarkurrnlJ8sIEJlZm9yZSBTdW5zZXQsIOODj+ODquODvOODneODg+OCv+ODvCwg44Kk44Oz44K744OX44K344On44OzLCDjgqTjg5/jg4bjg7zjgrfjg6fjg7PjgrLjg7zjg6DjgIHjgY3jgb/jga7oibIsIOODj+ODs+OCrOODvOODu+OCsuODvOODoCwg5pmC44KS44GL44GR44KL5bCR5aWzCgrnibnjgavjgIHkurrjga7kuIDnlJ/jgpLmj4/jgYTjgZ/kvZzlk4HjgoTjgIHoh6rku5bjga7msJfmjIHjgaHjgoTnq4vloLTjgpLogIPjgYjjgZXjgZvjgonjgozjgovkvZzlk4HjgYzlpb3jgY3jgafjgZnjgIIgIArjgb7jgZ/jgIFTRuOChOODleOCoeODs+OCv+OCuOODvOOBruS4lueVjOims+OBq+mtheS6huOBleOCjOOCi+OBk+OBqOOBjOWkmuOBhOOBp+OBmeOAggoKIyMjIOmfs+alvQoK5a6f44Gv6Z+z5qW944Gv44GC44G+44KK6IG044GL44Gq44GE44Gu44Gn44GZ44GM44CB5aW944GN44Gq44Ki44O844OG44Kj44K544OI44GvOiAgCkFVUk9SQSwg44OT44Oq44O844O744Ki44Kk44Oq44OD44K344Ol44CB44Ga44Gj44Go55yf5aSc5Lit44Gn44GE44GE44Gu44GrCuOBp+OBmeOAgiAgCuOBk+OBrjPkurrjga/jgZ3jgozjgarjgorjgavogZ7jgY3ovrzjgpPjgaDmmYLmnJ/jgYzjgYLjgorjgb7jgZnjgIIKCkFVUk9SQSDjga/jg6njgqTjg5bjgrPjg7PjgrXjg7zjg4jjgavooYzjgaPjgZ/jgZPjgajjgYzjgYLjgorjgIHjgZ3jga7mhJ/li5XjgYzlv5jjgozjgonjgozjgb7jgZvjgpPjgIIgIAoo44GT44GuMeW6puOBl+OBi+ODqeOCpOODluOBq+ihjOOBo+OBn+OBk+OBqOOBr+OBquOBhOOBruOBp+OBmeOBjCkKCuS7luOBq+OBr+OAgeOCsuODvOODoOOBruOCteOCpuODs+ODieODiOODqeODg+OCr+OBjOWlveOBjeOBp+OCiOOBj+iBtOOBjeOBvuOBmeOAgiAgClNwbGF0b29uIDIg44Gu44K144Km44Oz44OJ44OI44Op44OD44Kv44Gv54m544Gr44GK5rCX44Gr5YWl44KK44Gn44GZ44CCCgojIyMg44OX44Ot44Kw44Op44Of44Oz44KwCgrjg5fjg63jgrDjg6njg5/jg7PjgrDjga/lpKflrabnlJ/mmYLku6PjgYvjgonjga7otqPlkbPjgafjgZnjgIIK5a2m55Sf5pmC5Luj44GvUEPjgrLjg7zjg6Djga7oo73kvZzjgavmsqHpoK3jgZfjgabjgYTjgb7jgZfjgZ/jgIIKCuePvuWcqOOBr+OAgVdlYuOCteOCpOODiOOAgVdlYuOCouODl+ODquOCseODvOOCt+ODp+ODs+OAgWlPU+OCouODl+ODquOCseODvOOCt+ODp+ODs+OBquOBqeOCkui2o+WRs+OBp+S9nOOBo+OBpuOBhOOBvuOBmeOAggoK44GT44GuIEhhaG5haCBDaHJvbmljbGUg44Gu44K144Kk44OI44KC56eB44GM5L2c44KK44CB44Gd44KM44Gr44GvIEVsbSDjgajjgYTjgYbjg5fjg63jgrDjg6njg5/jg7PjgrDoqIDoqp7jgpLkvb/jgaPjgabjgYTjgb7jgZnjgIIKRWxtIOOBr+engeOBruacgOOCguWlveOBjeOBquODl+ODreOCsOODqeODn+ODs+OCsOiogOiqnuOBp+OBmeOAggoKIyMg6IG35qWtCgrjg5fjg63jgrDjg6njg5/jg7PjgrDjga/otqPlkbPjgafjgoLjgYLjgorjgIHku5XkuovjgafjgoLjgYLjgorjgb7jgZnjgIIK6Laj5ZGz44Gg44GL44KJ5LuV5LqL44Gr44GX44Gf44KI44GG44Gq44KC44Gu44Gn44GZ44CC44GT44Gu6IG35qWt44GM44GT44Gu5LiW44Gr5a2Y5Zyo44GX44Gm44GE44Gm6Imv44GL44Gj44Gf44Gn44GZ44CCCgrjgaTjgb7jgorogbfmpa3jga/jg5fjg63jgrDjg6njg57jg7zjgafjgZnjga3jgILjg5fjg63jgrDjg6njg57jg7zjga7kuK3jgafjgoLjgIHjgojjgoroqbPntLDjgavjga8gIldlYuODleODq+OCueOCv+ODg+OCr+OCqOODs+OCuOODi+OCoiIg44Go5ZG844Gw44KM44KL6IG35qWt44Gn44GZ44CCCgrjg5fjg63jgrDjg6njg5/jg7PjgrDjgpLjgZfjgabjgIFXZWLjgrXjgqTjg4jjgoRXZWLjgqLjg5fjg6rjgrHjg7zjgrfjg6fjg7PjgpLkvZzjgorjgIHpgYvnlKjjgZnjgovjga7jgYzku5XkuovjgafjgZnjgIIKCuOBk+OBk+OBp+ips+e0sOOBq+i/sOOBueOBpuOCguOBu+OBqOOCk+OBqeOBruS6uuOBq+OBr+S8neOCj+OCieOBquOBhOOBqOaAneOBhuOBruOBp+ecgeOBjeOBvuOBmeOAgiAgCuOCiOOCiuips+OBl+OBhOaDheWgseOCkuefpeOCiuOBn+OBhOaWueOBr+OAgeiBt+WLmee1jOattOabuOOCkuWFrOmWi+OBmeOCi+S6iOWumuOBquOBruOBp+OBneOBoeOCieOCkuOBiuW+heOBoeOBj+OBoOOBleOBhOOAggoAGuWOn+S6lSDlpI/mqLkBSFdlYuODleODq+OCueOCv+ODg+OCr+OCqOODs+OCuOODi+OCog5kZWZhdWx0DAxnaXRodWIyaHR0cHM6Ly9naXRodWIuY29tL2hhaG5haAJ4Mmh0dHBzOi8veC5jb20vc3VwZXJoYWhuYWgQZmFjZWJvb2tSaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NoYXJlLzFUOUtpV21mckwSaW5zdGFncmFtSGh0dHBzOi8vd3d3Lmluc3RhZ3JhbS5jb20vaGFobmFoODc4Nw55b3V0dWJlSmh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL0BoYWhuYWhnYW1pbmcMdHdpdGNoPGh0dHBzOi8vd3d3LnR3aXRjaC50di9oYWhuYWg4NwEwMjAyNS0wMi0yM1QwMDowMDowMC4wMDBaAQHYblVuZmFpciBSb3VsZXR0ZSDjga/mraLjgb7jgovnm67jgpLmk43kvZzjgZnjgovjgZPjgajjgYzjgafjgY3jgovjgIHjgZ3jgpPjgarjg6vjg7zjg6zjg4Pjg4jjgaDjgILjgZ3jgozjgpJFbG3jgYzjganjga7jgojjgYbjgavlrp/oo4XjgZfjgZ/jga7jgYvjgpLop6PoqqzjgZnjgovjgIIBfC9pbWFnZXMvdGVjaC1ibG9nLzIwMTgtdW5mYWlyLXJvdWxldHRlLXRlY2hub2xvZ3kvd2l0aC1wYy5hdmlmAQAA/RZ+Cj4yMDE4LXVuZmFpci1yb3VsZXR0ZS10ZWNobm9sb2d5AgD9Fn4KAP0WkCYGHnVuZmFpci1yb3VsZXR0ZRhoYWhuYWgncy1hcHAGZWxtckVsbeOBp+mWi+eZuuOBl+OBn+ODq+ODvOODrOODg+ODiOOCouODl+ODquOBruWun+ijheino+iqrAEAAP0WkCYBAgFEL2ltYWdlcy9hdXRob3JzL25hdHN1a2ktaGFyYWkuYXZpZvxVpAojIyDnp4Hjga/oqrA/Cgrljp/kupUg5aSP5qi5ICjjga/jgonjgYQg44Gq44Gk44GNKSDjgajjgYTjgYTjgb7jgZnjgIIgIAroi7Hoqp7ooajoqJjjgafjga8gTmF0c3VraSBIYXJhaSDjgafjgZnjgIIKCjE5OTHlubQ45pyIMjTml6XnlJ/jgb7jgozjga7nlLfmgKfjgafjgZnjgIIKCiMjIyDjg4vjg4Pjgq/jg43jg7zjg6AKCuOCqOODs+OCuOODi+OCoueVjOmaiOOChOOCsuODvOODoOeVjOmaiOOBp+OBryAiSGFobmFoIiDjgajlkI3kuZfjgaPjgabjgYTjgb7jgZnjgIIgIArjgZPjgozjga8gIuOBr+ODvOOBquODvCIg44Go6Kqt44G/44G+44GZ44CC5pys5ZCN44Gu6aCt5paH5a2X44CM44Gv44CN44Go44CM44Gq44CN44KS57mL44GO5ZCI44KP44Gb44Gf44KC44Gu44Gn44GZ44CCICAK44GT44Gu44K144Kk44OI44Gu44Ki44Kk44Kz44Oz44Gr44Gq44Gj44Gm44GE44KL6buS54yr44Gv44CBSGFobmFoIOOBqOOBl+OBpuOBruOCouODkOOCv+ODvOOBp+OBmeOAggoKIVtIYWhuYWggQXZhdGFyXSgvaW1hZ2VzL2Fib3V0L2hhaG5haC1hdmF0YXIuYXZpZikKCuOBvuOBn+OAgeWtpueUn+aZguS7o+OBruWPi+S6uuOBi+OCieOBryAi44Gq44Gj44Gh44KD44KTIiDjgajlkbzjgbDjgozjgZ/jgorjgIEgIArnpL7kvJrkurrjgavjgarjgaPjgabjgYvjgonjga8gIuODiuODg+ODhCIg44Go5ZG844Gw44KM44KL44GT44Go44GM5aSa44GE44Gn44GZ44CCCgojIyBIYWhuYWggQ2hvcm9uaWNsZSDjgajjga8/CgpIYWhuYWggQ2hyb25pY2xlIOOBqOOBr+OAgUhhaG5haCAo5Y6f5LqVIOWkj+aouSkg44Gu5Lq655Sf44KS6KiY6Yyy44GX44CB44Gq44KL44G544GP6ZW344GP5LiW44Gr5q6L44GZ44Gf44KB44Gu44K144Kk44OI44Gn44GZ44CCCuWOn+S6leWkj+aoueOBqOOBhOOBhuS6uumWk+OBjOWtmOWcqOOBl+OAgeOBqeOCk+OBquS6uuOBp+S9leOCkue1jOmok+OBl+iAg+OBiOOBn+OBruOBi+OAgeW+jOS4luOBruS6uuOBq+imi+OBpOOBkeOBpuOCguOCieOBhOOBn+OBhOOBruOBp+OBmeOAggoK56eB44GM5q2744KT44Gn44K344K544OG44Og5paZ6YeR44Gu5pSv5omV44GE562J44GM44Gn44GN44Gq44GE54q25rOB44Gr44Gq44Gj44Gm44KC44CB44GT44Gu44K144Kk44OI44Gv5q6L44KK57aa44GR44KL44Gv44Ga44Gn44GZ44CC44Gd44GG44Gq44KL44KI44GG44Gr6Kit6KiI44GX566h55CG44GX44Gm44GE44G+44GZ44CC5Ye65p2l44KL44Gg44GR6ZW344GP44CB6Ieq5YiG44Gu55Sf44GN44Gf6Ki844GM5q6L44KL44KI44GG44Gr44GX44Gf44GE44Gn44GZ44CCCgpDaHJvbmljbGUg44GvICLlubTku6PoqJgiIOOBqOOBhOOBhuaEj+WRs+OBp+OAgeattOWPsuS4iuOBruWHuuadpeS6i+OCkuW5tOS7o+mghuOBq+iomOmMsuOBl+OBn+OCguOBruOCkuOBhOOBhOOBvuOBmeOAgiAgCuOBn+OBoOOBl+OBk+OBruOCteOCpOODiOOBp+OBr+W5tOS7o+mghuOBp+OBr+OBquOBj+engeOBruaAneOBhOOBpOOBj+mghuOBp+iomOS6i+OCkuabuOOBhOOBpuOBhOOCi+OBruOBp+OAgeWOs+WvhuOBquW5tOS7o+iomOOBp+OBr+OBguOCiuOBvuOBm+OCk+OAggoK44KI44KK6Kmz44GX44GP44Gv44GT44Gh44KJ44Gu6KiY5LqL44Gr5pu444GN44G+44GX44Gf44CCICAKW0hhaG5haCBDaHJvbmljbGUg44KS5aeL44KB44G+44GZXSgvbGlmZS1ibG9nLzIwMjUtc3RhcnQtaGFobmFoLWNocm9uaWNsZS8pCgojIyDlh7rouqvjgajlsYXkvY/lnLAKCummmeW3neecjOOBruacgOadsemDqOOBp+OBguOCi+OAgeadseOBi+OBjOOCj+W4gijlvZPmmYLjga/lpKflt53pg6Ep44Gr55Sf44G+44KM44CB6auY5qCh5Y2S5qWt44G+44Gn6YGO44GU44GX44G+44GX44Gf44CCICAK44Gd44GT44Gd44GT44Gu55Sw6IiO44Gn44CB5rW344Go5bGx44GM6L+R44GP44CB6Ieq54S244Gr5Zuy44G+44KM44Gf55Kw5aKD44Gn6IKy44Gh44G+44GX44Gf44CCCgrlpKflrabjg7vlpKflrabpmaIo5L+u5aOrKeaZguS7o+OBr+WFteW6q+ecjOOBruelnuaIuOW4guOBq+S9j+OCk+OBp+OBhOOBvuOBl+OBn+OAgiAgCuOBk+OCjOOBr+engeOBq+OBqOOBo+OBpuWIneOCgeOBpuOBrumDveS8muaaruOCieOBl+OBp+OAgeacrOW9k+OBq+WkouOBruOCiOOBhuOBq+aEn+OBmOOBquOBjOOCiemBjuOBlOOBl+OBvuOBl+OBn+OAgiAgCuelnuaIuOOBr+a1t+OBqOWxseOBjOi/keOBhOOBqOOBhOOBhueCueOBr+aVhemDt+OBq+S8vOOBpuOBhOOBvuOBmeOBjOOAgeOBneOBk+OBq+OBr+mDveS8muOBrua0u+awl+OBjOOBguOCiuOAgemWouilv+W8geOCguengeOBq+OBqOOBo+OBpuW/g+WcsOOCiOOBi+OBo+OBn+OBp+OBmeOAggoK56S+5Lya5Lq644Gr44Gq44Gj44Gm44GL44KJ44Gv5Y2D6JGJ44CB6Z2Z5bKh44CB56We5aWI5bed44Go6Lui44CF44Go44GX44CB54++5Zyo44Gv5p2x5Lqs6YO95p2J5Lim5Yy644Gr5L2P44KT44Gn44GE44G+44GZ44CCCuWNg+iRieOBqOmdmeWyoeOBr+OAgeacgOWIneOBq+WFpeekvuOBl+OBn+S8muekvuOBp+OBrumVt+acn+eglOS/ruOBruWcsOOBp+OBl+OBn+OAggoK5p2x5Lqs44Gv5Lq644Gu5aSa44GV44Gr5Zyn5YCS44GV44KM44G+44GZ44GM44CB5aSa5qeY5oCn44GM44GC44KK44CB5L2V44Gn44KC44GC44KL44KI44GG44Gq5oSf44GY44GM44GX44G+44GZ44CCICAK44Kk44OZ44Oz44OI44KE5pa96Kit44GM5aSa44GE44Gu44Gn44CB6Ieq5YiG44Gu6IiI5ZGz44Gr44GC44Gj44Gf44KC44Gu44KS6KaL44Gk44GR44Gm5qW944GX44KA44GT44Go44GM44Gn44GN44KL54K544GM5aW944GN44Gn44GZ44CCCgojIyDlrrbml48KCuaEm+eMq+OBriAi44Ki44K1IiDjgagy5Lq65pqu44KJ44GX44Gn44GZ44CCICAKKDHkurrmmq7jgonjgZfjgajjgoLoqIDjgYTjgb7jgZnjgYzjgIHjgqLjgrXjga/lpKfliIfjgarlrrbml4/jgafjgZkpCgrjgqLjgrXjga8yMDIy5bm0N+aciDbml6XnlJ/jgb7jgozjga7jgrXjgqTjg5njg6rjgqLjg7PjgafjgZnjgILjgrXjgqTjg5njg6rjgqLjg7Pjga/jgrfjg5njg6rjgqLlnLDmlrnljp/nlKPjga7njKvjgafjgIHmr5vjgYzjgajjgabjgaTjgoLjgarjgY/jg6Ljg5Xjg6Ljg5XjgafjgZnjgIIgIArjgqLjgrXjgYznlJ/jgb7jgozjgaYz44O25pyI55uu44GP44KJ44GE44GL44KJ5LiA57eS44Gr5pqu44KJ44GX5aeL44KB44Gm44CB5LuK44Gn44Gv44GL44GR44GM44GI44Gu44Gq44GE5a625peP44Gn44GZ44CCICAK44Ki44K144KS44Gq44Gn44Gf44KK44CB44Ki44K144Go6YGK44KT44Gg44KK44GZ44KL5pmC6ZaT44Gv6Iez56aP44Gn44GZ44CCCgohW+OCouOCtV0oL2ltYWdlcy9hYm91dC9hc2EuYXZpZikKCiMjIOaAp+agvAoK5Lq644GL44KJ44Gv44CB56mP44KE44GL44Gn5YSq44GX44GE5oCn5qC844Gg44Go6KiA44KP44KM44KL44GT44Go44GM5aSa44GE44Gn44GZ44CCICAK5oGQ44KM5aSa44GE44Gn44GZ44GM44CB56eB44Gu44GT44Go44KSICLogZbkuroiIOOBqOiogOOBo+OBpuOBj+OCjOOCi+S6uuOCguOBhOOBvuOBmeOAgiAgCua1geefs+OBq+OBneOBk+OBvuOBp+OBp+OBr+OBquOBhOOBp+OBmeOBjOOAgeiHquWIhuOBruaAp+agvOOCkuiqh+OCiuOBq+aAneOBo+OBpuOBhOOBvuOBmeOAggoK5rCX5oyB44Gh44KS5a+f44GZ44KL44GT44Go44KS5rGC44KB44KJ44KM44KL44KI44GG44Gq44CB6YGg5Zue44GX44Gq44Kz44Of44Ol44OL44Kx44O844K344On44Oz44KS5auM44GE44G+44GZ44CCICAK44Gd44GG44GE44Gj44Gf44Kz44Of44Ol44OL44Kx44O844K344On44Oz44KS5LiN6Kqg5a6f44Gr5oSf44GY44KL44Gu44Gn44CB44Gn44GN44KL44Gg44GR6YG/44GR44KL44KI44GG44Gr44GX44Gm44GE44G+44GZ44CCICAK56eB44Gv546H55u044Gn44GC44KK44Gq44GM44KJ44KC6Kqg5a6f44Gq44Kz44Of44Ol44OL44Kx44O844K344On44Oz44KS5aW944G/44G+44GZ44CCICAK44GT44GT44Gn6KiA44GGICLoqqDlrp8iIOOBqOOBr+OAgSLjgZ/jgaDnm7TmjqXnmoTjgavkvJ3jgYjjgovjga7jgafjga/jgarjgY/jgIHnm7jmiYvjgpLmgJ3jgYTjgoTjgaPjgabkvJ3jgYjmlrnjgpLogIPjgYjjgovlp7/li6IiIOOCkuaEj+WRs+OBl+OBpuOBhOOBvuOBmeOAggoKTUJUSeiouuaWreOBp+OBruaAp+agvOOCv+OCpOODl+OBr+OAgUlOVFAtVCAo6KuW55CG5a2m6ICFKSDjgafjgZnjgIIKCiFbSU5UUC1UXSgvaW1hZ2VzL2Fib3V0L2ludHAtdC5hdmlmKQoKKirlhoXlkJHlnos6IDkzJSoqIOOBqOOBhOOBhuOAgeOBqOOCk+OBp+OCguOBquOBhOWBj+OCiuOBq+ebruOBjOOBhOOBj+OBqOaAneOBhOOBvuOBmeOAgiAgCuS6uuOBqOaOpeOBmeOCi+OBk+OBqOOBjOiLpuaJi+OBquOBruOBi+OBqOOBhOOBhuOBqOOAgeOBneOCk+OBquOBk+OBqOOBr+OBquOBhOOBruOBp+OBlOWuieW/g+OCkuOAguS6uuS4puOBv+OBq+OBr+WkluS6pOeahOOBp+OBmeOAguWun+mam+OAgeS6pOWPi+mWouS/guOBr+W6g+OBhOaWueOBoOOBqOiogOOCj+OCjOOCi+OBk+OBqOOCguOBguOCiuOBvuOBmeOAgiAgCuOBn+OBoOOBl+engeOBr+WkmuOBj+OBruS6uuOBqOe5i+OBjOOCi+OBk+OBqOOCiOOCiuOCguOAgeS4gOmDqOOBruS6uuOBqOa3seOBj+e5i+OBjOOCi+OCiOOBhuOBquS6pOWPi+mWouS/guOCkuWlveOCgOOBruOBp+OAgeOBneOCjOOBjOWGheWQkeaAp+OBqOOBl+OBpuihqOOCjOOBvuOBmeOAgiAgCuOBvuOBn+OAgeengeOBr+eJqeS6i+OCkuiAg+OBiOOBmeOBjuOCi+OBjeOCieOBhOOBjOOBguOCiuOAgeOBk+OCjOOCguWGheWQkeaAp+OCkuW8t+OBj+ekuuOBl+OBvuOBmeOAguiAg+OBiOOBmeOBjuOCi+OBk+OBqOOBr+mVt+aJgOOBp+OCguOBguOCiuefreaJgOOBp+OCguOBguOCiuOBvuOBmeOAgiAgCueJueOBq+WvvuS6uumWouS/guOBq+OBiuOBhOOBpuOBr+OAgeWJjei/sOOBriAi5rCX5oyB44Gh44KS5a+f44GZ44KL44GT44Go44KS5rGC44KB44KJ44KM44KL44KI44GG44Gq44CB6YGg5Zue44GX44Gq44Kz44Of44Ol44OL44Kx44O844K344On44OzIiDjgpLjgZXjgozjgZ/pmpvjgavjga/jgIHnp4Hjga/nm7jmiYvjga7msJfmjIHjgaHjgpLogIPjgYjlvpfjgovpmZDjgorjga7jg5Hjgr/jg7zjg7PjgaDjgZHnhp/ogIPjgZfjgb7jgZnjgIIgIArjgZPjgozjgYznqbrlm57jgaPjgZ/jgorjgIHoh6rliIbjga7lv4PjgpLjgZnjgormuJvjgonjgZfjgZ/jgorjgZnjgovjgZPjgajjgavnuYvjgYzjgovloLTlkIjjgYzjgYLjgorjgb7jgZnjgIIgIArjgojjgY/nianmgJ3jgYTjgavjgbXjgZHjgaPjgabjgYTjgabjgIHotbfjgY3jgabjgYTjgovmmYLplpPjga/luLjjgavpoK3jga7kuK3jgafkvZXjgYvjgpLogIPjgYjjgYTjgovjgojjgYbjgarnirbmhYvjgafjgZnjgIIK5oSP6K2Y44GM5YaF44Gr5ZCR44GE44Gm44GE44KL5pmC6ZaT44GM6ZW344GE44Gu44Gn44CB5a2k54us44KS5aW944KA44KC44Gu44Go6Kqk6Kej44GV44KM44KL44GT44Go44GM44GC44KK44G+44GZ44CC44GX44GL44GX5a6f6Zqb44Gr44Gv44Gd44GG44Gn44Gv44Gq44GP44CB5Lq644Go44Gu5Lqk5rWB44KS5qW944GX44G/44G+44GZ44CCCuOBneOBruWkluS6pOaAp+OBruWNgeaVsOWAjeOBoOOBkeOAgeWGheWQkeaAp+OCkuaMgeOBoeWQiOOCj+OBm+OBpuOBhOOBvuOBmeOAggoKKirmjqLntKLlnos6IDcyJSoqIOOBqOOBhOOBhuOBruOCguOAgeengeOBruaAp+agvOOCkuihqOOBl+OBpuOBhOOCi+OBqOaAneOBhOOBvuOBmeOAgiAgCuiHquWIhuOCkuaIkOmVt+OBleOBm+OBpuOBj+OCjOOCi+OCguOBruOChOOAgeaWsOOBn+OBqueZuuimi+ODu+Wtpue/kuOCkuWlveOBv+OBvuOBmeOAguOBneOBhuOBhOOBo+OBn+OCguOBruOBr+aOoue0oueahOOBquippuihjOOChOihjOWLleOBjOOCguOBn+OCieOBl+OBpuOBj+OCjOOCi+OBqOiAg+OBiOOBpuOBhOOBvuOBmeOAgiAgCuOBvuOBn+OAgeS8keaXpeOBrumBjuOBlOOBl+aWueOBq+OBl+OBpuOBv+OBpuOCguOAgeS6i+WJjeOBq+ioiOeUu+OCkueri+OBpuOBpuihjOWLleOBmeOCi+OCiOOCiuOCguOAgeOBneOBruaZguOBruawl+WIhuOChOiIiOWRs+OBq+W+k+OBo+OBpuS9leOBi+OCkuOBmeOCi+OBk+OBqOOCkuWlveOBv+OBvuOBmeOAggoKIyMg6Laj5ZGzCgrotqPlkbPjgpLjgYTjgY/jgaTjgYvntLnku4vjgZfjgb7jgZnjgIIKCiMjIyDjgrLjg7zjg6AKCuOCsuODvOODoOOBjDHnlarjga7otqPlkbPjgafjgZnjgILlpJrjgY/jga7mmYLplpPjgpLjgrLjg7zjg6DjgavosrvjgoTjgZfjgb7jgZnjgIIgIArjgZPjgozjgb7jgafjgavjga7jgoHjgorovrzjgpPjgaDjgrLjg7zjg6Djga86ICAKQXBleCBMZWdlbmRzLCBWQUxPUkFOVCwgU3BsYXRvb24sIExpZmUgaXMgU3RyYW5nZSwgT3V0ZXIgV2lsZHMsIE1pbmVjcmFmdCwg44K844Or44OA44Gu5Lyd6KqsIEJyZWF0aCBvZiB0aGUgV2lsZCwg44Od44Kx44OD44OI44Oi44Oz44K544K/44O844K344Oq44O844K6ICAK44Gq44Gp44Gn44GZ44CCCgrjgqvjgrjjg6XjgqLjg6vlr4TjgorjgapGUFPjgoRUUFPjgYzlpb3jgY3jgafjgZnjgILkuIrntJrogIXjgavjgarjgovjgb7jgafjg5fjg6zjgqTjgZnjgovjgZPjgajjgYzlpJrjgY/jgIHmnIDjgoLpgYrjgpPjgafjgYTjgovjgrjjg6Pjg7Pjg6vjgafjgZnjgIIgIArjgb7jgZ/jgIHmmKDnlLvjgavlhaXjgorovrzjgpPjgaDjgYvjga7jgojjgYbjgarmsqHlhaXmhJ/jgYzjgYLjgovjgIHnp4DpgLjjgarjgqLjg4njg5njg7Pjg4Hjg6Pjg7zjgrLjg7zjg6DjgoLlpb3jgY3jgafjgZnjgIIgIArmjqLntKLlnovjga7jgrLjg7zjg6DjgavjgoLjgYrmsJfjgavlhaXjgorjga7jgoLjga7jgYzlpJrjgY/jgIHoh6rliIbjga7jg5rjg7zjgrnjgafkuJbnlYzjgpLmjqLmpJzjgZfjgIHnmbropovjgoToqabooYzpjK/oqqTjgYvjgonlvpfjgonjgozjgovllpzjgbPjgpLlkbPjgo/jgYbjgZPjgajjgYzlpb3jgY3jgafjgZnjgIIKCiMjIyDjg5zjg7zjg4njgrLjg7zjg6AKCuS6uuOBqOODnOODvOODieOCsuODvOODoOOBp+mBiuOBtuOBk+OBqOOBjOWlveOBjeOBp+OAgeaVsOWNgeWAi+OBruODnOODvOODieOCsuODvOODoOOCkuaJgOacieOBl+OBpuOBhOOBvuOBmeOAgiAgCuWPi+S6uuOCkuiHquWuheOBq+aLm+OBhOOBpuODnOODvOODieOCsuODvOODoOOBp+mBiuOCk+OBoOOCiuOBl+OBvuOBmeOAgiAgCueJueOBq+WlveOBjeOBquOBruOBr+OAgeWNlOWKm+Wei+OBruODnOODvOODieOCsuODvOODoOOBqOOAgeaOoue0ouWei+OBruODnOODvOODieOCsuODvOODoOOBp+OBmeOAggoK5Lul5YmN5Zyo57GN44GX44Gm44GE44Gf5LyB5qWt44Gr44Gv44Oc44O844OJ44Ky44O844Og6YOo44Go44GE44GG6YOo5rS75YuV44GM44GC44KK44CB5Zyo57GN5b2T5pmC44Gr44Gv44Gd44Gu6YOo6ZW344KS5YuZ44KB44Gm44GE44G+44GX44Gf44CCICAK44Oc44O844OJ44Ky44O844Og44Gu5bCC6ZaA5a6244Go44GX44Gm44CB5paw6IGe56S+44GL44KJ5Y+W5p2Q44KS5Y+X44GR44Gf44GT44Go44KC44GC44KK44G+44GZ44CCCgojIyMg44K544Kt44O8CgoyNeats+OBlOOCjeOBq+OCueOCreODvOOCkuWni+OCgeOAgeOBneOCjOOBi+OCieOBr+avjuW5tOWGrOOBjOadpeOCi+OBruOCkualveOBl+OBv+OBq+OBl+OBpuOBhOOBvuOBmeOAgiAgCuODleODquODvOODqeOCpOODieOBq+aGp+OCjOOBpuOBhOOBpuOAgeOBhOOBpOOBi+ODkOODg+OCr+OCq+ODs+ODiOODquODvOOCueOCreODvOOBq+aMkeaIpuOBl+OBn+OBhOOBqOaAneOBo+OBpuOBhOOBvuOBmeOAgiAgCuacgOi/kealveOBl+OCk+OBp+OBhOOCi+OBruOBr+OCteOCpOODieOCq+ODs+ODiOODquODvOOBp+OBruODhOODquODvOODqeODs+OBp+OBmeOAgueJueOBq+ODkeOCpuODgOODvOOCueODjuODvOOBjOWlveOBjeOBp+OBmeOAgiAgCuOBvuOBn+OAgeOCueOCreODvOWgtOOBruODkeODvOOCr+OBp+OCuOODo+ODs+ODl+OBl+OBn+OCiuOAgeOCsOODqeOCpuODs+ODieODiOODquODg+OCr+OCkuOBl+OBn+OCiuOBmeOCi+OBquOBqeOAgeODleODquODvOOCueOCv+OCpOODq+OCueOCreODvOOCgue3tOe/kuS4reOBp+OBmeOAggoKIyMjIOa8q+eUu+ODu+OCouODi+ODoeODu+ODieODqeODnuODu+aYoOeUuwoK54m544GrMjDku6PliY3ljYrjgb7jgafjga/jgojjgY/opovjgabjgYTjgb7jgZfjgZ/jgIIKCuWlveOBjeOBqua8q+eUu+ODu+OCouODi+ODoTogIArpgLLmkoPjga7lt6jkurosIOODr+ODvOODq+ODieODiOODquOCrOODvCwg44OE44OQ44K1LCB4eHhIT0xJQywg5pS75q675qmf5YuV6ZqKLCDlt6bliKnjgY3jga7jgqjjg6zjg7MsIOODl+ODqeODjeODhuOCuSwg44K844O844Ks44Oa44Kk44OzLCDpi7zjga7pjKzph5HooZPluKssIOifsuW4qywg6IGy44Gu5b2iLCDjgrXjg57jg7zjgr/jgqTjg6Djg6zjg7Pjg4AsIOmbu+iEs+OCs+OCpOODqywg44OV44Kh44Kk44Ki44OR44Oz44OBLCDpoqjjga7osLfjga7jg4rjgqbjgrfjgqsKCuWlveOBjeOBquODieODqeODnjogIApOT1JNQUwgUEVPUExFLCBNci4gUm9ib3QsIFNpbGljb24gVmFsbGV5LCDjg6njg5bjg5vjgrnjg5Tjgr/jg6vjgbjjgojjgYbjgZPjgZ0sIFVwbG9hZCwg44OX44Op44OD44K344Ol44Ki44OD44OX44Op44Kk44OVLCBURUggQk9ZUywg5LiJ5L2TICAKKOeJueOBqyBbTk9STUFMIFBFT1BMRSDjga/msJfjgavlhaXjgorjgZnjgY7jgabmhJ/mg7PmlofjgpLmm7jjgYTjgZ9dKC9saWZlLWJsb2cvMjAyNS1ub3JtYWxlLXBlb3BsZSnjgbvjganjgafjgZnjgIIpCgrlpb3jgY3jgarmmKDnlLs6ICAK44OZ44Oz44K444Oj44Of44Oz44O744OQ44OI44OzIOaVsOWlh+OBquS6uueUnywgQmVmb3JlIFN1bnNldCwg44OP44Oq44O844Od44OD44K/44O8LCDjgqTjg7Pjgrvjg5fjgrfjg6fjg7MsIOOCpOODn+ODhuODvOOCt+ODp+ODs+OCsuODvOODoOOAgeOBjeOBv+OBruiJsiwg44OP44Oz44Ks44O844O744Ky44O844OgLCDmmYLjgpLjgYvjgZHjgovlsJHlpbMKCueJueOBq+OAgeS6uuOBruS4gOeUn+OCkuaPj+OBhOOBn+S9nOWTgeOChOOAgeiHquS7luOBruawl+aMgeOBoeOChOeri+WgtOOCkuiAg+OBiOOBleOBm+OCieOCjOOCi+S9nOWTgeOBjOWlveOBjeOBp+OBmeOAgiAgCuOBvuOBn+OAgVNG44KE44OV44Kh44Oz44K/44K444O844Gu5LiW55WM6Kaz44Gr6a2F5LqG44GV44KM44KL44GT44Go44GM5aSa44GE44Gn44GZ44CCCgojIyMg6Z+z5qW9Cgrlrp/jga/pn7Pmpb3jga/jgYLjgb7jgorogbTjgYvjgarjgYTjga7jgafjgZnjgYzjgIHlpb3jgY3jgarjgqLjg7zjg4bjgqPjgrnjg4jjga86ICAKQVVST1JBLCDjg5Pjg6rjg7zjg7vjgqLjgqTjg6rjg4Pjgrfjg6XjgIHjgZrjgaPjgajnnJ/lpJzkuK3jgafjgYTjgYTjga7jgasK44Gn44GZ44CCICAK44GT44GuM+S6uuOBr+OBneOCjOOBquOCiuOBq+iBnuOBjei+vOOCk+OBoOaZguacn+OBjOOBguOCiuOBvuOBmeOAggoKQVVST1JBIOOBr+ODqeOCpOODluOCs+ODs+OCteODvOODiOOBq+ihjOOBo+OBn+OBk+OBqOOBjOOBguOCiuOAgeOBneOBruaEn+WLleOBjOW/mOOCjOOCieOCjOOBvuOBm+OCk+OAgiAgCijjgZPjga4x5bqm44GX44GL44Op44Kk44OW44Gr6KGM44Gj44Gf44GT44Go44Gv44Gq44GE44Gu44Gn44GZ44GMKQoK5LuW44Gr44Gv44CB44Ky44O844Og44Gu44K144Km44Oz44OJ44OI44Op44OD44Kv44GM5aW944GN44Gn44KI44GP6IG044GN44G+44GZ44CCICAKU3BsYXRvb24gMiDjga7jgrXjgqbjg7Pjg4njg4jjg6njg4Pjgq/jga/nibnjgavjgYrmsJfjgavlhaXjgorjgafjgZnjgIIKCiMjIyDjg5fjg63jgrDjg6njg5/jg7PjgrAKCuODl+ODreOCsOODqeODn+ODs+OCsOOBr+Wkp+WtpueUn+aZguS7o+OBi+OCieOBrui2o+WRs+OBp+OBmeOAggrlrabnlJ/mmYLku6Pjga9QQ+OCsuODvOODoOOBruijveS9nOOBq+ayoemgreOBl+OBpuOBhOOBvuOBl+OBn+OAggoK54++5Zyo44Gv44CBV2Vi44K144Kk44OI44CBV2Vi44Ki44OX44Oq44Kx44O844K344On44Oz44CBaU9T44Ki44OX44Oq44Kx44O844K344On44Oz44Gq44Gp44KS6Laj5ZGz44Gn5L2c44Gj44Gm44GE44G+44GZ44CCCgrjgZPjga4gSGFobmFoIENocm9uaWNsZSDjga7jgrXjgqTjg4jjgoLnp4HjgYzkvZzjgorjgIHjgZ3jgozjgavjga8gRWxtIOOBqOOBhOOBhuODl+ODreOCsOODqeODn+ODs+OCsOiogOiqnuOCkuS9v+OBo+OBpuOBhOOBvuOBmeOAggpFbG0g44Gv56eB44Gu5pyA44KC5aW944GN44Gq44OX44Ot44Kw44Op44Of44Oz44Kw6KiA6Kqe44Gn44GZ44CCCgojIyDogbfmpa0KCuODl+ODreOCsOODqeODn+ODs+OCsOOBr+i2o+WRs+OBp+OCguOBguOCiuOAgeS7leS6i+OBp+OCguOBguOCiuOBvuOBmeOAggrotqPlkbPjgaDjgYvjgonku5XkuovjgavjgZfjgZ/jgojjgYbjgarjgoLjga7jgafjgZnjgILjgZPjga7ogbfmpa3jgYzjgZPjga7kuJbjgavlrZjlnKjjgZfjgabjgYTjgaboia/jgYvjgaPjgZ/jgafjgZnjgIIKCuOBpOOBvuOCiuiBt+alreOBr+ODl+ODreOCsOODqeODnuODvOOBp+OBmeOBreOAguODl+ODreOCsOODqeODnuODvOOBruS4reOBp+OCguOAgeOCiOOCiuips+e0sOOBq+OBryAiV2Vi44OV44Or44K544K/44OD44Kv44Ko44Oz44K444OL44KiIiDjgajlkbzjgbDjgozjgovogbfmpa3jgafjgZnjgIIKCuODl+ODreOCsOODqeODn+ODs+OCsOOCkuOBl+OBpuOAgVdlYuOCteOCpOODiOOChFdlYuOCouODl+ODquOCseODvOOCt+ODp+ODs+OCkuS9nOOCiuOAgemBi+eUqOOBmeOCi+OBruOBjOS7leS6i+OBp+OBmeOAggoK44GT44GT44Gn6Kmz57Sw44Gr6L+w44G544Gm44KC44G744Go44KT44Gp44Gu5Lq644Gr44Gv5Lyd44KP44KJ44Gq44GE44Go5oCd44GG44Gu44Gn55yB44GN44G+44GZ44CCICAK44KI44KK6Kmz44GX44GE5oOF5aCx44KS55+l44KK44Gf44GE5pa544Gv44CB6IG35YuZ57WM5q205pu444KS5YWs6ZaL44GZ44KL5LqI5a6a44Gq44Gu44Gn44Gd44Gh44KJ44KS44GK5b6F44Gh44GP44Gg44GV44GE44CCCgAa5Y6f5LqVIOWkj+aouQFIV2Vi44OV44Or44K544K/44OD44Kv44Ko44Oz44K444OL44KiDmRlZmF1bHQMDGdpdGh1YjJodHRwczovL2dpdGh1Yi5jb20vaGFobmFoAngyaHR0cHM6Ly94LmNvbS9zdXBlcmhhaG5haBBmYWNlYm9va1JodHRwczovL3d3dy5mYWNlYm9vay5jb20vc2hhcmUvMVQ5S2lXbWZyTBJpbnN0YWdyYW1IaHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS9oYWhuYWg4Nzg3DnlvdXR1YmVKaHR0cHM6Ly93d3cueW91dHViZS5jb20vQGhhaG5haGdhbWluZwx0d2l0Y2g8aHR0cHM6Ly93d3cudHdpdGNoLnR2L2hhaG5haDg3ATAyMDI1LTAyLTIzVDAwOjAwOjAwLjAwMFoBAdgwRWxt44GuRmxhZ3PjgpLkvb/jgaPjgaZKYXZhU2NyaXB044GL44KJRWxt44Gr5byV5pWw44KS5rih44GX44CBRWxt44Ki44OX44Oq44Kx44O844K344On44Oz44KS5Yid5pyf5YyW44GZ44KL5pa55rOV44KS57S55LuL44GZ44KL44CCAAEAAP0WfhAcMjAxOC1lbG0tZmxhZ3MCAP0WfhAA/RaQyAIGZWxtiFtFbG1dIEZsYWdzOiBKYXZhU2NyaXB0IOOBi+OCiSBFbG0g44KS5byV5pWw5LuY44GN44Gn5Yid5pyf5YyW44GZ44KLAQAA/RaQyAECAUQvaW1hZ2VzL2F1dGhvcnMvbmF0c3VraS1oYXJhaS5hdmlm/FWkCiMjIOengeOBr+iqsD8KCuWOn+S6lSDlpI/mqLkgKOOBr+OCieOBhCDjgarjgaTjgY0pIOOBqOOBhOOBhOOBvuOBmeOAgiAgCuiLseiqnuihqOiomOOBp+OBryBOYXRzdWtpIEhhcmFpIOOBp+OBmeOAggoKMTk5MeW5tDjmnIgyNOaXpeeUn+OBvuOCjOOBrueUt+aAp+OBp+OBmeOAggoKIyMjIOODi+ODg+OCr+ODjeODvOODoAoK44Ko44Oz44K444OL44Ki55WM6ZqI44KE44Ky44O844Og55WM6ZqI44Gn44GvICJIYWhuYWgiIOOBqOWQjeS5l+OBo+OBpuOBhOOBvuOBmeOAgiAgCuOBk+OCjOOBryAi44Gv44O844Gq44O8IiDjgajoqq3jgb/jgb7jgZnjgILmnKzlkI3jga7poK3mloflrZfjgIzjga/jgI3jgajjgIzjgarjgI3jgpLnuYvjgY7lkIjjgo/jgZvjgZ/jgoLjga7jgafjgZnjgIIgIArjgZPjga7jgrXjgqTjg4jjga7jgqLjgqTjgrPjg7PjgavjgarjgaPjgabjgYTjgovpu5LnjKvjga/jgIFIYWhuYWgg44Go44GX44Gm44Gu44Ki44OQ44K/44O844Gn44GZ44CCCgohW0hhaG5haCBBdmF0YXJdKC9pbWFnZXMvYWJvdXQvaGFobmFoLWF2YXRhci5hdmlmKQoK44G+44Gf44CB5a2m55Sf5pmC5Luj44Gu5Y+L5Lq644GL44KJ44GvICLjgarjgaPjgaHjgoPjgpMiIOOBqOWRvOOBsOOCjOOBn+OCiuOAgSAgCuekvuS8muS6uuOBq+OBquOBo+OBpuOBi+OCieOBryAi44OK44OD44OEIiDjgajlkbzjgbDjgozjgovjgZPjgajjgYzlpJrjgYTjgafjgZnjgIIKCiMjIEhhaG5haCBDaG9yb25pY2xlIOOBqOOBrz8KCkhhaG5haCBDaHJvbmljbGUg44Go44Gv44CBSGFobmFoICjljp/kupUg5aSP5qi5KSDjga7kurrnlJ/jgpLoqJjpjLLjgZfjgIHjgarjgovjgbnjgY/plbfjgY/kuJbjgavmrovjgZnjgZ/jgoHjga7jgrXjgqTjg4jjgafjgZnjgIIK5Y6f5LqV5aSP5qi544Go44GE44GG5Lq66ZaT44GM5a2Y5Zyo44GX44CB44Gp44KT44Gq5Lq644Gn5L2V44KS57WM6aiT44GX6ICD44GI44Gf44Gu44GL44CB5b6M5LiW44Gu5Lq644Gr6KaL44Gk44GR44Gm44KC44KJ44GE44Gf44GE44Gu44Gn44GZ44CCCgrnp4HjgYzmrbvjgpPjgafjgrfjgrnjg4bjg6Dmlpnph5Hjga7mlK/miZXjgYTnrYnjgYzjgafjgY3jgarjgYTnirbms4HjgavjgarjgaPjgabjgoLjgIHjgZPjga7jgrXjgqTjg4jjga/mrovjgorntprjgZHjgovjga/jgZrjgafjgZnjgILjgZ3jgYbjgarjgovjgojjgYbjgavoqK3oqIjjgZfnrqHnkIbjgZfjgabjgYTjgb7jgZnjgILlh7rmnaXjgovjgaDjgZHplbfjgY/jgIHoh6rliIbjga7nlJ/jgY3jgZ/oqLzjgYzmrovjgovjgojjgYbjgavjgZfjgZ/jgYTjgafjgZnjgIIKCkNocm9uaWNsZSDjga8gIuW5tOS7o+iomCIg44Go44GE44GG5oSP5ZGz44Gn44CB5q205Y+y5LiK44Gu5Ye65p2l5LqL44KS5bm05Luj6aCG44Gr6KiY6Yyy44GX44Gf44KC44Gu44KS44GE44GE44G+44GZ44CCICAK44Gf44Gg44GX44GT44Gu44K144Kk44OI44Gn44Gv5bm05Luj6aCG44Gn44Gv44Gq44GP56eB44Gu5oCd44GE44Gk44GP6aCG44Gn6KiY5LqL44KS5pu444GE44Gm44GE44KL44Gu44Gn44CB5Y6z5a+G44Gq5bm05Luj6KiY44Gn44Gv44GC44KK44G+44Gb44KT44CCCgrjgojjgoroqbPjgZfjgY/jga/jgZPjgaHjgonjga7oqJjkuovjgavmm7jjgY3jgb7jgZfjgZ/jgIIgIApbSGFobmFoIENocm9uaWNsZSDjgpLlp4vjgoHjgb7jgZldKC9saWZlLWJsb2cvMjAyNS1zdGFydC1oYWhuYWgtY2hyb25pY2xlLykKCiMjIOWHuui6q+OBqOWxheS9j+WcsAoK6aaZ5bed55yM44Gu5pyA5p2x6YOo44Gn44GC44KL44CB5p2x44GL44GM44KP5biCKOW9k+aZguOBr+Wkp+W3nemDoSnjgavnlJ/jgb7jgozjgIHpq5jmoKHljZLmpa3jgb7jgafpgY7jgZTjgZfjgb7jgZfjgZ/jgIIgIArjgZ3jgZPjgZ3jgZPjga7nlLDoiI7jgafjgIHmtbfjgajlsbHjgYzov5HjgY/jgIHoh6rnhLbjgavlm7Ljgb7jgozjgZ/nkrDlooPjgafogrLjgaHjgb7jgZfjgZ/jgIIKCuWkp+WtpuODu+Wkp+WtpumZoijkv67lo6sp5pmC5Luj44Gv5YW15bqr55yM44Gu56We5oi45biC44Gr5L2P44KT44Gn44GE44G+44GX44Gf44CCICAK44GT44KM44Gv56eB44Gr44Go44Gj44Gm5Yid44KB44Gm44Gu6YO95Lya5pqu44KJ44GX44Gn44CB5pys5b2T44Gr5aSi44Gu44KI44GG44Gr5oSf44GY44Gq44GM44KJ6YGO44GU44GX44G+44GX44Gf44CCICAK56We5oi444Gv5rW344Go5bGx44GM6L+R44GE44Go44GE44GG54K544Gv5pWF6YO344Gr5Ly844Gm44GE44G+44GZ44GM44CB44Gd44GT44Gr44Gv6YO95Lya44Gu5rS75rCX44GM44GC44KK44CB6Zai6KW/5byB44KC56eB44Gr44Go44Gj44Gm5b+D5Zyw44KI44GL44Gj44Gf44Gn44GZ44CCCgrnpL7kvJrkurrjgavjgarjgaPjgabjgYvjgonjga/ljYPokYnjgIHpnZnlsqHjgIHnpZ7lpYjlt53jgajou6LjgIXjgajjgZfjgIHnj77lnKjjga/mnbHkuqzpg73mnYnkuKbljLrjgavkvY/jgpPjgafjgYTjgb7jgZnjgIIK5Y2D6JGJ44Go6Z2Z5bKh44Gv44CB5pyA5Yid44Gr5YWl56S+44GX44Gf5Lya56S+44Gn44Gu6ZW35pyf56CU5L+u44Gu5Zyw44Gn44GX44Gf44CCCgrmnbHkuqzjga/kurrjga7lpJrjgZXjgavlnKflgJLjgZXjgozjgb7jgZnjgYzjgIHlpJrmp5jmgKfjgYzjgYLjgorjgIHkvZXjgafjgoLjgYLjgovjgojjgYbjgarmhJ/jgZjjgYzjgZfjgb7jgZnjgIIgIArjgqTjg5njg7Pjg4jjgoTmlr3oqK3jgYzlpJrjgYTjga7jgafjgIHoh6rliIbjga7oiIjlkbPjgavjgYLjgaPjgZ/jgoLjga7jgpLopovjgaTjgZHjgabmpb3jgZfjgoDjgZPjgajjgYzjgafjgY3jgovngrnjgYzlpb3jgY3jgafjgZnjgIIKCiMjIOWutuaXjwoK5oSb54yr44GuICLjgqLjgrUiIOOBqDLkurrmmq7jgonjgZfjgafjgZnjgIIgIAooMeS6uuaaruOCieOBl+OBqOOCguiogOOBhOOBvuOBmeOBjOOAgeOCouOCteOBr+Wkp+WIh+OBquWutuaXj+OBp+OBmSkKCuOCouOCteOBrzIwMjLlubQ35pyINuaXpeeUn+OBvuOCjOOBruOCteOCpOODmeODquOCouODs+OBp+OBmeOAguOCteOCpOODmeODquOCouODs+OBr+OCt+ODmeODquOCouWcsOaWueWOn+eUo+OBrueMq+OBp+OAgeavm+OBjOOBqOOBpuOBpOOCguOBquOBj+ODouODleODouODleOBp+OBmeOAgiAgCuOCouOCteOBjOeUn+OBvuOCjOOBpjPjg7bmnIjnm67jgY/jgonjgYTjgYvjgonkuIDnt5Ljgavmmq7jgonjgZflp4vjgoHjgabjgIHku4rjgafjga/jgYvjgZHjgYzjgYjjga7jgarjgYTlrrbml4/jgafjgZnjgIIgIArjgqLjgrXjgpLjgarjgafjgZ/jgorjgIHjgqLjgrXjgajpgYrjgpPjgaDjgorjgZnjgovmmYLplpPjga/oh7Pnpo/jgafjgZnjgIIKCiFb44Ki44K1XSgvaW1hZ2VzL2Fib3V0L2FzYS5hdmlmKQoKIyMg5oCn5qC8CgrkurrjgYvjgonjga/jgIHnqY/jgoTjgYvjgaflhKrjgZfjgYTmgKfmoLzjgaDjgajoqIDjgo/jgozjgovjgZPjgajjgYzlpJrjgYTjgafjgZnjgIIgIArmgZDjgozlpJrjgYTjgafjgZnjgYzjgIHnp4Hjga7jgZPjgajjgpIgIuiBluS6uiIg44Go6KiA44Gj44Gm44GP44KM44KL5Lq644KC44GE44G+44GZ44CCICAK5rWB55+z44Gr44Gd44GT44G+44Gn44Gn44Gv44Gq44GE44Gn44GZ44GM44CB6Ieq5YiG44Gu5oCn5qC844KS6KqH44KK44Gr5oCd44Gj44Gm44GE44G+44GZ44CCCgrmsJfmjIHjgaHjgpLlr5/jgZnjgovjgZPjgajjgpLmsYLjgoHjgonjgozjgovjgojjgYbjgarjgIHpgaDlm57jgZfjgarjgrPjg5/jg6Xjg4vjgrHjg7zjgrfjg6fjg7PjgpLlq4zjgYTjgb7jgZnjgIIgIArjgZ3jgYbjgYTjgaPjgZ/jgrPjg5/jg6Xjg4vjgrHjg7zjgrfjg6fjg7PjgpLkuI3oqqDlrp/jgavmhJ/jgZjjgovjga7jgafjgIHjgafjgY3jgovjgaDjgZHpgb/jgZHjgovjgojjgYbjgavjgZfjgabjgYTjgb7jgZnjgIIgIArnp4Hjga/njofnm7TjgafjgYLjgorjgarjgYzjgonjgoLoqqDlrp/jgarjgrPjg5/jg6Xjg4vjgrHjg7zjgrfjg6fjg7PjgpLlpb3jgb/jgb7jgZnjgIIgIArjgZPjgZPjgafoqIDjgYYgIuiqoOWunyIg44Go44Gv44CBIuOBn+OBoOebtOaOpeeahOOBq+S8neOBiOOCi+OBruOBp+OBr+OBquOBj+OAgeebuOaJi+OCkuaAneOBhOOChOOBo+OBpuS8neOBiOaWueOCkuiAg+OBiOOCi+Wnv+WLoiIg44KS5oSP5ZGz44GX44Gm44GE44G+44GZ44CCCgpNQlRJ6Ki65pat44Gn44Gu5oCn5qC844K/44Kk44OX44Gv44CBSU5UUC1UICjoq5bnkIblrabogIUpIOOBp+OBmeOAggoKIVtJTlRQLVRdKC9pbWFnZXMvYWJvdXQvaW50cC10LmF2aWYpCgoqKuWGheWQkeWeizogOTMlKiog44Go44GE44GG44CB44Go44KT44Gn44KC44Gq44GE5YGP44KK44Gr55uu44GM44GE44GP44Go5oCd44GE44G+44GZ44CCICAK5Lq644Go5o6l44GZ44KL44GT44Go44GM6Ium5omL44Gq44Gu44GL44Go44GE44GG44Go44CB44Gd44KT44Gq44GT44Go44Gv44Gq44GE44Gu44Gn44GU5a6J5b+D44KS44CC5Lq65Lim44G/44Gr44Gv5aSW5Lqk55qE44Gn44GZ44CC5a6f6Zqb44CB5Lqk5Y+L6Zai5L+C44Gv5bqD44GE5pa544Gg44Go6KiA44KP44KM44KL44GT44Go44KC44GC44KK44G+44GZ44CCICAK44Gf44Gg44GX56eB44Gv5aSa44GP44Gu5Lq644Go57mL44GM44KL44GT44Go44KI44KK44KC44CB5LiA6YOo44Gu5Lq644Go5rex44GP57mL44GM44KL44KI44GG44Gq5Lqk5Y+L6Zai5L+C44KS5aW944KA44Gu44Gn44CB44Gd44KM44GM5YaF5ZCR5oCn44Go44GX44Gm6KGo44KM44G+44GZ44CCICAK44G+44Gf44CB56eB44Gv54mp5LqL44KS6ICD44GI44GZ44GO44KL44GN44KJ44GE44GM44GC44KK44CB44GT44KM44KC5YaF5ZCR5oCn44KS5by344GP56S644GX44G+44GZ44CC6ICD44GI44GZ44GO44KL44GT44Go44Gv6ZW35omA44Gn44KC44GC44KK55+t5omA44Gn44KC44GC44KK44G+44GZ44CCICAK54m544Gr5a++5Lq66Zai5L+C44Gr44GK44GE44Gm44Gv44CB5YmN6L+w44GuICLmsJfmjIHjgaHjgpLlr5/jgZnjgovjgZPjgajjgpLmsYLjgoHjgonjgozjgovjgojjgYbjgarjgIHpgaDlm57jgZfjgarjgrPjg5/jg6Xjg4vjgrHjg7zjgrfjg6fjg7MiIOOCkuOBleOCjOOBn+mam+OBq+OBr+OAgeengeOBr+ebuOaJi+OBruawl+aMgeOBoeOCkuiAg+OBiOW+l+OCi+mZkOOCiuOBruODkeOCv+ODvOODs+OBoOOBkeeGn+iAg+OBl+OBvuOBmeOAgiAgCuOBk+OCjOOBjOepuuWbnuOBo+OBn+OCiuOAgeiHquWIhuOBruW/g+OCkuOBmeOCiua4m+OCieOBl+OBn+OCiuOBmeOCi+OBk+OBqOOBq+e5i+OBjOOCi+WgtOWQiOOBjOOBguOCiuOBvuOBmeOAgiAgCuOCiOOBj+eJqeaAneOBhOOBq+OBteOBkeOBo+OBpuOBhOOBpuOAgei1t+OBjeOBpuOBhOOCi+aZgumWk+OBr+W4uOOBq+mgreOBruS4reOBp+S9leOBi+OCkuiAg+OBiOOBhOOCi+OCiOOBhuOBqueKtuaFi+OBp+OBmeOAggrmhI/orZjjgYzlhoXjgavlkJHjgYTjgabjgYTjgovmmYLplpPjgYzplbfjgYTjga7jgafjgIHlraTni6zjgpLlpb3jgoDjgoLjga7jgajoqqTop6PjgZXjgozjgovjgZPjgajjgYzjgYLjgorjgb7jgZnjgILjgZfjgYvjgZflrp/pmpvjgavjga/jgZ3jgYbjgafjga/jgarjgY/jgIHkurrjgajjga7kuqTmtYHjgpLmpb3jgZfjgb/jgb7jgZnjgIIK44Gd44Gu5aSW5Lqk5oCn44Gu5Y2B5pWw5YCN44Gg44GR44CB5YaF5ZCR5oCn44KS5oyB44Gh5ZCI44KP44Gb44Gm44GE44G+44GZ44CCCgoqKuaOoue0ouWeizogNzIlKiog44Go44GE44GG44Gu44KC44CB56eB44Gu5oCn5qC844KS6KGo44GX44Gm44GE44KL44Go5oCd44GE44G+44GZ44CCICAK6Ieq5YiG44KS5oiQ6ZW344GV44Gb44Gm44GP44KM44KL44KC44Gu44KE44CB5paw44Gf44Gq55m66KaL44O75a2m57+S44KS5aW944G/44G+44GZ44CC44Gd44GG44GE44Gj44Gf44KC44Gu44Gv5o6i57Si55qE44Gq6Kmm6KGM44KE6KGM5YuV44GM44KC44Gf44KJ44GX44Gm44GP44KM44KL44Go6ICD44GI44Gm44GE44G+44GZ44CCICAK44G+44Gf44CB5LyR5pel44Gu6YGO44GU44GX5pa544Gr44GX44Gm44G/44Gm44KC44CB5LqL5YmN44Gr6KiI55S744KS56uL44Gm44Gm6KGM5YuV44GZ44KL44KI44KK44KC44CB44Gd44Gu5pmC44Gu5rCX5YiG44KE6IiI5ZGz44Gr5b6T44Gj44Gm5L2V44GL44KS44GZ44KL44GT44Go44KS5aW944G/44G+44GZ44CCCgojIyDotqPlkbMKCui2o+WRs+OCkuOBhOOBj+OBpOOBi+e0ueS7i+OBl+OBvuOBmeOAggoKIyMjIOOCsuODvOODoAoK44Ky44O844Og44GMMeeVquOBrui2o+WRs+OBp+OBmeOAguWkmuOBj+OBruaZgumWk+OCkuOCsuODvOODoOOBq+iyu+OChOOBl+OBvuOBmeOAgiAgCuOBk+OCjOOBvuOBp+OBq+OBruOCgeOCiui+vOOCk+OBoOOCsuODvOODoOOBrzogIApBcGV4IExlZ2VuZHMsIFZBTE9SQU5ULCBTcGxhdG9vbiwgTGlmZSBpcyBTdHJhbmdlLCBPdXRlciBXaWxkcywgTWluZWNyYWZ0LCDjgrzjg6vjg4Djga7kvJ3oqqwgQnJlYXRoIG9mIHRoZSBXaWxkLCDjg53jgrHjg4Pjg4jjg6Ljg7Pjgrnjgr/jg7zjgrfjg6rjg7zjgrogIArjgarjganjgafjgZnjgIIKCuOCq+OCuOODpeOCouODq+WvhOOCiuOBqkZQU+OChFRQU+OBjOWlveOBjeOBp+OBmeOAguS4iue0muiAheOBq+OBquOCi+OBvuOBp+ODl+ODrOOCpOOBmeOCi+OBk+OBqOOBjOWkmuOBj+OAgeacgOOCgumBiuOCk+OBp+OBhOOCi+OCuOODo+ODs+ODq+OBp+OBmeOAgiAgCuOBvuOBn+OAgeaYoOeUu+OBq+WFpeOCiui+vOOCk+OBoOOBi+OBruOCiOOBhuOBquayoeWFpeaEn+OBjOOBguOCi+OAgeengOmAuOOBquOCouODieODmeODs+ODgeODo+ODvOOCsuODvOODoOOCguWlveOBjeOBp+OBmeOAgiAgCuaOoue0ouWei+OBruOCsuODvOODoOOBq+OCguOBiuawl+OBq+WFpeOCiuOBruOCguOBruOBjOWkmuOBj+OAgeiHquWIhuOBruODmuODvOOCueOBp+S4lueVjOOCkuaOouaknOOBl+OAgeeZuuimi+OChOippuihjOmMr+iqpOOBi+OCieW+l+OCieOCjOOCi+WWnOOBs+OCkuWRs+OCj+OBhuOBk+OBqOOBjOWlveOBjeOBp+OBmeOAggoKIyMjIOODnOODvOODieOCsuODvOODoAoK5Lq644Go44Oc44O844OJ44Ky44O844Og44Gn6YGK44G244GT44Go44GM5aW944GN44Gn44CB5pWw5Y2B5YCL44Gu44Oc44O844OJ44Ky44O844Og44KS5omA5pyJ44GX44Gm44GE44G+44GZ44CCICAK5Y+L5Lq644KS6Ieq5a6F44Gr5oub44GE44Gm44Oc44O844OJ44Ky44O844Og44Gn6YGK44KT44Gg44KK44GX44G+44GZ44CCICAK54m544Gr5aW944GN44Gq44Gu44Gv44CB5Y2U5Yqb5Z6L44Gu44Oc44O844OJ44Ky44O844Og44Go44CB5o6i57Si5Z6L44Gu44Oc44O844OJ44Ky44O844Og44Gn44GZ44CCCgrku6XliY3lnKjnsY3jgZfjgabjgYTjgZ/kvIHmpa3jgavjga/jg5zjg7zjg4njgrLjg7zjg6Dpg6jjgajjgYTjgYbpg6jmtLvli5XjgYzjgYLjgorjgIHlnKjnsY3lvZPmmYLjgavjga/jgZ3jga7pg6jplbfjgpLli5njgoHjgabjgYTjgb7jgZfjgZ/jgIIgIArjg5zjg7zjg4njgrLjg7zjg6Djga7lsILploDlrrbjgajjgZfjgabjgIHmlrDogZ7npL7jgYvjgonlj5bmnZDjgpLlj5fjgZHjgZ/jgZPjgajjgoLjgYLjgorjgb7jgZnjgIIKCiMjIyDjgrnjgq3jg7wKCjI15q2z44GU44KN44Gr44K544Kt44O844KS5aeL44KB44CB44Gd44KM44GL44KJ44Gv5q+O5bm05Yas44GM5p2l44KL44Gu44KS5qW944GX44G/44Gr44GX44Gm44GE44G+44GZ44CCICAK44OV44Oq44O844Op44Kk44OJ44Gr5oan44KM44Gm44GE44Gm44CB44GE44Gk44GL44OQ44OD44Kv44Kr44Oz44OI44Oq44O844K544Kt44O844Gr5oyR5oim44GX44Gf44GE44Go5oCd44Gj44Gm44GE44G+44GZ44CCICAK5pyA6L+R5qW944GX44KT44Gn44GE44KL44Gu44Gv44K144Kk44OJ44Kr44Oz44OI44Oq44O844Gn44Gu44OE44Oq44O844Op44Oz44Gn44GZ44CC54m544Gr44OR44Km44OA44O844K544OO44O844GM5aW944GN44Gn44GZ44CCICAK44G+44Gf44CB44K544Kt44O85aC044Gu44OR44O844Kv44Gn44K444Oj44Oz44OX44GX44Gf44KK44CB44Kw44Op44Km44Oz44OJ44OI44Oq44OD44Kv44KS44GX44Gf44KK44GZ44KL44Gq44Gp44CB44OV44Oq44O844K544K/44Kk44Or44K544Kt44O844KC57e057+S5Lit44Gn44GZ44CCCgojIyMg5ryr55S744O744Ki44OL44Oh44O744OJ44Op44Oe44O75pig55S7CgrnibnjgasyMOS7o+WJjeWNiuOBvuOBp+OBr+OCiOOBj+imi+OBpuOBhOOBvuOBl+OBn+OAggoK5aW944GN44Gq5ryr55S744O744Ki44OL44OhOiAgCumAsuaSg+OBruW3qOS6uiwg44Ov44O844Or44OJ44OI44Oq44Ks44O8LCDjg4Tjg5DjgrUsIHh4eEhPTElDLCDmlLvmrrvmqZ/li5XpmoosIOW3puWIqeOBjeOBruOCqOODrOODsywg44OX44Op44ON44OG44K5LCDjgrzjg7zjgqzjg5rjgqTjg7MsIOmLvOOBrumMrOmHkeihk+W4qywg6J+y5birLCDogbLjga7lvaIsIOOCteODnuODvOOCv+OCpOODoOODrOODs+ODgCwg6Zu76ISz44Kz44Kk44OrLCDjg5XjgqHjgqTjgqLjg5Hjg7Pjg4EsIOmiqOOBruiwt+OBruODiuOCpuOCt+OCqwoK5aW944GN44Gq44OJ44Op44OeOiAgCk5PUk1BTCBQRU9QTEUsIE1yLiBSb2JvdCwgU2lsaWNvbiBWYWxsZXksIOODqeODluODm+OCueODlOOCv+ODq+OBuOOCiOOBhuOBk+OBnSwgVXBsb2FkLCDjg5fjg6njg4Pjgrfjg6XjgqLjg4Pjg5fjg6njgqTjg5UsIFRFSCBCT1lTLCDkuInkvZMgIAoo54m544GrIFtOT1JNQUwgUEVPUExFIOOBr+awl+OBq+WFpeOCiuOBmeOBjuOBpuaEn+aDs+aWh+OCkuabuOOBhOOBn10oL2xpZmUtYmxvZy8yMDI1LW5vcm1hbGUtcGVvcGxlKeOBu+OBqeOBp+OBmeOAgikKCuWlveOBjeOBquaYoOeUuzogIArjg5njg7Pjgrjjg6Pjg5/jg7Pjg7vjg5Djg4jjg7Mg5pWw5aWH44Gq5Lq655SfLCBCZWZvcmUgU3Vuc2V0LCDjg4/jg6rjg7zjg53jg4Pjgr/jg7wsIOOCpOODs+OCu+ODl+OCt+ODp+ODsywg44Kk44Of44OG44O844K344On44Oz44Ky44O844Og44CB44GN44G/44Gu6ImyLCDjg4/jg7Pjgqzjg7zjg7vjgrLjg7zjg6AsIOaZguOCkuOBi+OBkeOCi+WwkeWlswoK54m544Gr44CB5Lq644Gu5LiA55Sf44KS5o+P44GE44Gf5L2c5ZOB44KE44CB6Ieq5LuW44Gu5rCX5oyB44Gh44KE56uL5aC044KS6ICD44GI44GV44Gb44KJ44KM44KL5L2c5ZOB44GM5aW944GN44Gn44GZ44CCICAK44G+44Gf44CBU0bjgoTjg5XjgqHjg7Pjgr/jgrjjg7zjga7kuJbnlYzoprPjgavprYXkuobjgZXjgozjgovjgZPjgajjgYzlpJrjgYTjgafjgZnjgIIKCiMjIyDpn7Pmpb0KCuWun+OBr+mfs+alveOBr+OBguOBvuOCiuiBtOOBi+OBquOBhOOBruOBp+OBmeOBjOOAgeWlveOBjeOBquOCouODvOODhuOCo+OCueODiOOBrzogIApBVVJPUkEsIOODk+ODquODvOODu+OCouOCpOODquODg+OCt+ODpeOAgeOBmuOBo+OBqOecn+WknOS4reOBp+OBhOOBhOOBruOBqwrjgafjgZnjgIIgIArjgZPjga4z5Lq644Gv44Gd44KM44Gq44KK44Gr6IGe44GN6L6844KT44Gg5pmC5pyf44GM44GC44KK44G+44GZ44CCCgpBVVJPUkEg44Gv44Op44Kk44OW44Kz44Oz44K144O844OI44Gr6KGM44Gj44Gf44GT44Go44GM44GC44KK44CB44Gd44Gu5oSf5YuV44GM5b+Y44KM44KJ44KM44G+44Gb44KT44CCICAKKOOBk+OBrjHluqbjgZfjgYvjg6njgqTjg5bjgavooYzjgaPjgZ/jgZPjgajjga/jgarjgYTjga7jgafjgZnjgYwpCgrku5bjgavjga/jgIHjgrLjg7zjg6Djga7jgrXjgqbjg7Pjg4njg4jjg6njg4Pjgq/jgYzlpb3jgY3jgafjgojjgY/ogbTjgY3jgb7jgZnjgIIgIApTcGxhdG9vbiAyIOOBruOCteOCpuODs+ODieODiOODqeODg+OCr+OBr+eJueOBq+OBiuawl+OBq+WFpeOCiuOBp+OBmeOAggoKIyMjIOODl+ODreOCsOODqeODn+ODs+OCsAoK44OX44Ot44Kw44Op44Of44Oz44Kw44Gv5aSn5a2m55Sf5pmC5Luj44GL44KJ44Gu6Laj5ZGz44Gn44GZ44CCCuWtpueUn+aZguS7o+OBr1BD44Ky44O844Og44Gu6KO95L2c44Gr5rKh6aCt44GX44Gm44GE44G+44GX44Gf44CCCgrnj77lnKjjga/jgIFXZWLjgrXjgqTjg4jjgIFXZWLjgqLjg5fjg6rjgrHjg7zjgrfjg6fjg7PjgIFpT1PjgqLjg5fjg6rjgrHjg7zjgrfjg6fjg7PjgarjganjgpLotqPlkbPjgafkvZzjgaPjgabjgYTjgb7jgZnjgIIKCuOBk+OBriBIYWhuYWggQ2hyb25pY2xlIOOBruOCteOCpOODiOOCguengeOBjOS9nOOCiuOAgeOBneOCjOOBq+OBryBFbG0g44Go44GE44GG44OX44Ot44Kw44Op44Of44Oz44Kw6KiA6Kqe44KS5L2/44Gj44Gm44GE44G+44GZ44CCCkVsbSDjga/np4Hjga7mnIDjgoLlpb3jgY3jgarjg5fjg63jgrDjg6njg5/jg7PjgrDoqIDoqp7jgafjgZnjgIIKCiMjIOiBt+alrQoK44OX44Ot44Kw44Op44Of44Oz44Kw44Gv6Laj5ZGz44Gn44KC44GC44KK44CB5LuV5LqL44Gn44KC44GC44KK44G+44GZ44CCCui2o+WRs+OBoOOBi+OCieS7leS6i+OBq+OBl+OBn+OCiOOBhuOBquOCguOBruOBp+OBmeOAguOBk+OBruiBt+alreOBjOOBk+OBruS4luOBq+WtmOWcqOOBl+OBpuOBhOOBpuiJr+OBi+OBo+OBn+OBp+OBmeOAggoK44Gk44G+44KK6IG35qWt44Gv44OX44Ot44Kw44Op44Oe44O844Gn44GZ44Gt44CC44OX44Ot44Kw44Op44Oe44O844Gu5Lit44Gn44KC44CB44KI44KK6Kmz57Sw44Gr44GvICJXZWLjg5Xjg6vjgrnjgr/jg4Pjgq/jgqjjg7Pjgrjjg4vjgqIiIOOBqOWRvOOBsOOCjOOCi+iBt+alreOBp+OBmeOAggoK44OX44Ot44Kw44Op44Of44Oz44Kw44KS44GX44Gm44CBV2Vi44K144Kk44OI44KEV2Vi44Ki44OX44Oq44Kx44O844K344On44Oz44KS5L2c44KK44CB6YGL55So44GZ44KL44Gu44GM5LuV5LqL44Gn44GZ44CCCgrjgZPjgZPjgafoqbPntLDjgavov7DjgbnjgabjgoLjgbvjgajjgpPjganjga7kurrjgavjga/kvJ3jgo/jgonjgarjgYTjgajmgJ3jgYbjga7jgafnnIHjgY3jgb7jgZnjgIIgIArjgojjgoroqbPjgZfjgYTmg4XloLHjgpLnn6XjgorjgZ/jgYTmlrnjga/jgIHogbfli5nntYzmrbTmm7jjgpLlhazplovjgZnjgovkuojlrprjgarjga7jgafjgZ3jgaHjgonjgpLjgYrlvoXjgaHjgY/jgaDjgZXjgYTjgIIKABrljp/kupUg5aSP5qi5AUhXZWLjg5Xjg6vjgrnjgr/jg4Pjgq/jgqjjg7Pjgrjjg4vjgqIOZGVmYXVsdAwMZ2l0aHViMmh0dHBzOi8vZ2l0aHViLmNvbS9oYWhuYWgCeDJodHRwczovL3guY29tL3N1cGVyaGFobmFoEGZhY2Vib29rUmh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9zaGFyZS8xVDlLaVdtZnJMEmluc3RhZ3JhbUhodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL2hhaG5haDg3ODcOeW91dHViZUpodHRwczovL3d3dy55b3V0dWJlLmNvbS9AaGFobmFoZ2FtaW5nDHR3aXRjaDxodHRwczovL3d3dy50d2l0Y2gudHYvaGFobmFoODcBMDIwMjUtMDItMjNUMDA6MDA6MDAuMDAwWgEB2GDjg6vjg7zjg6zjg4Pjg4jjga7mraLjgb7jgovnm67jgpLmk43kvZzjgZnjgovjgZPjgajjgYzjgafjgY3jgovjgIHjgZ3jgpPjgarjg6vjg7zjg6zjg4Pjg4jjgaDjgILmgqrkuovjgoTkurrjgpLlgrfjgaTjgZHjgovjgZPjgajjgavjga/kvb/jgo/jgarjgYTjgZPjgajjgIIBdi9pbWFnZXMvdGVjaC1ibG9nLzIwMTgtdW5mYWlyLXJvdWxldHRlL3VuZmFpci1yb3VsZXR0ZS5hdmlmAQAA/RZ98CgyMDE4LXVuZmFpci1yb3VsZXR0ZQIA/RZ98AD9FpAmBB51bmZhaXItcm91bGV0dGUYaGFobmFoJ3MtYXBwnFVuZmFpciBSb3VsZXR0ZSA6IOOCpOODs+ODgeOCreOBp+OBjeOCi+ODq+ODvOODrOODg+ODiOOCouODl+ODquOCkuS9nOaIkOOBl+OBnwEAAP0WkCYA</script>
    <script type="module" crossorigin src="/assets/index-BL8LVoMj.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-BCXISAvc.css">
  </head>
  <body>
    <div data-url="" display="none"></div>
    <div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between font-sans"><header class="flex items-center justify-between py-10"><div><a aria-label="Hahnah Chronicle" href="/"><div class="flex items-center justify-between gap-4"><img height="32" src="/images/symbols-and-logos/symbol.svg" width="32"><div class="h-6 text-2xl font-semibold dark:text-white">Hahnah Chronicle</div></div></a></div><nav class="flex items-center leading-5 space-x-4 sm:space-x-6"><a class="hidden sm:block font-medium text-gray-900 dark:text-gray-100 hover:underline decoration-primary-500" elm-pages:prefetch="" href="/apps/">Apps</a><a class="hidden sm:block font-medium text-gray-900 dark:text-gray-100 hover:underline decoration-primary-500" elm-pages:prefetch="" href="/about/">About</a><a class="hidden sm:block font-medium text-gray-900 dark:text-gray-100 hover:underline decoration-primary-500" elm-pages:prefetch="" href="/tech-blog/">Tech Blog</a><a class="hidden sm:block font-medium text-gray-900 dark:text-gray-100 hover:underline decoration-primary-500" elm-pages:prefetch="" href="/life-blog/">Life Blog</a><a class="hidden sm:block font-medium text-gray-900 dark:text-gray-100 hover:underline decoration-primary-500" elm-pages:prefetch="" href="/tags/">Tags</a><button class="sm:hidden" aria-label="Toggle Menu"><svg class="text-gray-900 dark:text-gray-100 h-8 w-8" fill="currentColor" viewBox="0 0 20 20"><path clip-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" fill-rule="evenodd"></path></svg></button><div class="fixed left-0 top-0 z-10 h-full w-full transform opacity-95 dark:opacity-[0.98] bg-white duration-300 ease-in-out dark:bg-gray-950 translate-x-full"><div class="flex justify-end"><button class="mr-8 mt-11 h-8 w-8" aria-label="Toggle Menu"><svg class="text-gray-900 dark:text-gray-100" fill="currentColor" viewBox="0 0 20 20"><path clip-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" fill-rule="evenodd"></path></svg></button></div><div class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" elm-pages:prefetch="" href="/">Home</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" elm-pages:prefetch="" href="/apps/">Apps</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" elm-pages:prefetch="" href="/about/">About</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" elm-pages:prefetch="" href="/tech-blog/">Tech Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" elm-pages:prefetch="" href="/life-blog/">Life Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" elm-pages:prefetch="" href="/tags/">Tags</a></div></div></div></nav></header><main class="w-full mb-auto"><div><div class="max-w-[65ch] m-auto space-y-1 xl:text-xl dark:border-gray-700"><div><h1 class="mt-8 pb-4 font-bold text-3xl md:text-5xl text-gray-900 dark:text-gray-100">Elmで開発したルーレットアプリの実装解説</h1><dl class="max-w-[65ch] py-4 xl:pb-8 xl:pt-12"><dt class="sr-only">Authors</dt><dd class="border-l-4 border-primary-500 pl-4 flex"><div class="flex -space-x-2"><img class="h-12 w-12 rounded-full hidden sm:block" style="color:transparent;" alt="avatar" data-nimg="1" decoding="async" height="38" loading="lazy" src="/images/authors/natsuki-harai.avif" width="38"></div><div class="flex flex-col justify-around items-start sm:pl-4"><span class="text-lg font-bold text-black dark:text-white">原井 夏樹</span><div class="flex flex-wrap space-x-4 text-base"><dl><dt class="sr-only">Published on</dt><dd class="leading-6 text-gray-500 dark:text-gray-400"><time datetime="2018-12-01">2018年12月1日</time></dd></dl><dl><dt class="sr-only">Updated on</dt><dd class="leading-6 text-gray-500 dark:text-gray-400"><div class="flex items-center"><svg class="fill-current text-gray-500 dark:text-gray-400 h-4 w-4" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M136,80v43.47l36.12,21.67a8,8,0,0,1-8.24,13.72l-40-24A8,8,0,0,1,120,128V80a8,8,0,0,1,16,0Zm88-24a8,8,0,0,0-8,8V82c-6.35-7.36-12.83-14.45-20.12-21.83a96,96,0,1,0-2,137.7,8,8,0,0,0-11-11.64A80,80,0,1,1,184.54,71.4C192.68,79.64,199.81,87.58,207,96H184a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V64A8,8,0,0,0,224,56Z"></path></svg><time datetime="2025-04-06">2025年4月6日</time></div></dd></dl></div></div></dd></dl><div class="flex flex-wrap space-x-4 sm:space-x-2"><a class="text-sm font-medium uppercase text-primary-700 dark:text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" elm-pages:prefetch="" href="/tags/unfair-roulette/">unfair-roulette</a><a class="text-sm font-medium uppercase text-primary-700 dark:text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" elm-pages:prefetch="" href="/tags/hahnah-s-app/">hahnah&#039;s-app</a><a class="text-sm font-medium uppercase text-primary-700 dark:text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" elm-pages:prefetch="" href="/tags/elm/">elm</a></div></div><div class="w-full"><div class="relative mt-6 -mx-6 md:-mx-8 2xl:-mx-24"><div class="aspect-2/1 w-full relative"><img class="object-cover" style="color:transparent;height:100%;inset:0px;position:absolute;width:100%;" alt="Elmで開発したルーレットアプリの実装解説" data-nimg="fill" decoding="async" loading="lazy" sizes="100vw" src="/images/tech-blog/2018-unfair-roulette-technology/with-pc.avif"></div></div></div></div><div class="mx-auto prose-p:my-4 prose lg:prose-xl dark:prose-invert"><p class="font-bold">Unfair Roulette は止まる目を操作することができる、そんなルーレットだ。それをElmがどのように実装したのかを解説する。</p></div><article class="mx-auto prose lg:prose-xl dark:prose-invert"><p>以下の記事で説明しているルーレットアプリをElmで作成した。<br><a href="https://hahnah.github.io/tech-blog/2018-unfair-roulette/">Unfair Roulette : インチキできるルーレットアプリを作成した</a></p><p>どのような実装になっているかをソースコードや図表とともに解説する。</p><h2 id="1-アプリについて"><a class="not-prose group " aria-label="Permalink for 1. アプリについて" href="#1-アプリについて"><span class="group-hover:underline decoration-primary-500">1. アプリについて</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h2><ul><li>アプリ名 : <a href="https://hahnah.github.io/unfair-roulette/">Unfair Roulette</a> 👈このリンクからアプリを試せる</li><li>アプリ概要 : <a href="https://hahnah.github.io/tech-blog/2018-unfair-roulette/">Unfair Roulette : インチキできるルーレットアプリを作成した</a></li><li>開発言語 : Elm 0.19</li><li>ソースコード : <a href="https://github.com/hahnah/unfair-roulette/tree/1.0.0">https://github.com/hahnah/unfair-roulette/tree/1.0.0</a></li></ul><h2 id="2-状態遷移の仕様"><a class="not-prose group " aria-label="Permalink for 2. 状態遷移の仕様" href="#2-状態遷移の仕様"><span class="group-hover:underline decoration-primary-500">2. 状態遷移の仕様</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h2><p>このアプリは複数の状態(シーン)からなり、状態受け取ったメッセージの組み合わせに応じて処理がなされる。</p><h4 id="状態遷移図"><a class="not-prose group " aria-label="Permalink for 状態遷移図" href="#状態遷移図"><span class="group-hover:underline decoration-primary-500">状態遷移図</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h4><p>次の状態遷移図では、各状態において、メッセージ(青矢印)が出された場合にどの状態に遷移するかを示している。<br>メッセージに応じて状態が変化したり、状態はそのままでもViewが更新されたりする。<br>初期状態は図中左端の<code>EditingRoulette</code>である。</p><p><img alt="state-transtion-diagram" src="/images/tech-blog/2018-unfair-roulette-technology/state-transition-diagram.avif"></p><p>それぞれの状態とメッセージの意味は次の通り。</p><h4 id="状態"><a class="not-prose group " aria-label="Permalink for 状態" href="#状態"><span class="group-hover:underline decoration-primary-500">状態</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h4><table><thead><tr><th>状態</th><th>説明</th></tr></thead><tbody><tr><td>EditingRoulette</td><td>ルーレット（を構成するアイテム）を編集している状態</td></tr><tr><td>RouletteSpinning</td><td>ルーレットが回転している状態</td></tr><tr><td>RouletteSpinningTowardsStop</td><td>ルーレットが停止のタイミングを図りながら回転している状態</td></tr><tr><td>RouletteStopped</td><td>ルーレットが停止した状態</td></tr><tr><td>ResultShowed</td><td>ルーレットの結果が表示された状態</td></tr></tbody></table><h4 id="メッセージ"><a class="not-prose group " aria-label="Permalink for メッセージ" href="#メッセージ"><span class="group-hover:underline decoration-primary-500">メッセージ</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h4><table><thead><tr><th>メッセージ</th><th>メッセージを受け取った際の処理</th></tr></thead><tbody><tr><td>Increment</td><td>指定されたアイテムの設定値を1増やす</td></tr><tr><td>Decrement</td><td>指定されたアイテムの設定値を1減らす</td></tr><tr><td>ChangeLabel</td><td>指定されたアイテムのラベルを、入力欄の文字列に変更する</td></tr><tr><td>ChangeCount</td><td>指定されたアイテムの設定値を、入力欄の数値に変更する</td></tr><tr><td>Clear</td><td>指定されたアイテムの設定値とラベルをクリアする</td></tr><tr><td>Cheat</td><td>指定されたアイテムでルーレットが停止するように設定する</td></tr><tr><td>OnClickStart</td><td>ルーレット回転開始の条件を満たしていれば StartSpinningRoulette メッセージを出す</td></tr><tr><td>StartSpinningRoulette</td><td>ルーレットの回転を開始する</td></tr><tr><td>SpinRoulette</td><td>ルーレットの回転を進める。&lt;br&gt;ルーレットが停止条件を満たしていれば StopRoulette メッセージを出す。&lt;br&gt;(<code>SpinRoulette</code>メッセージは、Subscription により<code>RouletteSpinning</code>or<code>RouletteSpinningTowardsStop</code>状態の場合に定期的に出される)</td></tr><tr><td>AdjustDecayRateForSmoothStop</td><td>ルーレットの回転角速度の減衰率を調整する</td></tr><tr><td>StopRoulette</td><td>ルーレットの回転を停止する</td></tr><tr><td>ShowResult</td><td>ルーレットの結果をダイアログで表示する</td></tr><tr><td>HideResult</td><td>ルーレットの結果ダイアログを閉じる</td></tr></tbody></table><p>NOTE: 厳密には、例えば<code>Increment</code>は<code>Increment Counter</code>という型をしているが省略して表記している。他のメッセージも同様。</p><h2 id="3-各処理の実装詳細"><a class="not-prose group " aria-label="Permalink for 3. 各処理の実装詳細" href="#3-各処理の実装詳細"><span class="group-hover:underline decoration-primary-500">3. 各処理の実装詳細</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h2><p>一部の処理についてどう実装したかを紹介する。<br>前提として、各処理では以下に定義する型が登場する。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh-comm">-- MODEL</span>
</div><div class="elmsh-line" data-elmsh-lc="2">
</div><div class="elmsh-line" data-elmsh-lc="3"><span class="elmsh3 elmsh-elm-k">type</span> <span class="elmsh3 elmsh-elm-k">alias</span> <span class="elmsh6 elmsh-elm-c">Model</span> <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="4">  <span class="elmsh4 elmsh-elm-gs">{</span> scene<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Scene</span>
</div><div class="elmsh-line" data-elmsh-lc="5">  <span class="elmsh4 elmsh-elm-gs">,</span> counters<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Counters</span>
</div><div class="elmsh-line" data-elmsh-lc="6">  <span class="elmsh4 elmsh-elm-gs">,</span> maxCounters<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Int</span>
</div><div class="elmsh-line" data-elmsh-lc="7">  <span class="elmsh4 elmsh-elm-gs">,</span> rotation<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Float</span> <span class="elmsh-comm">-- in percentage</span>
</div><div class="elmsh-line" data-elmsh-lc="8">  <span class="elmsh4 elmsh-elm-gs">,</span> rotationVelocity<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Float</span>
</div><div class="elmsh-line" data-elmsh-lc="9">  <span class="elmsh4 elmsh-elm-gs">,</span> decayRate<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Float</span>
</div><div class="elmsh-line" data-elmsh-lc="10">  <span class="elmsh4 elmsh-elm-gs">,</span> goalRotation<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Float</span>
</div><div class="elmsh-line" data-elmsh-lc="11">  <span class="elmsh4 elmsh-elm-gs">,</span> pointedCounter<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Counter</span>
</div><div class="elmsh-line" data-elmsh-lc="12">  <span class="elmsh4 elmsh-elm-gs">,</span> cheatedGoalRange<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Maybe</span> <span class="elmsh6 elmsh-elm-c">Range</span>
</div><div class="elmsh-line" data-elmsh-lc="13">  <span class="elmsh4 elmsh-elm-gs">}</span>
</div><div class="elmsh-line" data-elmsh-lc="14">
</div><div class="elmsh-line" data-elmsh-lc="15"><span class="elmsh3 elmsh-elm-k">type</span> <span class="elmsh3 elmsh-elm-k">alias</span> <span class="elmsh6 elmsh-elm-c">Counters</span> <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">List</span> <span class="elmsh6 elmsh-elm-c">Counter</span>
</div><div class="elmsh-line" data-elmsh-lc="16">
</div><div class="elmsh-line" data-elmsh-lc="17"><span class="elmsh3 elmsh-elm-k">type</span> <span class="elmsh3 elmsh-elm-k">alias</span> <span class="elmsh6 elmsh-elm-c">Counter</span> <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="18">  <span class="elmsh4 elmsh-elm-gs">{</span> id<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Int</span>
</div><div class="elmsh-line" data-elmsh-lc="19">  <span class="elmsh4 elmsh-elm-gs">,</span> label<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">String</span>
</div><div class="elmsh-line" data-elmsh-lc="20">  <span class="elmsh4 elmsh-elm-gs">,</span> count<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Int</span>
</div><div class="elmsh-line" data-elmsh-lc="21">  <span class="elmsh4 elmsh-elm-gs">}</span>
</div><div class="elmsh-line" data-elmsh-lc="22">
</div><div class="elmsh-line" data-elmsh-lc="23"><span class="elmsh3 elmsh-elm-k">type</span> <span class="elmsh3 elmsh-elm-k">alias</span> <span class="elmsh6 elmsh-elm-c">FanShape</span> <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="24">  <span class="elmsh4 elmsh-elm-gs">{</span> offset<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Float</span>
</div><div class="elmsh-line" data-elmsh-lc="25">  <span class="elmsh4 elmsh-elm-gs">,</span> percentage<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Float</span>
</div><div class="elmsh-line" data-elmsh-lc="26">  <span class="elmsh4 elmsh-elm-gs">,</span> color<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">String</span>
</div><div class="elmsh-line" data-elmsh-lc="27">  <span class="elmsh4 elmsh-elm-gs">}</span>
</div><div class="elmsh-line" data-elmsh-lc="28">
</div><div class="elmsh-line" data-elmsh-lc="29"><span class="elmsh3 elmsh-elm-k">type</span> <span class="elmsh3 elmsh-elm-k">alias</span> <span class="elmsh6 elmsh-elm-c">Color</span> <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">String</span>
</div><div class="elmsh-line" data-elmsh-lc="30">
</div><div class="elmsh-line" data-elmsh-lc="31"><span class="elmsh3 elmsh-elm-k">type</span> <span class="elmsh3 elmsh-elm-k">alias</span> <span class="elmsh6 elmsh-elm-c">Colors</span> <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">List</span> <span class="elmsh6 elmsh-elm-c">Color</span>
</div><div class="elmsh-line" data-elmsh-lc="32">
</div><div class="elmsh-line" data-elmsh-lc="33"><span class="elmsh3 elmsh-elm-k">type</span> <span class="elmsh6 elmsh-elm-c">Scene</span>
</div><div class="elmsh-line" data-elmsh-lc="34">  <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">EditingRoulette</span>
</div><div class="elmsh-line" data-elmsh-lc="35">  <span class="elmsh3 elmsh-elm-bs">|</span> <span class="elmsh6 elmsh-elm-c">RouletteSpinning</span>
</div><div class="elmsh-line" data-elmsh-lc="36">  <span class="elmsh3 elmsh-elm-bs">|</span> <span class="elmsh6 elmsh-elm-c">RouletteSpinningTowardsStop</span>
</div><div class="elmsh-line" data-elmsh-lc="37">  <span class="elmsh3 elmsh-elm-bs">|</span> <span class="elmsh6 elmsh-elm-c">RouletteStopped</span>
</div><div class="elmsh-line" data-elmsh-lc="38">  <span class="elmsh3 elmsh-elm-bs">|</span> <span class="elmsh6 elmsh-elm-c">ResultShowed</span>
</div><div class="elmsh-line" data-elmsh-lc="39">
</div><div class="elmsh-line" data-elmsh-lc="40"><span class="elmsh3 elmsh-elm-k">type</span> <span class="elmsh3 elmsh-elm-k">alias</span> <span class="elmsh6 elmsh-elm-c">Range</span> <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="41">  <span class="elmsh4 elmsh-elm-gs">{</span> min<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Float</span>
</div><div class="elmsh-line" data-elmsh-lc="42">  <span class="elmsh4 elmsh-elm-gs">,</span> max<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Float</span>
</div><div class="elmsh-line" data-elmsh-lc="43">  <span class="elmsh4 elmsh-elm-gs">}</span>
</div><div class="elmsh-line" data-elmsh-lc="44">
</div><div class="elmsh-line" data-elmsh-lc="45"><span class="elmsh3 elmsh-elm-k">type</span> <span class="elmsh3 elmsh-elm-k">alias</span> <span class="elmsh6 elmsh-elm-c">RotationRange</span> <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="46"> <span class="elmsh4 elmsh-elm-gs">{</span> min<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Float</span>
</div><div class="elmsh-line" data-elmsh-lc="47"> <span class="elmsh4 elmsh-elm-gs">,</span> max<span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh6 elmsh-elm-c">Float</span>
</div><div class="elmsh-line" data-elmsh-lc="48"> <span class="elmsh4 elmsh-elm-gs">}</span></div></code></pre></div><p>これより先を読む上で把握しておいてほしいのは<code>Counter</code>型と<code>FanShape</code>型だ。</p><ul><li><code>Counter</code>はルーレットを構成する選択肢の呼び名と数値(例えば票数)を表す。ユーザーの操作で編集される。</li><li><code>FanShape</code>は、ルーレットを構成する扇形(の描画に必要な情報)を表す。<code>Counter</code>を用いて算出される。</li></ul><p>これまで、この記事中でルーレットの<code>アイテム</code>と呼んでいたものは<code>Counter</code>であり<code>FanShape</code>である。</p><h3 id="3-1-ルーレットの編集処理"><a class="not-prose group " aria-label="Permalink for 3.1 ルーレットの編集処理" href="#3-1-ルーレットの編集処理"><span class="group-hover:underline decoration-primary-500">3.1 ルーレットの編集処理</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h3><p><img alt="editing-roulette" src="/images/tech-blog/2018-unfair-roulette-technology/editing-roulette.avif"></p><h4 id="increment-指定されたアイテムの設定値を1増やす"><a class="not-prose group " aria-label="Permalink for Increment : 指定されたアイテムの設定値を1増やす" href="#increment-指定されたアイテムの設定値を1増やす"><span class="group-hover:underline decoration-primary-500">Increment : 指定されたアイテムの設定値を1増やす</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h4><p><code>model</code>には<code>Counters</code>型の値を持たせており、指定されたアイテム(<code>counter</code>)だけを1増やした<code>Counters</code>値を計算し、新しい<code>Model</code>を返す。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">update</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Msg</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Model</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> (<span class="elmsh4 elmsh-elm-ts">Model</span>, <span class="elmsh4 elmsh-elm-ts">Cmd</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>)
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">update</span> msg model <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">case</span> <span class="elmsh3 elmsh-elm-bs">(</span>msg<span class="elmsh4 elmsh-elm-gs">,</span> model<span class="elmsh1 elmsh-elm-n">.</span>scene<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-k">of</span>
</div><div class="elmsh-line" data-elmsh-lc="4">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">Increment</span> counter<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">EditingRoulette</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="5">      <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="6">        <span class="elmsh3 elmsh-elm-bs">(</span>front<span class="elmsh4 elmsh-elm-gs">,</span> back<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">=</span> separateIntoFrontAndBack model<span class="elmsh1 elmsh-elm-n">.</span>counters counter
</div><div class="elmsh-line" data-elmsh-lc="7">        updatedCounter <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh4 elmsh-elm-gs">{</span> counter <span class="elmsh3 elmsh-elm-bs">|</span> count <span class="elmsh3 elmsh-elm-bs">=</span> counter<span class="elmsh1 elmsh-elm-n">.</span>count <span class="elmsh3 elmsh-elm-bs">+</span> <span class="elmsh1 elmsh-elm-n">1</span><span class="elmsh4 elmsh-elm-gs">}</span>
</div><div class="elmsh-line" data-elmsh-lc="8">        updatedCounters <span class="elmsh3 elmsh-elm-bs">=</span> front <span class="elmsh3 elmsh-elm-bs">++</span> <span class="elmsh4 elmsh-elm-gs">[</span>updatedCounter<span class="elmsh4 elmsh-elm-gs">]</span> <span class="elmsh3 elmsh-elm-bs">++</span> back
</div><div class="elmsh-line" data-elmsh-lc="9">      <span class="elmsh3 elmsh-elm-k">in</span>
</div><div class="elmsh-line" data-elmsh-lc="10">        <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh4 elmsh-elm-gs">{</span> model <span class="elmsh3 elmsh-elm-bs">|</span> counters <span class="elmsh3 elmsh-elm-bs">=</span> updatedCounters <span class="elmsh4 elmsh-elm-gs">},</span> <span class="elmsh6 elmsh-elm-c">Cmd</span><span class="elmsh1 elmsh-elm-n">.</span>none<span class="elmsh3 elmsh-elm-bs">)</span></div></code></pre></div><p>ここで<code>separateIntoFrontAndBack</code>は、更新後の<code>Counters</code>値を計算するためのヘルパー関数である。</p><h4 id="decrement-指定されたアイテムの設定値を1減らす"><a class="not-prose group " aria-label="Permalink for Decrement : 指定されたアイテムの設定値を1減らす" href="#decrement-指定されたアイテムの設定値を1減らす"><span class="group-hover:underline decoration-primary-500">Decrement : 指定されたアイテムの設定値を1減らす</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h4><p>指定されたアイテム(<code>counter</code>)だけを1減らした<code>Counters</code>値を計算する。0以下にはならない。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">update</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Msg</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Model</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> (<span class="elmsh4 elmsh-elm-ts">Model</span>, <span class="elmsh4 elmsh-elm-ts">Cmd</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>)
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">update</span> msg model <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">case</span> <span class="elmsh3 elmsh-elm-bs">(</span>msg<span class="elmsh4 elmsh-elm-gs">,</span> model<span class="elmsh1 elmsh-elm-n">.</span>scene<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-k">of</span>
</div><div class="elmsh-line" data-elmsh-lc="4"><span class="elmsh-comm">-- (中略)</span>
</div><div class="elmsh-line" data-elmsh-lc="5">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">Decrement</span> counter<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">EditingRoulette</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="6">      <span class="elmsh3 elmsh-elm-k">if</span> <span class="elmsh1 elmsh-elm-n">0</span> <span class="elmsh3 elmsh-elm-bs">&lt;</span> counter<span class="elmsh1 elmsh-elm-n">.</span>count <span class="elmsh3 elmsh-elm-k">then</span>
</div><div class="elmsh-line" data-elmsh-lc="7">        <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="8">          <span class="elmsh3 elmsh-elm-bs">(</span>front<span class="elmsh4 elmsh-elm-gs">,</span> back<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">=</span> separateIntoFrontAndBack model<span class="elmsh1 elmsh-elm-n">.</span>counters counter
</div><div class="elmsh-line" data-elmsh-lc="9">          updatedCounter <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh4 elmsh-elm-gs">{</span> counter <span class="elmsh3 elmsh-elm-bs">|</span> count <span class="elmsh3 elmsh-elm-bs">=</span> counter<span class="elmsh1 elmsh-elm-n">.</span>count <span class="elmsh3 elmsh-elm-bs">-</span> <span class="elmsh1 elmsh-elm-n">1</span><span class="elmsh4 elmsh-elm-gs">}</span>
</div><div class="elmsh-line" data-elmsh-lc="10">          updatedCounters <span class="elmsh3 elmsh-elm-bs">=</span> front <span class="elmsh3 elmsh-elm-bs">++</span> <span class="elmsh4 elmsh-elm-gs">[</span>updatedCounter<span class="elmsh4 elmsh-elm-gs">]</span> <span class="elmsh3 elmsh-elm-bs">++</span> back
</div><div class="elmsh-line" data-elmsh-lc="11">        <span class="elmsh3 elmsh-elm-k">in</span>
</div><div class="elmsh-line" data-elmsh-lc="12">          <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh4 elmsh-elm-gs">{</span> model <span class="elmsh3 elmsh-elm-bs">|</span> counters <span class="elmsh3 elmsh-elm-bs">=</span> updatedCounters <span class="elmsh4 elmsh-elm-gs">},</span> <span class="elmsh6 elmsh-elm-c">Cmd</span><span class="elmsh1 elmsh-elm-n">.</span>none<span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="13">      <span class="elmsh3 elmsh-elm-k">else</span>
</div><div class="elmsh-line" data-elmsh-lc="14">        <span class="elmsh3 elmsh-elm-bs">(</span>model<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">Cmd</span><span class="elmsh1 elmsh-elm-n">.</span>none<span class="elmsh3 elmsh-elm-bs">)</span></div></code></pre></div><h4 id="changecount-指定されたアイテムの設定値を、入力欄の数値に変更する"><a class="not-prose group " aria-label="Permalink for ChangeCount : 指定されたアイテムの設定値を、入力欄の数値に変更する" href="#changecount-指定されたアイテムの設定値を、入力欄の数値に変更する"><span class="group-hover:underline decoration-primary-500">ChangeCount : 指定されたアイテムの設定値を、入力欄の数値に変更する</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h4><p><code>Increment</code>, <code>Decrement</code>1ずつしか増減されないが、<code>ChangeCount</code>では直接指定した数値に設定できる。数値入力欄への入力がされる度に<code>ChangeCount</code>がされる。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">update</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Msg</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Model</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> (<span class="elmsh4 elmsh-elm-ts">Model</span>, <span class="elmsh4 elmsh-elm-ts">Cmd</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>)
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">update</span> msg model <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">case</span> <span class="elmsh3 elmsh-elm-bs">(</span>msg<span class="elmsh4 elmsh-elm-gs">,</span> model<span class="elmsh1 elmsh-elm-n">.</span>scene<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-k">of</span>
</div><div class="elmsh-line" data-elmsh-lc="4"><span class="elmsh-comm">-- (中略)</span>
</div><div class="elmsh-line" data-elmsh-lc="5">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">ChangeCount</span> counter newCount<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">EditingRoulette</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="6">      <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="7">        <span class="elmsh3 elmsh-elm-bs">(</span>front<span class="elmsh4 elmsh-elm-gs">,</span> back<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">=</span> separateIntoFrontAndBack model<span class="elmsh1 elmsh-elm-n">.</span>counters counter
</div><div class="elmsh-line" data-elmsh-lc="8">        updatedCounter <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh4 elmsh-elm-gs">{</span> counter <span class="elmsh3 elmsh-elm-bs">|</span> count <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">String</span><span class="elmsh1 elmsh-elm-n">.</span>toInt newCount <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">Maybe</span><span class="elmsh1 elmsh-elm-n">.</span>withDefault <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh3 elmsh-elm-k">if</span> newCount <span class="elmsh3 elmsh-elm-bs">==</span> <span class="elmsh2 elmsh-elm-s">&quot;&quot;</span> <span class="elmsh3 elmsh-elm-k">then</span> <span class="elmsh1 elmsh-elm-n">0</span> <span class="elmsh3 elmsh-elm-k">else</span> counter<span class="elmsh1 elmsh-elm-n">.</span>count<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh4 elmsh-elm-gs">}</span>
</div><div class="elmsh-line" data-elmsh-lc="9">        updatedCounters <span class="elmsh3 elmsh-elm-bs">=</span> front <span class="elmsh3 elmsh-elm-bs">++</span> <span class="elmsh4 elmsh-elm-gs">[</span>updatedCounter<span class="elmsh4 elmsh-elm-gs">]</span> <span class="elmsh3 elmsh-elm-bs">++</span> back
</div><div class="elmsh-line" data-elmsh-lc="10">      <span class="elmsh3 elmsh-elm-k">in</span>
</div><div class="elmsh-line" data-elmsh-lc="11">        <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh4 elmsh-elm-gs">{</span> model <span class="elmsh3 elmsh-elm-bs">|</span> counters <span class="elmsh3 elmsh-elm-bs">=</span> updatedCounters <span class="elmsh4 elmsh-elm-gs">},</span> <span class="elmsh6 elmsh-elm-c">Cmd</span><span class="elmsh1 elmsh-elm-n">.</span>none<span class="elmsh3 elmsh-elm-bs">)</span></div></code></pre></div><p>(書いていて今更気付いたが、<code>Increment</code>と<code>Decrement</code>なんてメッセージは不要で、<code>ChangeCount</code>だけで全て担える。DRYしよう。)</p><h4 id="changelabel-指定されたアイテムのラベルを、入力欄の文字列に変更する"><a class="not-prose group " aria-label="Permalink for ChangeLabel : 指定されたアイテムのラベルを、入力欄の文字列に変更する" href="#changelabel-指定されたアイテムのラベルを、入力欄の文字列に変更する"><span class="group-hover:underline decoration-primary-500">ChangeLabel : 指定されたアイテムのラベルを、入力欄の文字列に変更する</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h4><p><code>ChangeCount</code>とほぼ同じ。指定されたアイテム(<code>counter</code>)のラベルを、入力文字列<code>newLabel</code>で置き換えた新しい<code>Model</code>値を返す。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">update</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Msg</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Model</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> (<span class="elmsh4 elmsh-elm-ts">Model</span>, <span class="elmsh4 elmsh-elm-ts">Cmd</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>)
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">update</span> msg model <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">case</span> <span class="elmsh3 elmsh-elm-bs">(</span>msg<span class="elmsh4 elmsh-elm-gs">,</span> model<span class="elmsh1 elmsh-elm-n">.</span>scene<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-k">of</span>
</div><div class="elmsh-line" data-elmsh-lc="4"><span class="elmsh-comm">-- (中略)</span>
</div><div class="elmsh-line" data-elmsh-lc="5">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">ChangeLabel</span> counter newLabel<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">EditingRoulette</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="6">      <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="7">        <span class="elmsh3 elmsh-elm-bs">(</span>front<span class="elmsh4 elmsh-elm-gs">,</span> back<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">=</span> separateIntoFrontAndBack model<span class="elmsh1 elmsh-elm-n">.</span>counters counter
</div><div class="elmsh-line" data-elmsh-lc="8">        updatedCounter <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh4 elmsh-elm-gs">{</span> counter <span class="elmsh3 elmsh-elm-bs">|</span> label <span class="elmsh3 elmsh-elm-bs">=</span> newLabel<span class="elmsh4 elmsh-elm-gs">}</span>
</div><div class="elmsh-line" data-elmsh-lc="9">        updatedCounters <span class="elmsh3 elmsh-elm-bs">=</span> front <span class="elmsh3 elmsh-elm-bs">++</span> <span class="elmsh4 elmsh-elm-gs">[</span>updatedCounter<span class="elmsh4 elmsh-elm-gs">]</span> <span class="elmsh3 elmsh-elm-bs">++</span> back
</div><div class="elmsh-line" data-elmsh-lc="10">      <span class="elmsh3 elmsh-elm-k">in</span>
</div><div class="elmsh-line" data-elmsh-lc="11">        <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh4 elmsh-elm-gs">{</span> model <span class="elmsh3 elmsh-elm-bs">|</span> counters <span class="elmsh3 elmsh-elm-bs">=</span> updatedCounters <span class="elmsh4 elmsh-elm-gs">},</span> <span class="elmsh6 elmsh-elm-c">Cmd</span><span class="elmsh1 elmsh-elm-n">.</span>none<span class="elmsh3 elmsh-elm-bs">)</span></div></code></pre></div><h4 id="clear-指定されたアイテムの設定値とラベルをクリアする"><a class="not-prose group " aria-label="Permalink for Clear : 指定されたアイテムの設定値とラベルをクリアする" href="#clear-指定されたアイテムの設定値とラベルをクリアする"><span class="group-hover:underline decoration-primary-500">Clear : 指定されたアイテムの設定値とラベルをクリアする</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h4><p>指定されたアイテムの、ラベルと設定値を<code>&quot;&quot;</code>(空文字)と<code>0</code>にした<code>Model</code>値を返す。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">update</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Msg</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Model</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> (<span class="elmsh4 elmsh-elm-ts">Model</span>, <span class="elmsh4 elmsh-elm-ts">Cmd</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>)
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">update</span> msg model <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">case</span> <span class="elmsh3 elmsh-elm-bs">(</span>msg<span class="elmsh4 elmsh-elm-gs">,</span> model<span class="elmsh1 elmsh-elm-n">.</span>scene<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-k">of</span>
</div><div class="elmsh-line" data-elmsh-lc="4"><span class="elmsh-comm">-- (中略)</span>
</div><div class="elmsh-line" data-elmsh-lc="5">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">Clear</span> counter<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">EditingRoulette</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="6">      <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="7">        <span class="elmsh3 elmsh-elm-bs">(</span>front<span class="elmsh4 elmsh-elm-gs">,</span> back<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">=</span> separateIntoFrontAndBack model<span class="elmsh1 elmsh-elm-n">.</span>counters counter
</div><div class="elmsh-line" data-elmsh-lc="8">        updatedCounter <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh4 elmsh-elm-gs">{</span> counter <span class="elmsh3 elmsh-elm-bs">|</span> count <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh1 elmsh-elm-n">0</span><span class="elmsh4 elmsh-elm-gs">,</span> label <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh2 elmsh-elm-s">&quot;&quot;</span> <span class="elmsh4 elmsh-elm-gs">}</span>
</div><div class="elmsh-line" data-elmsh-lc="9">        updatedCounters <span class="elmsh3 elmsh-elm-bs">=</span> front <span class="elmsh3 elmsh-elm-bs">++</span> <span class="elmsh4 elmsh-elm-gs">[</span>updatedCounter<span class="elmsh4 elmsh-elm-gs">]</span> <span class="elmsh3 elmsh-elm-bs">++</span> back
</div><div class="elmsh-line" data-elmsh-lc="10">      <span class="elmsh3 elmsh-elm-k">in</span>
</div><div class="elmsh-line" data-elmsh-lc="11">        <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh4 elmsh-elm-gs">{</span> model <span class="elmsh3 elmsh-elm-bs">|</span> counters <span class="elmsh3 elmsh-elm-bs">=</span> updatedCounters <span class="elmsh4 elmsh-elm-gs">},</span> <span class="elmsh6 elmsh-elm-c">Cmd</span><span class="elmsh1 elmsh-elm-n">.</span>none<span class="elmsh3 elmsh-elm-bs">)</span></div></code></pre></div><h3 id="3-2-ルーレットの描画処理"><a class="not-prose group " aria-label="Permalink for 3.2 ルーレットの描画処理" href="#3-2-ルーレットの描画処理"><span class="group-hover:underline decoration-primary-500">3.2 ルーレットの描画処理</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h3><p>ルーレットの描画（というより、扇形の描画）には、<a href="https://hahnah.github.io/tech-blog/2018-elm-svg-piechart/">[Elm] SVGで円グラフを表示する方法</a>の記事の方法を用いた。細部は異なるが、基本的なやり方は同じ。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">viewRoulette</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Counters</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Colors</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Float</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Html</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">viewRoulette</span> counters colors rotation <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="4">    counts <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>map <span class="elmsh3 elmsh-elm-bs">(\</span>counter <span class="elmsh3 elmsh-elm-bs">-&gt;</span> toFloat counter<span class="elmsh1 elmsh-elm-n">.</span>count<span class="elmsh3 elmsh-elm-bs">)</span> counters
</div><div class="elmsh-line" data-elmsh-lc="5">    total <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>sum counts
</div><div class="elmsh-line" data-elmsh-lc="6">    percentages <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>map <span class="elmsh3 elmsh-elm-bs">(\</span>count <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh1 elmsh-elm-n">100.0</span> <span class="elmsh3 elmsh-elm-bs">*</span> count <span class="elmsh3 elmsh-elm-bs">/</span> total<span class="elmsh3 elmsh-elm-bs">)</span> counts
</div><div class="elmsh-line" data-elmsh-lc="7">    offsets <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="8">      <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>foldl <span class="elmsh3 elmsh-elm-bs">(\</span>percentage acc <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>append acc <span class="elmsh4 elmsh-elm-gs">[</span><span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">Maybe</span><span class="elmsh1 elmsh-elm-n">.</span>withDefault <span class="elmsh1 elmsh-elm-n">0.0</span> <span class="elmsh3 elmsh-elm-bs">&lt;|</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>maximum acc<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">+</span> percentage<span class="elmsh4 elmsh-elm-gs">]</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh4 elmsh-elm-gs">[</span><span class="elmsh1 elmsh-elm-n">0.0</span><span class="elmsh4 elmsh-elm-gs">]</span> percentages
</div><div class="elmsh-line" data-elmsh-lc="9">        <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>map <span class="elmsh3 elmsh-elm-bs">((+)</span> rotation<span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="10">    fanShapes <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>map3 <span class="elmsh3 elmsh-elm-bs">(\</span>offset percentage color <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh6 elmsh-elm-c">FanShape</span> offset percentage color<span class="elmsh3 elmsh-elm-bs">)</span> offsets percentages colors
</div><div class="elmsh-line" data-elmsh-lc="11">  <span class="elmsh3 elmsh-elm-k">in</span>
</div><div class="elmsh-line" data-elmsh-lc="12">    svg
</div><div class="elmsh-line" data-elmsh-lc="13">      <span class="elmsh4 elmsh-elm-gs">[</span> viewBox <span class="elmsh2 elmsh-elm-s">&quot;0 0 63.6619772368 63.6619772368&quot;</span><span class="elmsh4 elmsh-elm-gs">,</span> width <span class="elmsh2 elmsh-elm-s">&quot;500px&quot;</span><span class="elmsh4 elmsh-elm-gs">,</span> style <span class="elmsh2 elmsh-elm-s">&quot;transform&quot;</span> <span class="elmsh2 elmsh-elm-s">&quot;rotate(90deg)&quot;</span> <span class="elmsh4 elmsh-elm-gs">]</span>
</div><div class="elmsh-line" data-elmsh-lc="14">      <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>append <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>map <span class="elmsh3 elmsh-elm-bs">(\</span>fanShape <span class="elmsh3 elmsh-elm-bs">-&gt;</span> viewFanShape fanShape<span class="elmsh3 elmsh-elm-bs">)</span> fanShapes<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh4 elmsh-elm-gs">[</span>viewRoulettePointer<span class="elmsh4 elmsh-elm-gs">]</span><span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="15">
</div><div class="elmsh-line" data-elmsh-lc="16"><span class="elmsh5 elmsh-elm-f">viewFanShape</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">FanShape</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Html</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>
</div><div class="elmsh-line" data-elmsh-lc="17"><span class="elmsh5 elmsh-elm-f">viewFanShape</span> fanShape <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="18">  <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="19">    strokeDashoffset_ <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">String</span><span class="elmsh1 elmsh-elm-n">.</span>fromFloat <span class="elmsh3 elmsh-elm-bs">&lt;|</span>  <span class="elmsh3 elmsh-elm-bs">-</span>fanShape<span class="elmsh1 elmsh-elm-n">.</span>offset <span class="elmsh-comm">-- Fan shape direction is opposite to Svg.circle, becouse of the specification of dassArray. So I negat fanshape.offset.</span>
</div><div class="elmsh-line" data-elmsh-lc="20">    strokeDasharray_ <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">String</span><span class="elmsh1 elmsh-elm-n">.</span>fromFloat fanShape<span class="elmsh1 elmsh-elm-n">.</span>percentage <span class="elmsh3 elmsh-elm-bs">++</span> <span class="elmsh2 elmsh-elm-s">&quot; &quot;</span> <span class="elmsh3 elmsh-elm-bs">++</span> <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">String</span><span class="elmsh1 elmsh-elm-n">.</span>fromFloat <span class="elmsh3 elmsh-elm-bs">&lt;|</span> <span class="elmsh1 elmsh-elm-n">100.0</span> <span class="elmsh3 elmsh-elm-bs">-</span> fanShape<span class="elmsh1 elmsh-elm-n">.</span>percentage<span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="21">  <span class="elmsh3 elmsh-elm-k">in</span>
</div><div class="elmsh-line" data-elmsh-lc="22">    circle
</div><div class="elmsh-line" data-elmsh-lc="23">      <span class="elmsh4 elmsh-elm-gs">[</span> cx <span class="elmsh2 elmsh-elm-s">&quot;31.8309886184&quot;</span><span class="elmsh4 elmsh-elm-gs">,</span> cy <span class="elmsh2 elmsh-elm-s">&quot;31.8309886184&quot;</span><span class="elmsh4 elmsh-elm-gs">,</span> r <span class="elmsh2 elmsh-elm-s">&quot;15.9154943092&quot;</span>
</div><div class="elmsh-line" data-elmsh-lc="24">      <span class="elmsh4 elmsh-elm-gs">,</span> fill <span class="elmsh2 elmsh-elm-s">&quot;#ffffff&quot;</span><span class="elmsh4 elmsh-elm-gs">,</span> fillOpacity <span class="elmsh2 elmsh-elm-s">&quot;0.0&quot;</span>
</div><div class="elmsh-line" data-elmsh-lc="25">      <span class="elmsh4 elmsh-elm-gs">,</span> stroke fanShape<span class="elmsh1 elmsh-elm-n">.</span>color<span class="elmsh4 elmsh-elm-gs">,</span> strokeWidth <span class="elmsh2 elmsh-elm-s">&quot;31.8309886184&quot;</span><span class="elmsh4 elmsh-elm-gs">,</span> strokeDashoffset strokeDashoffset_<span class="elmsh4 elmsh-elm-gs">,</span> strokeDasharray strokeDasharray_ <span class="elmsh4 elmsh-elm-gs">]</span>
</div><div class="elmsh-line" data-elmsh-lc="26">      <span class="elmsh4 elmsh-elm-gs">[]</span>
</div><div class="elmsh-line" data-elmsh-lc="27">
</div><div class="elmsh-line" data-elmsh-lc="28"><span class="elmsh5 elmsh-elm-f">viewRoulettePointer</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Html</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>
</div><div class="elmsh-line" data-elmsh-lc="29"><span class="elmsh5 elmsh-elm-f">viewRoulettePointer</span> <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="30">  polygon
</div><div class="elmsh-line" data-elmsh-lc="31">    <span class="elmsh4 elmsh-elm-gs">[</span> points <span class="elmsh2 elmsh-elm-s">&quot;63.6619772368,29.5309886184 63.6619772368,34.3309886184 57.6619772368,31.8309886184&quot;</span>
</div><div class="elmsh-line" data-elmsh-lc="32">    <span class="elmsh4 elmsh-elm-gs">,</span> style <span class="elmsh2 elmsh-elm-s">&quot;fill&quot;</span> roulettePointerColor
</div><div class="elmsh-line" data-elmsh-lc="33">    <span class="elmsh4 elmsh-elm-gs">]</span>
</div><div class="elmsh-line" data-elmsh-lc="34">    <span class="elmsh4 elmsh-elm-gs">[]</span></div></code></pre></div><p><code>viewRoulette</code>関数では、まず引数で渡された<code>counters</code>や<code>rotation</code>(ルーレットの回転角[%]) をもとにして描画する扇形の情報<code>fanShapes</code>を算出する。<br>それを、扇形を描画する<code>viewFanShape</code>関数に適用することで全ての扇形を描画する(つまりルーレットが描画される)。<br>また、ルーレットの針を<code>viewRoulettePointer</code>関数で描画する。</p><h3 id="3-3-ルーレットの針が指すアイテムを特定する処理"><a class="not-prose group " aria-label="Permalink for 3.3 ルーレットの針が指すアイテムを特定する処理" href="#3-3-ルーレットの針が指すアイテムを特定する処理"><span class="group-hover:underline decoration-primary-500">3.3 ルーレットの針が指すアイテムを特定する処理</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h3><p>以下の<code>pointedCounter_</code>に、針が指すアイテム(<code>Counter</code>値)を計算しバインドしている。<br>途中で用いる<code>calculateCollisionRanges</code>と<code>willBeNewlyPointed</code>の関数についても続けて説明する。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">update</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Msg</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Model</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> (<span class="elmsh4 elmsh-elm-ts">Model</span>, <span class="elmsh4 elmsh-elm-ts">Cmd</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>)
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">update</span> msg model <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">case</span> <span class="elmsh3 elmsh-elm-bs">(</span>msg<span class="elmsh4 elmsh-elm-gs">,</span> model<span class="elmsh1 elmsh-elm-n">.</span>scene<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-k">of</span>
</div><div class="elmsh-line" data-elmsh-lc="4"><span class="elmsh-comm">-- (中略)</span>
</div><div class="elmsh-line" data-elmsh-lc="5">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">SpinRoulette</span> _<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">RouletteSpinning</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="6">      <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="7">        pointedCounter_ <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="8">          calculateCollisionRanges model<span class="elmsh1 elmsh-elm-n">.</span>counters model<span class="elmsh1 elmsh-elm-n">.</span>rotation
</div><div class="elmsh-line" data-elmsh-lc="9">            <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>map2 <span class="elmsh3 elmsh-elm-bs">(\</span>counter collisionRange <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh6 elmsh-elm-c">Tuple</span><span class="elmsh1 elmsh-elm-n">.</span>pair counter <span class="elmsh3 elmsh-elm-bs">&lt;|</span> willBeNewlyPointed model<span class="elmsh1 elmsh-elm-n">.</span>rotationVelocity collisionRange<span class="elmsh3 elmsh-elm-bs">)</span> model<span class="elmsh1 elmsh-elm-n">.</span>counters
</div><div class="elmsh-line" data-elmsh-lc="10">            <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>filter <span class="elmsh3 elmsh-elm-bs">(\(</span>counter<span class="elmsh4 elmsh-elm-gs">,</span> willBeNewlyPointed_<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> willBeNewlyPointed_<span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="11">            <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>head
</div><div class="elmsh-line" data-elmsh-lc="12">            <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">Maybe</span><span class="elmsh1 elmsh-elm-n">.</span>withDefault <span class="elmsh3 elmsh-elm-bs">(</span>model<span class="elmsh1 elmsh-elm-n">.</span>pointedCounter<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">False</span><span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="13">            <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">Tuple</span><span class="elmsh1 elmsh-elm-n">.</span>first
</div><div class="elmsh-line" data-elmsh-lc="14"><span class="elmsh-comm">-- (以下略)</span></div></code></pre></div><p>ここで<code>calculateCollisionRanges</code>は、それぞれのアイテムがルーレット上に占める角度の範囲(始端角[%]〜終端角[%])を計算する関数であり、次のように定義される。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">calculateCollisionRanges</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Counters</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Float</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">List</span> <span class="elmsh4 elmsh-elm-ts">RotationRange</span>
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">calculateCollisionRanges</span> counters rotation <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="4">    counts <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>map <span class="elmsh3 elmsh-elm-bs">(\</span>counter <span class="elmsh3 elmsh-elm-bs">-&gt;</span> toFloat counter<span class="elmsh1 elmsh-elm-n">.</span>count<span class="elmsh3 elmsh-elm-bs">)</span> counters
</div><div class="elmsh-line" data-elmsh-lc="5">    total <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>sum counts
</div><div class="elmsh-line" data-elmsh-lc="6">    percentages <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>map <span class="elmsh3 elmsh-elm-bs">(\</span>count <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh1 elmsh-elm-n">100.0</span> <span class="elmsh3 elmsh-elm-bs">*</span> count <span class="elmsh3 elmsh-elm-bs">/</span> total<span class="elmsh3 elmsh-elm-bs">)</span> counts
</div><div class="elmsh-line" data-elmsh-lc="7">    offsets <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="8">      <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>foldl <span class="elmsh3 elmsh-elm-bs">(\</span>percentage acc <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>append acc <span class="elmsh4 elmsh-elm-gs">[</span><span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">Maybe</span><span class="elmsh1 elmsh-elm-n">.</span>withDefault <span class="elmsh1 elmsh-elm-n">0.0</span> <span class="elmsh3 elmsh-elm-bs">&lt;|</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>maximum acc<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">+</span> percentage<span class="elmsh4 elmsh-elm-gs">]</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh4 elmsh-elm-gs">[</span><span class="elmsh1 elmsh-elm-n">0.0</span><span class="elmsh4 elmsh-elm-gs">]</span> percentages
</div><div class="elmsh-line" data-elmsh-lc="9">        <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>map <span class="elmsh3 elmsh-elm-bs">((+)</span> rotation<span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="10">  <span class="elmsh3 elmsh-elm-k">in</span>
</div><div class="elmsh-line" data-elmsh-lc="11">    <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>map2 <span class="elmsh3 elmsh-elm-bs">(\</span>percentage offset <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh6 elmsh-elm-c">RotationRange</span> offset <span class="elmsh3 elmsh-elm-bs">&lt;|</span> offset <span class="elmsh3 elmsh-elm-bs">+</span> percentage<span class="elmsh3 elmsh-elm-bs">)</span> percentages offsets</div></code></pre></div><p><code>let in</code>中で計算されている<code>offsets</code>は始端角[%]のリストであり、<code>percentages</code>はルーレット上で占める角度の範囲の大きさ[%]のリストである。<br>これらを用いて最後の行<code>List.map2 (\percentage offset -&gt; RotationRange offset &lt;| offset + percentage) percentages offsets</code>で、ルーレット上に占める角度の範囲を求めている。</p><p>次に<code>willBeNewlyPointed</code>は、回転が1つ分進むことによって指定のアイテムが新たにルーレットの針で指されるようになるかどうかを計算する関数であり、以下のように定義される。<br>(このアプリでは、ルーレットが回転している間、針が指しているアイテムのラベルを表示し続けるような仕様にしている。針が指すアイテムは回転が進むうちに変化するため、回転する毎に調べるように実装している。結果を知るだけであればルーレット停止時に調べれば済むのだが、今回はそれでは不十分なのだ。）</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">willBeNewlyPointed</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Float</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">RotationRange</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Bool</span>
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">willBeNewlyPointed</span> rotationVelocity collisionRange  <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">if</span> carryDownUnder <span class="elmsh1 elmsh-elm-n">200.0</span> <span class="elmsh1 elmsh-elm-n">100.0</span> <span class="elmsh3 elmsh-elm-bs">(</span>collisionRange<span class="elmsh1 elmsh-elm-n">.</span>max <span class="elmsh3 elmsh-elm-bs">+</span> rotationVelocity<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">&gt;</span> <span class="elmsh1 elmsh-elm-n">100.0</span>
</div><div class="elmsh-line" data-elmsh-lc="4">    <span class="elmsh3 elmsh-elm-bs">&amp;&amp;</span> carryDownUnder <span class="elmsh1 elmsh-elm-n">200.0</span> <span class="elmsh1 elmsh-elm-n">100.0</span> <span class="elmsh3 elmsh-elm-bs">(</span>collisionRange<span class="elmsh1 elmsh-elm-n">.</span>min <span class="elmsh3 elmsh-elm-bs">+</span> rotationVelocity<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">&lt;=</span> <span class="elmsh1 elmsh-elm-n">100</span>
</div><div class="elmsh-line" data-elmsh-lc="5">  <span class="elmsh3 elmsh-elm-k">then</span>
</div><div class="elmsh-line" data-elmsh-lc="6">    <span class="elmsh6 elmsh-elm-c">True</span>
</div><div class="elmsh-line" data-elmsh-lc="7">  <span class="elmsh3 elmsh-elm-k">else</span>
</div><div class="elmsh-line" data-elmsh-lc="8">    <span class="elmsh6 elmsh-elm-c">False</span>
</div><div class="elmsh-line" data-elmsh-lc="9">
</div><div class="elmsh-line" data-elmsh-lc="10"><span class="elmsh5 elmsh-elm-f">carryDownUnder</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Float</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Float</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Float</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Float</span>
</div><div class="elmsh-line" data-elmsh-lc="11"><span class="elmsh5 elmsh-elm-f">carryDownUnder</span> maximum decrementStep value <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="12">  <span class="elmsh3 elmsh-elm-k">if</span> value <span class="elmsh3 elmsh-elm-bs">&lt;</span> maximum <span class="elmsh3 elmsh-elm-k">then</span>
</div><div class="elmsh-line" data-elmsh-lc="13">    value
</div><div class="elmsh-line" data-elmsh-lc="14">  <span class="elmsh3 elmsh-elm-k">else</span>
</div><div class="elmsh-line" data-elmsh-lc="15">    carryDownUnder value decrementStep <span class="elmsh3 elmsh-elm-bs">&lt;|</span> value <span class="elmsh3 elmsh-elm-bs">-</span> decrementStep</div></code></pre></div><p><code>willBeNewlyPointed</code>関数内のみにおいては、ルーレット上でのアイテムの始端角/終端角を0[%]〜200[%]で表している。(他の箇所では0[%]〜100[%]で表現している。)<br>このとき、ルーレットの回転が進むことによって新たに針に指されるようになるアイテムは次の4つの条件をすべて満たす。</p><ol start="1"><li>回転が進む前の、始端角が100[%]以下である</li><li>回転が進む前の、終端角が100[%]以下である</li><li>回転が進んだ後の、始端角が100[%]以下である</li><li>回転が進んだ後の、終端角が100[%]より大きい</li></ol><p>ここで、条件1と2は常に成り立つので、わざわざ考慮しなくてよい。(なぜなら、「他の箇所では0[%]〜100[%]で表現している」という前提のため。回転が進む前の始端角/終端角は、「他の箇所」から渡される値。)<br>よって<code>willBeNewlyPointed</code>関数は、条件3と4を満たすようなアイテム(<code>counter</code>)に対しては<code>True</code>を返し、そうでないものには<code>False</code>を返す。</p><p>ちなみに、ヘルパー関数の<code>carryDownUnder</code>は、回転角が100[%]以上進むような場合でも始端角/終端角を0[%]〜200[%]の範囲に収めるために用いる。</p><h3 id="3-4-ルーレットの停止箇所をランダム-or-インチキで決定する処理"><a class="not-prose group " aria-label="Permalink for 3.4 ルーレットの停止箇所をランダム or インチキで決定する処理" href="#3-4-ルーレットの停止箇所をランダム-or-インチキで決定する処理"><span class="group-hover:underline decoration-primary-500">3.4 ルーレットの停止箇所をランダム or インチキで決定する処理</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h3><p><img alt="cheat" src="/images/tech-blog/2018-unfair-roulette-technology/cheating.avif"></p><p>インチキでルーレットの停止箇所を決定するには、ラベルの左隣にある四角形をクリックする。<br>これにより<code>Cheat</code>メッセージが送られ、以下に示すコードで<code>Cheat</code>メッセージを処理することで、ルーレットを停止させる回転角の範囲<code>model.cheatedGoalRange </code>を、クリックしたアイテム範囲に設定する。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">update</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Msg</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Model</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> (<span class="elmsh4 elmsh-elm-ts">Model</span>, <span class="elmsh4 elmsh-elm-ts">Cmd</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>)
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">update</span> msg model <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">case</span> <span class="elmsh3 elmsh-elm-bs">(</span>msg<span class="elmsh4 elmsh-elm-gs">,</span> model<span class="elmsh1 elmsh-elm-n">.</span>scene<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-k">of</span>
</div><div class="elmsh-line" data-elmsh-lc="4"><span class="elmsh-comm">-- (中略)</span>
</div><div class="elmsh-line" data-elmsh-lc="5">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">Cheat</span> counter<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">EditingRoulette</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="6">      <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="7">        cheatedGoalRange_ <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="8">          <span class="elmsh3 elmsh-elm-k">if</span> counter<span class="elmsh1 elmsh-elm-n">.</span>count <span class="elmsh3 elmsh-elm-bs">&gt;</span> <span class="elmsh1 elmsh-elm-n">0</span> <span class="elmsh3 elmsh-elm-k">then</span>
</div><div class="elmsh-line" data-elmsh-lc="9">            calculateCollisionRanges model<span class="elmsh1 elmsh-elm-n">.</span>counters <span class="elmsh1 elmsh-elm-n">0.0</span>
</div><div class="elmsh-line" data-elmsh-lc="10">              <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>take counter<span class="elmsh1 elmsh-elm-n">.</span>id
</div><div class="elmsh-line" data-elmsh-lc="11">              <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>reverse
</div><div class="elmsh-line" data-elmsh-lc="12">              <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>head
</div><div class="elmsh-line" data-elmsh-lc="13">              <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">Maybe</span><span class="elmsh1 elmsh-elm-n">.</span>andThen <span class="elmsh3 elmsh-elm-bs">(\</span>maybeRange <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh6 elmsh-elm-c">Just</span> <span class="elmsh3 elmsh-elm-bs">&lt;|</span> <span class="elmsh6 elmsh-elm-c">Range</span> <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh1 elmsh-elm-n">100.0</span> <span class="elmsh3 elmsh-elm-bs">-</span> maybeRange<span class="elmsh1 elmsh-elm-n">.</span>max<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh1 elmsh-elm-n">100.0</span> <span class="elmsh3 elmsh-elm-bs">-</span> maybeRange<span class="elmsh1 elmsh-elm-n">.</span>min<span class="elmsh3 elmsh-elm-bs">))</span>
</div><div class="elmsh-line" data-elmsh-lc="14">          <span class="elmsh3 elmsh-elm-k">else</span>
</div><div class="elmsh-line" data-elmsh-lc="15">            <span class="elmsh6 elmsh-elm-c">Nothing</span>
</div><div class="elmsh-line" data-elmsh-lc="16">      <span class="elmsh3 elmsh-elm-k">in</span>
</div><div class="elmsh-line" data-elmsh-lc="17">        <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh4 elmsh-elm-gs">{</span>model <span class="elmsh3 elmsh-elm-bs">|</span> cheatedGoalRange <span class="elmsh3 elmsh-elm-bs">=</span> cheatedGoalRange_<span class="elmsh4 elmsh-elm-gs">},</span> <span class="elmsh6 elmsh-elm-c">Cmd</span><span class="elmsh1 elmsh-elm-n">.</span>none<span class="elmsh3 elmsh-elm-bs">)</span></div></code></pre></div><p>この後「Start」ボタンがクリックされると<code>OnClickStart</code>メッセージが送られ、以下のコードに示すように、停止させる回転角の範囲(先程インチキで決めた値)内で停止角をランダムに決定する。<br>このとき、もしもインチキがされていないならば、0[%]〜100[%]の範囲(コード中の<code>fairGoalRange</code>)内でランダムに停止角を決定する(つまり、フェア)。</p><p>これにより決定した停止角を<code>StartSpinningRoulette</code>メッセージで送り、ルーレットの回転が開始される。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">update</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Msg</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Model</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> (<span class="elmsh4 elmsh-elm-ts">Model</span>, <span class="elmsh4 elmsh-elm-ts">Cmd</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>)
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">update</span> msg model <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">case</span> <span class="elmsh3 elmsh-elm-bs">(</span>msg<span class="elmsh4 elmsh-elm-gs">,</span> model<span class="elmsh1 elmsh-elm-n">.</span>scene<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-k">of</span>
</div><div class="elmsh-line" data-elmsh-lc="4"><span class="elmsh-comm">-- (中略)</span>
</div><div class="elmsh-line" data-elmsh-lc="5">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">OnClickStart</span><span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">EditingRoulette</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="6">      <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="7">        goalRange <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="8">          <span class="elmsh6 elmsh-elm-c">Maybe</span><span class="elmsh1 elmsh-elm-n">.</span>withDefault fairGoalRange model<span class="elmsh1 elmsh-elm-n">.</span>cheatedGoalRange
</div><div class="elmsh-line" data-elmsh-lc="9">      <span class="elmsh3 elmsh-elm-k">in</span>
</div><div class="elmsh-line" data-elmsh-lc="10">        <span class="elmsh3 elmsh-elm-bs">(</span>model<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">Random</span><span class="elmsh1 elmsh-elm-n">.</span>generate <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">StartSpinningRoulette</span> initialDecayRate<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">&lt;|</span> <span class="elmsh6 elmsh-elm-c">Random</span><span class="elmsh1 elmsh-elm-n">.</span>pair <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">Random</span><span class="elmsh1 elmsh-elm-n">.</span>float initialVelocityRange<span class="elmsh1 elmsh-elm-n">.</span>min initialVelocityRange<span class="elmsh1 elmsh-elm-n">.</span>max<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">Random</span><span class="elmsh1 elmsh-elm-n">.</span>float goalRange<span class="elmsh1 elmsh-elm-n">.</span>min goalRange<span class="elmsh1 elmsh-elm-n">.</span>max<span class="elmsh3 elmsh-elm-bs">))</span>
</div><div class="elmsh-line" data-elmsh-lc="11">
</div><div class="elmsh-line" data-elmsh-lc="12">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">StartSpinningRoulette</span> decayRate_ <span class="elmsh3 elmsh-elm-bs">(</span>initialVelocity<span class="elmsh4 elmsh-elm-gs">,</span> goal<span class="elmsh3 elmsh-elm-bs">)</span><span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">EditingRoulette</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="13">      <span class="elmsh3 elmsh-elm-k">if</span> isThereEnogthCountersToStart model<span class="elmsh1 elmsh-elm-n">.</span>counters <span class="elmsh3 elmsh-elm-k">then</span>
</div><div class="elmsh-line" data-elmsh-lc="14">        <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh4 elmsh-elm-gs">{</span> model <span class="elmsh3 elmsh-elm-bs">|</span> scene <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">RouletteSpinning</span><span class="elmsh4 elmsh-elm-gs">,</span> decayRate <span class="elmsh3 elmsh-elm-bs">=</span> decayRate_<span class="elmsh4 elmsh-elm-gs">,</span>rotationVelocity <span class="elmsh3 elmsh-elm-bs">=</span> initialVelocity<span class="elmsh4 elmsh-elm-gs">,</span> goalRotation <span class="elmsh3 elmsh-elm-bs">=</span> goal <span class="elmsh4 elmsh-elm-gs">},</span> <span class="elmsh6 elmsh-elm-c">Cmd</span><span class="elmsh1 elmsh-elm-n">.</span>none<span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="15">      <span class="elmsh3 elmsh-elm-k">else</span>
</div><div class="elmsh-line" data-elmsh-lc="16">        <span class="elmsh3 elmsh-elm-bs">(</span>model<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">Cmd</span><span class="elmsh1 elmsh-elm-n">.</span>none<span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="17"><span class="elmsh-comm">-- (以下略)</span>
</div><div class="elmsh-line" data-elmsh-lc="18">
</div><div class="elmsh-line" data-elmsh-lc="19">
</div><div class="elmsh-line" data-elmsh-lc="20"><span class="elmsh-comm">-- ヘルパー関数: ルーレットを開始するための最低限の個数のアイテムが設定済みかどうかをチェックする</span>
</div><div class="elmsh-line" data-elmsh-lc="21"><span class="elmsh5 elmsh-elm-f">isThereEnogthCountersToStart</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Counters</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Bool</span>
</div><div class="elmsh-line" data-elmsh-lc="22"><span class="elmsh5 elmsh-elm-f">isThereEnogthCountersToStart</span> counters <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="23">  counters
</div><div class="elmsh-line" data-elmsh-lc="24">    <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>filter <span class="elmsh3 elmsh-elm-bs">(\</span>counter <span class="elmsh3 elmsh-elm-bs">-&gt;</span> counter<span class="elmsh1 elmsh-elm-n">.</span>count <span class="elmsh3 elmsh-elm-bs">&gt;</span> <span class="elmsh1 elmsh-elm-n">0</span><span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="25">    <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>length
</div><div class="elmsh-line" data-elmsh-lc="26">    <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh5 elmsh-elm-f">(&lt;)</span> <span class="elmsh1 elmsh-elm-n">1</span></div></code></pre></div><p>ちなみに、ルーレットの回転は サブスクリプション により定期的になされる。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">subscriptions</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Model</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Sub</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">subscriptions</span> model <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">case</span> model<span class="elmsh1 elmsh-elm-n">.</span>scene <span class="elmsh3 elmsh-elm-k">of</span>
</div><div class="elmsh-line" data-elmsh-lc="4">    <span class="elmsh6 elmsh-elm-c">RouletteSpinning</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="5">      <span class="elmsh6 elmsh-elm-c">Time</span><span class="elmsh1 elmsh-elm-n">.</span>every <span class="elmsh1 elmsh-elm-n">30</span> <span class="elmsh6 elmsh-elm-c">SpinRoulette</span>
</div><div class="elmsh-line" data-elmsh-lc="6">    <span class="elmsh6 elmsh-elm-c">RouletteSpinningTowardsStop</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="7">      <span class="elmsh6 elmsh-elm-c">Time</span><span class="elmsh1 elmsh-elm-n">.</span>every <span class="elmsh1 elmsh-elm-n">30</span> <span class="elmsh6 elmsh-elm-c">SpinRoulette</span>
</div><div class="elmsh-line" data-elmsh-lc="8">    _ <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="9">      <span class="elmsh6 elmsh-elm-c">Sub</span><span class="elmsh1 elmsh-elm-n">.</span>none</div></code></pre></div><h3 id="3-5-ルーレットを予定された停止角で停止させる処理"><a class="not-prose group " aria-label="Permalink for 3.5 ルーレットを予定された停止角で停止させる処理" href="#3-5-ルーレットを予定された停止角で停止させる処理"><span class="group-hover:underline decoration-primary-500">3.5 ルーレットを予定された停止角で停止させる処理</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h3><p>ルーレットの回転を進める<code>SpinRoulette</code>メッセージを<code>update</code>関数内で処理する際、<br>ルーレットの角加速度が閾値を初めて下回るような場合に、減衰係数<code>model.decayRate</code>を調整するための<code>AdjustDecayRateForSmoothStop</code>メッセージを送信する (コード掲載は省略)。</p><p>これにより減衰係数を1に近づけ、ルーレットの回転が高々あと1周だけゆっくりと続くようにする。<br>このときの<code>SpinRoulette</code>メッセージの処理中で、<code>willReachGoal</code>関数によりルーレットが停止角に達するかどうかを調べ、達するようであればルーレットの回転を停止する。</p><div class="no-prose"><style>.elmsh {color: #abb2bf;background: #282c34;}.elmsh-hl {background: rgba(229, 231,235, 0.1);}.elmsh-add {background: rgba(40, 124,82, 0.4);}.elmsh-del {background: rgba(136, 64,67, 0.4);}.elmsh-comm {font-style: italic;color: #5c6370;}.elmsh1 {color: #d19a66;}.elmsh2 {color: #98c379;}.elmsh3 {color: #c678dd;}.elmsh4 {color: #c678dd;}.elmsh5 {color: #61aeee;}.elmsh6 {color: #d19a66;}.elmsh7 {color: #abb2bf;}</style><pre class="elmsh"><code><div class="elmsh-line" data-elmsh-lc="1"><span class="elmsh5 elmsh-elm-f">update</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Msg</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Model</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> (<span class="elmsh4 elmsh-elm-ts">Model</span>, <span class="elmsh4 elmsh-elm-ts">Cmd</span> <span class="elmsh4 elmsh-elm-ts">Msg</span>)
</div><div class="elmsh-line" data-elmsh-lc="2"><span class="elmsh5 elmsh-elm-f">update</span> msg model <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="3">  <span class="elmsh3 elmsh-elm-k">case</span> <span class="elmsh3 elmsh-elm-bs">(</span>msg<span class="elmsh4 elmsh-elm-gs">,</span> model<span class="elmsh1 elmsh-elm-n">.</span>scene<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-k">of</span>
</div><div class="elmsh-line" data-elmsh-lc="4"><span class="elmsh-comm">-- (中略)</span>
</div><div class="elmsh-line" data-elmsh-lc="5">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">AdjustDecayRateForSmoothStop</span> decayRate_<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">RouletteSpinning</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="6">      <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh4 elmsh-elm-gs">{</span> model <span class="elmsh3 elmsh-elm-bs">|</span> decayRate <span class="elmsh3 elmsh-elm-bs">=</span> decayRate_<span class="elmsh4 elmsh-elm-gs">,</span> scene <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">RouletteSpinningTowardsStop</span> <span class="elmsh4 elmsh-elm-gs">},</span> <span class="elmsh6 elmsh-elm-c">Cmd</span><span class="elmsh1 elmsh-elm-n">.</span>none<span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="7">
</div><div class="elmsh-line" data-elmsh-lc="8">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">SpinRoulette</span> _<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">RouletteSpinningTowardsStop</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="9">      <span class="elmsh3 elmsh-elm-k">let</span>
</div><div class="elmsh-line" data-elmsh-lc="10">        pointedCounter_ <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="11">          calculateCollisionRanges model<span class="elmsh1 elmsh-elm-n">.</span>counters model<span class="elmsh1 elmsh-elm-n">.</span>rotation
</div><div class="elmsh-line" data-elmsh-lc="12">            <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>map2 <span class="elmsh3 elmsh-elm-bs">(\</span>counter collisionRange <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh6 elmsh-elm-c">Tuple</span><span class="elmsh1 elmsh-elm-n">.</span>pair counter <span class="elmsh3 elmsh-elm-bs">&lt;|</span> willBeNewlyPointed model<span class="elmsh1 elmsh-elm-n">.</span>rotationVelocity collisionRange<span class="elmsh3 elmsh-elm-bs">)</span> model<span class="elmsh1 elmsh-elm-n">.</span>counters
</div><div class="elmsh-line" data-elmsh-lc="13">            <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>filter <span class="elmsh3 elmsh-elm-bs">(\(</span>counter<span class="elmsh4 elmsh-elm-gs">,</span> willBeNewlyPointed_<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> willBeNewlyPointed_<span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="14">            <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">List</span><span class="elmsh1 elmsh-elm-n">.</span>head
</div><div class="elmsh-line" data-elmsh-lc="15">            <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">Maybe</span><span class="elmsh1 elmsh-elm-n">.</span>withDefault <span class="elmsh3 elmsh-elm-bs">(</span>model<span class="elmsh1 elmsh-elm-n">.</span>pointedCounter<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">False</span><span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="16">            <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">Tuple</span><span class="elmsh1 elmsh-elm-n">.</span>first
</div><div class="elmsh-line" data-elmsh-lc="17">        <span class="elmsh3 elmsh-elm-bs">(</span>rotation_<span class="elmsh4 elmsh-elm-gs">,</span> rotationVelocity_<span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">=</span> updateRotation model<span class="elmsh1 elmsh-elm-n">.</span>rotation model<span class="elmsh1 elmsh-elm-n">.</span>rotationVelocity model<span class="elmsh1 elmsh-elm-n">.</span>decayRate
</div><div class="elmsh-line" data-elmsh-lc="18">      <span class="elmsh3 elmsh-elm-k">in</span>
</div><div class="elmsh-line" data-elmsh-lc="19">        <span class="elmsh3 elmsh-elm-k">if</span> willReachGoal model<span class="elmsh1 elmsh-elm-n">.</span>goalRotation model<span class="elmsh1 elmsh-elm-n">.</span>rotation model<span class="elmsh1 elmsh-elm-n">.</span>rotationVelocity <span class="elmsh3 elmsh-elm-k">then</span>
</div><div class="elmsh-line" data-elmsh-lc="20">          update <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">StopRoulette</span> milliSecondsToKeepRouletteStopUntilResult<span class="elmsh3 elmsh-elm-bs">)</span> model
</div><div class="elmsh-line" data-elmsh-lc="21">        <span class="elmsh3 elmsh-elm-k">else</span>
</div><div class="elmsh-line" data-elmsh-lc="22">          <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh4 elmsh-elm-gs">{</span> model <span class="elmsh3 elmsh-elm-bs">|</span> rotation <span class="elmsh3 elmsh-elm-bs">=</span> rotation_<span class="elmsh4 elmsh-elm-gs">,</span> rotationVelocity <span class="elmsh3 elmsh-elm-bs">=</span> rotationVelocity_<span class="elmsh4 elmsh-elm-gs">,</span> pointedCounter <span class="elmsh3 elmsh-elm-bs">=</span> pointedCounter_<span class="elmsh4 elmsh-elm-gs">},</span> <span class="elmsh6 elmsh-elm-c">Cmd</span><span class="elmsh1 elmsh-elm-n">.</span>none<span class="elmsh3 elmsh-elm-bs">)</span>
</div><div class="elmsh-line" data-elmsh-lc="23">
</div><div class="elmsh-line" data-elmsh-lc="24">    <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh6 elmsh-elm-c">StopRoulette</span> forMilliSeconds<span class="elmsh4 elmsh-elm-gs">,</span> <span class="elmsh6 elmsh-elm-c">RouletteSpinningTowardsStop</span><span class="elmsh3 elmsh-elm-bs">)</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span>
</div><div class="elmsh-line" data-elmsh-lc="25">      <span class="elmsh3 elmsh-elm-bs">(</span><span class="elmsh4 elmsh-elm-gs">{</span> model <span class="elmsh3 elmsh-elm-bs">|</span> scene <span class="elmsh3 elmsh-elm-bs">=</span> <span class="elmsh6 elmsh-elm-c">RouletteStopped</span><span class="elmsh4 elmsh-elm-gs">},</span> <span class="elmsh6 elmsh-elm-c">Process</span><span class="elmsh1 elmsh-elm-n">.</span>sleep forMilliSeconds <span class="elmsh3 elmsh-elm-bs">|&gt;</span> <span class="elmsh6 elmsh-elm-c">Task</span><span class="elmsh1 elmsh-elm-n">.</span>perform <span class="elmsh3 elmsh-elm-bs">(</span>always <span class="elmsh6 elmsh-elm-c">ShowResult</span><span class="elmsh3 elmsh-elm-bs">))</span>
</div><div class="elmsh-line" data-elmsh-lc="26"><span class="elmsh-comm">-- (以下略)</span>
</div><div class="elmsh-line" data-elmsh-lc="27">
</div><div class="elmsh-line" data-elmsh-lc="28">
</div><div class="elmsh-line" data-elmsh-lc="29"><span class="elmsh-comm">-- ヘルパー関数: 回転が１つ進むことで予定の停止角に達するかどうかを調べる</span>
</div><div class="elmsh-line" data-elmsh-lc="30"><span class="elmsh5 elmsh-elm-f">willReachGoal</span> <span class="elmsh3 elmsh-elm-bs">:</span> <span class="elmsh4 elmsh-elm-ts">Float</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Float</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Float</span> <span class="elmsh3 elmsh-elm-bs">-&gt;</span> <span class="elmsh4 elmsh-elm-ts">Bool</span>
</div><div class="elmsh-line" data-elmsh-lc="31"><span class="elmsh5 elmsh-elm-f">willReachGoal</span> goal rotation velocity <span class="elmsh3 elmsh-elm-bs">=</span>
</div><div class="elmsh-line" data-elmsh-lc="32">  <span class="elmsh3 elmsh-elm-k">if</span> rotation <span class="elmsh3 elmsh-elm-bs">&lt;</span> goal <span class="elmsh3 elmsh-elm-bs">&amp;&amp;</span> goal <span class="elmsh3 elmsh-elm-bs">&lt;=</span> rotation <span class="elmsh3 elmsh-elm-bs">+</span> velocity <span class="elmsh3 elmsh-elm-k">then</span>
</div><div class="elmsh-line" data-elmsh-lc="33">    <span class="elmsh6 elmsh-elm-c">True</span>
</div><div class="elmsh-line" data-elmsh-lc="34">  <span class="elmsh3 elmsh-elm-k">else</span>
</div><div class="elmsh-line" data-elmsh-lc="35">    <span class="elmsh6 elmsh-elm-c">False</span></div></code></pre></div><h2 id="4-もし作り直すなら"><a class="not-prose group " aria-label="Permalink for 4. もし作り直すなら..." href="#4-もし作り直すなら"><span class="group-hover:underline decoration-primary-500">4. もし作り直すなら...</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h2><p>この記事の残りでは、出来栄えに対する不満点、開発を振り返っての反省点を述べていく。<br>未来の自分よ、気が向いたらこれを元に修正してくれ。</p><h3 id="4-1-スマートフォンで使いやすいデザインにする"><a class="not-prose group " aria-label="Permalink for 4.1 スマートフォンで使いやすいデザインにする" href="#4-1-スマートフォンで使いやすいデザインにする"><span class="group-hover:underline decoration-primary-500">4.1 スマートフォンで使いやすいデザインにする</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h3><p>このアプリはPCよりもスマートフォンで利用するシーンがメインになると予想される。</p><p>しかし開発当時はPCでレイアウトを確認しながらコーディングを進めてしまい、スマートフォンで確認したのは開発が一通り終わった頃になってしまった。</p><p>スクリーンショットを見ればわかるように、スマートフォンでは小さく表示されてしまい操作しづらい。</p><p>開発終盤でレスポンシブにしようと試みたが、思うようなレイアウトにならず断念してしまった。<br>むしろPCは切り捨てて、完全にモバイル用にしてしまうのでも良かったと思う。</p><p>👇PC画面での表示
<img alt="with-pc" src="/images/tech-blog/2018-unfair-roulette-technology/with-pc.avif"></p><p>👇スマートフォンでの表示
<img alt="with-mobile" src="/images/tech-blog/2018-unfair-roulette-technology/with-mobile.avif"></p><h3 id="4-2-裏技的なコードよりも王道的なコードで書く"><a class="not-prose group " aria-label="Permalink for 4.2 裏技的なコードよりも王道的なコードで書く" href="#4-2-裏技的なコードよりも王道的なコードで書く"><span class="group-hover:underline decoration-primary-500">4.2 裏技的なコードよりも王道的なコードで書く</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h3><p>既に述べたように、ルーレットの描画（というよりも、扇形の描画）にはこちらの記事の方法を用いた。<br><a href="https://hahnah.github.io/tech-blog/2018-elm-svg-piechart/">[Elm] SVGで円グラフを表示する方法</a></p><p>この方法では時計回りに扇形を並べることで円グラフを作ることになる。<br>私はコードをなるべくシンプルにするためには反時計回りに扇形を並べるべきと考えていたが、<br>この方法を使いつつも反時計回りに並べようとすると、うまく表示されなかった。<br>(オフセットや描画順などを泥臭く調整すれば上手くいったかもしれないが...)</p><p>SVGで描画する際の角度については反時計回りが正の回転方向なのだが、時計回りの方向に扇形を並べてしまったことで向きの不一致が起こった。このため所々に細かな調整が必要になり、コードが若干理解しづらくなってしまったし、コーディングの際に私自身が混乱した。</p><h3 id="4-3-ルーレットが自然な止まり方をするようなロジックにする"><a class="not-prose group " aria-label="Permalink for 4.3 ルーレットが自然な止まり方をするようなロジックにする" href="#4-3-ルーレットが自然な止まり方をするようなロジックにする"><span class="group-hover:underline decoration-primary-500">4.3 ルーレットが自然な止まり方をするようなロジックにする</span><svg class="ph-icon text-primary-300 inline-block text-xl ml-2" fill="currentColor" height="1em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 256 256" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"></path></svg></a></h3><p>このルーレットアプリは予定された停止角で停止するように終盤で角速度の減衰係数の調整を行うが、このために止まり方が不自然に見えてしまうことがある。<br>(最後にしぶとく回転し続ける。)</p><p>これを解決する一案として、調整を最後に行うのではなく開始直後に行う方法がある。<br>まず、ルーレットの初速度と減衰係数より調整を一切行わない場合の停止角を求め、目的としている停止角との差分を算出する。<br>回転開始直後の１回目の回転進みで、回転角が丁度算出した差分の値になるように回転させる。<br>(1回目の回転進みに限らず、算出した差分と回転初速度の大小関係の程度によっては、数回目としても良いと思う。)<br>そこから先は減衰係数を本来の値にして回転を進める。<br>すると目的としている停止角で停止し、停止の仕方も自然なものとなる。</p><p>しかし今度はルーレット回転開始直後の回転の仕方に違和感が出るのではないか？　と疑問に思うかもしれないが、<br>回転開始からしばらくは角速度が大きく、また角速度が調整される時間は非常に短い(数十ミリ〜数百ミリ秒)のでほぼ違和感はないと思われる。</p></article><div class="mt-8 border-t grid grid-cols-1 text-sm font-medium sm:grid-cols-2 sm:text-base"><div class="sm:col-start-1 flex flex-col mt-4 xl:mt-8"><span>Older post</span><a class="text-primary-700 dark:text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" elm-pages:prefetch="" href="/tech-blog/2018-unfair-roulette/">← Unfair Roulette : インチキできるルーレットアプリを作成した</a></div><div class="sm:col-start-2 flex flex-col sm:text-right mt-4 xl:mt-8"><span>Newer post</span><a class="text-primary-700 dark:text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" elm-pages:prefetch="" href="/tech-blog/2018-elm-flags/">[Elm] Flags: JavaScript から Elm を引数付きで初期化する →</a></div></div></div></main><footer class="mt-16 flex flex-col items-center"><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Natsuki Harai</div><div>•</div><div>© 2025</div><div>•</div><a class="hover:underline" href="/">Hahnah Chronicle</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a class="hover:underline" href="https://github.com/hahnah/hahnah.github.io" rel="noopener noreferrer" target="_blank">source code</a></div></footer></div></div>
  </body>
</html>